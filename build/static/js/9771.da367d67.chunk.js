"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[2396,9771],{60309:(e,t,s)=>{s.d(t,{A:()=>p});var a=s(89379),n=s(65043),l=s(75105),i=s(83003),r=s(91887),c=s(1880),d=s(9435),o=s(70579);const p=e=>{let{open:t,get:s,id:p}=e;const x=(0,i.wA)(),[h,u]=(0,n.useState)({name:""}),m=(0,d.A)();(0,n.useEffect)((()=>{p?(async()=>{if(!p)return;const e=c.A.get("token");try{const t=await fetch("https://ezy-bill-api.tisindia.net/api/v1/partycategory/get/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,id:p})}),s=await t.json();if(console.log(s),200!==t.status)return void m(s.error,"error");u({name:s.name})}catch(t){console.log(t),m("Something went wrong!","error")}})():u({name:""})}),[p]);return(0,o.jsx)("div",{className:"party__modal",children:(0,o.jsxs)(l.A,{open:t,size:400,onClose:()=>{x((0,r.L)(!1))},children:[(0,o.jsx)(l.A.Header,{children:(0,o.jsx)("h6",{className:"py-2",children:"Add Party Category"})}),(0,o.jsxs)(l.A.Body,{children:[(0,o.jsxs)("div",{className:"border-t pt-7 border-gray-300",children:[(0,o.jsx)("p",{className:"mb-1 text-[12px]",children:"Category Name"}),(0,o.jsx)("input",{type:"text",onChange:e=>u((0,a.A)((0,a.A)({},h),{},{name:e.target.value})),value:h.name})]}),(0,o.jsx)("button",{onClick:async()=>{if(!h.name)return void m("Please enter a category name!","error");const e=c.A.get("token"),t=(0,a.A)((0,a.A)({},h),{},{token:e});p&&(t.update=!0,t.id=p);try{const e=await fetch("https://ezy-bill-api.tisindia.net/api/v1/partycategory/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await e.json();return 200!==e.status?void m(a.error,"error"):(s&&s(p?h.name:a),u({name:""}),m("Party category added successfully!","success"),void x((0,r.L)(!1)))}catch(n){console.log(n),m("Something went wrong!","error")}},className:"px-3 py-2 mt-3 bg-blue-800 text-white rounded-md",children:"Save"})]})]})})}},89771:(e,t,s)=>{s.d(t,{A:()=>g});var a=s(65043),n=s(45394),l=s(9435),i=s(1880),r=s(50423),c=s(83003),d=s(60309),o=s(23156),p=s(7801),x=s(89621),h=s(23930),u=s(12396),m=s(91887),j=s(70579);const g=e=>{let{model:t,onType:s,value:g,partyType:y}=e;const v=(0,c.wA)(),A=(0,l.A)(),[f,b]=(0,a.useState)(""),[N,w]=(0,a.useState)(),[C,S]=(0,a.useState)(!1),[T,_]=(0,a.useState)(""),[P,k]=(0,a.useState)([]),O=(0,c.d4)((e=>e.partyModalSlice.show)),[E,z]=(0,a.useState)(!1),[B,F]=(0,a.useState)(!1),[q,I]=(0,a.useState)(!1),J=(0,a.useRef)(null),[R,U]=(0,a.useState)(!1),[D,L]=(0,a.useState)(0);(0,a.useEffect)((()=>{N&&(b(N.title||N.name),s(N._id))}),[N]);const H=async e=>{try{const s="https://ezy-bill-api.tisindia.net/api/v1"+"/".concat(t,"/get"),a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i.A.get("token"),id:e})}),n=await a.json();w(n.data||n)}catch(s){return A("Something went wrong","error")}};(0,a.useEffect)((()=>{g&&H(g)}),[g]);const M=e=>{e&&("party"===t?z(!1):"item"===t?F(!1):I(!1))},G=e=>{H(e._id)};return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"relative",children:[(0,j.jsxs)(p.A,{onClose:()=>z(!1),open:E,size:"md",children:[(0,j.jsx)(p.A.Header,{children:(0,j.jsx)(p.A.Actions,{children:(0,j.jsx)("p",{className:"text-lg font-bold",children:"Add Party"})})}),(0,j.jsx)(p.A.Body,{children:(0,j.jsx)(x.PartyComponent,{save:M,getRes:G})})]}),(0,j.jsxs)(p.A,{onClose:()=>F(!1),open:B,size:"md",children:[(0,j.jsx)(p.A.Header,{children:(0,j.jsx)(p.A.Actions,{children:(0,j.jsx)("p",{className:"text-lg font-bold",children:"Add Item"})})}),(0,j.jsx)(p.A.Body,{children:(0,j.jsx)(h.AddItemComponent,{save:M,getRes:G})})]}),(0,j.jsxs)(p.A,{onClose:()=>I(!1),open:q,size:"sm",children:[(0,j.jsx)(p.A.Header,{children:(0,j.jsx)(p.A.Actions,{children:(0,j.jsx)("p",{className:"text-lg font-bold",children:"Add Category"})})}),(0,j.jsx)(p.A.Body,{children:(0,j.jsx)(u.CategoryComponent,{save:M})})]}),(0,j.jsx)(d.A,{open:O}),(0,j.jsx)("input",{type:"text",className:"w-full border rounded-[3px]",value:f||T,onFocus:()=>S(!0),onBlur:()=>{S(!1),L(0)},onChange:e=>{var s;_(e.target.value),s=e.target.value,J.current&&clearTimeout(J.current),U(!0),J.current=setTimeout((async()=>{try{const e="https://ezy-bill-api.tisindia.net/api/v1"+"/".concat(t,"/get"),a={token:i.A.get("token"),search:!0,searchText:s};"party"===t&&(a.partyType=y);const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),l=await n.json();if(U(!1),200===n.status){if("partycategory"===t)return void(l.length>0?k([...l]):k(["No result found"]));l.data.length>0?k([...l.data]):k(["No result found"])}else k([])}catch(e){console.log("Someting went wrong",e)}}),300),L(0)},placeholder:"Search..."}),f?(0,j.jsx)(n.$8F,{className:"absolute right-2 top-[5px] text-[16px] cursor-pointer text-gray-500",onClick:()=>{L(0),b(""),w(),_(""),k([]),s("")}}):(0,j.jsx)(r.Mmj,{className:"absolute right-2 top-[5px] text-[16px] cursor-pointer"}),C&&(0,j.jsxs)("div",{className:"w-full max-h-[250px] overflow-y-auto bg-white absolute z-[9999999] rounded mt-1",style:{boxShadow:"0px 0px 5px lightgray"},children:[(0,j.jsxs)("ul",{children:[R&&(0,j.jsx)("li",{className:"p-2 text-center",children:"Searching..."}),P.map(((e,s)=>(0,j.jsx)("li",{onMouseDown:()=>w(e),className:"".concat("item"===t?"p-3":"p-1 px-2","  cursor-pointer"),children:e.title||e.name||e},s)))]}),(0,j.jsxs)("button",{onMouseDown:()=>{switch(t){case"party":z(!0);break;case"item":F(!0);break;case"category":I(!0);break;case"partycategory":v((0,m.L)(!0))}},className:"select__add__button z-50",children:[(0,j.jsx)(n.g7W,{className:"text-lg"}),"Add New",(0,j.jsx)(o.Z0P,{className:"text-[15px]"})]})]})]})})}},88918:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(89379),n=s(1880);const l=()=>({getApiData:async(e,t,s)=>{let l={token:n.A.get("token")};t&&(l=(0,a.A)((0,a.A)({},l),{},{id:t})),s&&(l=(0,a.A)((0,a.A)({},l),{},{barCode:s}));try{const t="https://ezy-bill-api.tisindia.net/api/v1"+"/".concat(e,"/get"),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});return await s.json()}catch(i){return i}}})},12396:(e,t,s)=>{s.r(t),s.d(t,{CategoryComponent:()=>h,default:()=>u});var a=s(89379),n=s(65043),l=s(75206),i=s(86319),r=(s(6839),s(9435)),c=s(35543),d=s(66580),o=s(1880),p=s(53435),x=s(70579);const h=e=>{let{mode:t,save:s}=e;const l=(0,r.A)(),[i,h]=((0,n.useRef)(null),(0,n.useState)({title:"",tax:"",hsn:"",type:"",details:""})),[u,m]=(0,n.useState)([]),{id:j}=(0,d.g)(),g=(0,r.A)(),y=(0,d.Zp)();(0,n.useEffect)((()=>{if(t){(async()=>{const e=o.A.get("token"),t=await fetch("https://ezy-bill-api.tisindia.net/api/v1/category/get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,id:j})}),s=await t.json();h((0,a.A)((0,a.A)({},i),s.data))})()}}),[t]),(0,n.useEffect)((()=>{(async()=>{const e=await fetch("https://ezy-bill-api.tisindia.net/api/v1/tax/get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o.A.get("token")})}),t=(await e.json()).data.map(((e,t)=>{let{_id:s,title:a}=e;return{label:a,value:s}}));m([...t]),console.log(t)})()}),[]);return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"content__body__main bg-white ",children:[(0,x.jsxs)("div",{className:"  flex justify-between  gap-5 flex-col lg:flex-row",children:[(0,x.jsxs)("div",{className:"w-full",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("p",{className:"mb-2",children:["Title ",(0,x.jsx)("span",{className:"required__text",children:"*"})]}),(0,x.jsx)("input",{type:"text",onChange:e=>h((0,a.A)((0,a.A)({},i),{},{title:e.target.value})),value:i.title})]}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("p",{className:"ml-1 mb-2 mt-2",children:["Select Tax ",(0,x.jsx)("span",{className:"required__text",children:"*"})]}),(0,x.jsx)(c.A,{className:"w-full",data:u,onChange:e=>h((0,a.A)((0,a.A)({},i),{},{tax:e})),value:i.tax})]})]}),(0,x.jsxs)("div",{className:"w-full pt-1",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"mb-2 ml-1",children:"HSN/SAC"}),(0,x.jsx)("input",{type:"text",onChange:e=>h((0,a.A)((0,a.A)({},i),{},{hsn:e.target.value})),value:i.hsn})]}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("p",{className:"mb-2 mt-2 ml-1",children:["Type ",(0,x.jsx)("span",{className:"required__text",children:"*"})]}),(0,x.jsxs)("select",{onChange:e=>h((0,a.A)((0,a.A)({},i),{},{type:e.target.value})),value:i.type,children:[(0,x.jsx)("option",{value:"",children:"--select--"}),(0,x.jsx)("option",{value:"Product",children:"Goods"}),(0,x.jsx)("option",{value:"Service",children:"Service"})]})]})]})]}),(0,x.jsxs)("div",{className:"flex justify-center pt-9 mb-6",children:[(0,x.jsxs)("div",{className:"flex rounded-sm bg-green-500 text-white",children:[(0,x.jsx)(p.F.CHECK,{className:"mt-3 ml-2"}),(0,x.jsx)("button",{className:"p-2",onClick:async e=>{if(""===i.title)return l("Title is required","error");if(""===i.tax)return l("Tax is required","error");if(""===i.type)return l("Type is required","error");try{const e="https://ezy-bill-api.tisindia.net/api/v1/category/add",n=o.A.get("token"),l=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t?(0,a.A)((0,a.A)({},i),{},{token:n,update:!0,id:j}):(0,a.A)((0,a.A)({},i),{},{token:n}))}),r=await l.json();return 200!==l.status||r.err?g(r.err,"error"):(t||h({title:"",tax:"",hsn:"",type:"",details:""}),g(t?"Category update success":"Category create success","success"),s?void s(!0):y("/admin/item-category"))}catch(n){return g("Something went wrong","error")}},children:t?"Update":"Save"})]}),(0,x.jsxs)("div",{className:"flex rounded-sm ml-4 bg-blue-500 text-white",children:[(0,x.jsx)(p.F.RESET,{className:"mt-3 ml-2"}),(0,x.jsx)("button",{className:"p-2",onClick:e=>{h({title:"",tax:"",hsn:"",type:"",details:""})},children:"Reset"})]})]})]})})},u=e=>{let{mode:t}=e;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(l.A,{title:t?"Update Category":"Add Category"}),(0,x.jsxs)("main",{id:"main",children:[(0,x.jsx)(i.A,{}),(0,x.jsx)("div",{className:"content__body",children:(0,x.jsx)(h,{mode:t})})]})]})}},23930:(e,t,s)=>{s.r(t),s.d(t,{AddItemComponent:()=>m,default:()=>j});var a=s(89379),n=s(65043),l=s(75206),i=s(86319),r=s(9435),c=s(35543),d=s(1880),o=s(66580),p=s(88918),x=s(89771),h=s(53435),u=s(70579);const m=e=>{let{mode:t,save:s,getRes:l}=e;const i=(0,r.A)(),{getApiData:m}=(0,p.A)(),[j,g]=(0,n.useState)({title:"",type:"goods",salePrice:"",category:"",details:"",hsn:"",tax:"",purchasePrice:"",purchaseTaxType:"1",saleTaxType:"1",itemCode:""}),{id:y}=(0,o.g)(),[v,A]=(0,n.useState)([]),[f,b]=(0,n.useState)([]),[N,w]=(0,n.useState)([]),[C,S]=(0,n.useState)([]),T={unit:"",conversion:"1",opening:"",alert:""},[_,P]=(0,n.useState)([T]),k=(0,o.Zp)();(0,n.useEffect)((()=>{if(t){(async()=>{var e;const t=d.A.get("token"),s=await fetch("https://ezy-bill-api.tisindia.net/api/v1/item/get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,id:y})}),a=(await s.json()).data;g({title:a.title,type:a.type,salePrice:a.salePrice,category:null===(e=a.category)||void 0===e?void 0:e._id,details:a.details,hsn:a.hsn,tax:null===a||void 0===a?void 0:a.tax,purchasePrice:a.purchasePrice,purchaseTaxType:a.purchaseTaxType,saleTaxType:a.saleTaxType,itemCode:a.itemCode}),P([...a.unit])})()}}),[t]),(0,n.useEffect)((()=>{(async()=>{{const{data:e}=await m("category");A([...e.map(((e,t)=>{let{_id:s,title:a}=e;return{value:s,label:a}}))]),S([...e])}{const{data:e}=await m("tax");b([...e.map(((e,t)=>{let{_id:s,title:a}=e;return{label:a,value:s}}))])}{const{data:e}=await m("unit");w([...e.map(((e,t)=>{let{_id:s,title:a}=e;return{label:a,value:s}}))])}})()}),[]);const O=()=>{g({title:"",type:"",salePrice:"",category:"",details:"",hsn:""}),P([T])};return(0,u.jsxs)("div",{className:"content__body__main bg-white",children:[(0,u.jsxs)("div",{className:"  flex justify-between gap-5 flex-col lg:flex-row",children:[(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("p",{className:"mb-1",children:["Item Name ",(0,u.jsx)("span",{className:"required__text",children:"*"})]}),(0,u.jsx)("input",{type:"text",placeholder:"ex: Paracetamol-500mg",onChange:e=>g((0,a.A)((0,a.A)({},j),{},{title:e.target.value})),value:j.title})]}),(0,u.jsxs)("div",{className:"w-full flex-col md:flex-row flex items-center gap-2 mt-3",children:[(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsxs)("p",{className:"mb-1",children:["Sale Price ",(0,u.jsx)("span",{className:"required__text",children:"*"})]}),(0,u.jsx)("input",{type:"text",onChange:e=>g((0,a.A)((0,a.A)({},j),{},{salePrice:e.target.value})),value:j.salePrice})]}),(0,u.jsx)("div",{className:"w-full mt-[20px]",children:(0,u.jsxs)("select",{value:"1",onChange:e=>g((0,a.A)((0,a.A)({},j),{},{saleTaxType:e.target.value})),children:[(0,u.jsx)("option",{value:"1",children:"With Tax"}),(0,u.jsx)("option",{value:"0",children:"Without Tax"})]})})]}),(0,u.jsxs)("div",{className:"mt-3",children:[(0,u.jsx)("p",{className:"ml-1 mb-1",children:"GST Tax (%)"}),(0,u.jsx)(c.A,{className:"w-full",data:f,onChange:e=>g((0,a.A)((0,a.A)({},j),{},{tax:e})),value:j.tax})]})]}),(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsxs)("div",{className:"w-full flex-col md:flex-row flex items-center gap-3",children:[(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsx)("p",{className:"mb-1 ml-1",children:"Item Type"}),(0,u.jsxs)("select",{onChange:e=>g((0,a.A)((0,a.A)({},j),{},{type:e.target.value})),value:j.type,children:[(0,u.jsx)("option",{value:"",children:"Select"}),(0,u.jsx)("option",{value:"goods",children:"Goods"}),(0,u.jsx)("option",{value:"service",children:"Service"})]})]}),(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsx)("p",{className:"ml-1 mb-1",children:"Select Category"}),(0,u.jsx)(x.A,{model:"category",onType:e=>{console.log(e),g((0,a.A)((0,a.A)({},j),{},{category:e}))},value:j.category})]})]}),(0,u.jsxs)("div",{className:"w-full flex-col md:flex-row flex items-center gap-3",children:[(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsxs)("p",{className:"mt-2 mb-1",children:["Purchase Price ",(0,u.jsx)("span",{className:"required__text",children:"*"})]}),(0,u.jsx)("input",{type:"text",onChange:e=>g((0,a.A)((0,a.A)({},j),{},{purchasePrice:e.target.value})),value:j.purchasePrice})]}),(0,u.jsx)("div",{className:"w-full mt-[28px]",children:(0,u.jsxs)("select",{value:"1",onChange:e=>g((0,a.A)((0,a.A)({},j),{},{purchaseTaxType:e.target.value})),children:[(0,u.jsx)("option",{value:"1",children:"With Tax"}),(0,u.jsx)("option",{value:"0",children:"Without Tax"})]})})]}),(0,u.jsxs)("div",{className:"w-full flex-col md:flex-row flex items-center gap-3 mt-3",children:[(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsx)("p",{className:"mb-1 ml-1",children:"HSN/SAC"}),(0,u.jsx)("input",{type:"text",onChange:e=>g((0,a.A)((0,a.A)({},j),{},{hsn:e.target.value})),value:j.hsn})]}),(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("p",{className:"mb-1",children:"Item Code"}),(0,u.jsx)("button",{onClick:()=>{const e=Date.now()+Math.floor(9e3*Math.random()+1e3);g((0,a.A)((0,a.A)({},j),{},{itemCode:e.toString()}))},className:"text-blue-500 text-xs"+(t?"cursor-not-allowed opacity-50":" cursor-pointer"),disabled:!!t,children:"Generate Barcode"})]}),(0,u.jsx)("input",{type:"text",placeholder:"Barcode Number",value:j.itemCode})]})]})]})]}),(0,u.jsx)("div",{className:"w-full overflow-auto mt-4",children:(0,u.jsxs)("table",{className:"w-full border",children:[(0,u.jsx)("thead",{className:"bg-gray-200",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-1",children:"Unit"}),(0,u.jsx)("th",{children:"Conversion (1 for 1st Unit)"}),(0,u.jsx)("th",{children:"Opening"}),(0,u.jsx)("th",{children:"Alert"}),(0,u.jsx)("th",{align:"center",children:"Action"})]})}),(0,u.jsx)("tbody",{children:_.map(((e,t)=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"p-1",children:(0,u.jsxs)("select",{onChange:e=>{const s=[..._];s[t].unit=e.target.value,P(s)},value:e.unit,children:[(0,u.jsx)("option",{value:"",children:"Select"}),N.map(((e,t)=>(0,u.jsx)("option",{value:e.label,children:e.label},t)))]})}),(0,u.jsx)("td",{className:"p-1",children:(0,u.jsxs)("div",{className:"flex items-center",children:[0!==t&&(0,u.jsxs)("p",{className:"text-gray-500 text-xs flex items-center gap-1 mr-2",children:["1 ",(0,u.jsx)("sub",{children:_[t-1].unit})," \u2716"]}),(0,u.jsx)("input",{type:"text",onChange:0===t?null:e=>{const s=[..._];s[t].conversion=e.target.value,P(s)},value:e.conversion,disabled:0===t})]})}),(0,u.jsx)("td",{className:"p-1",children:(0,u.jsx)("input",{type:"text",onChange:e=>{const s=[..._];s[t].opening=e.target.value,P(s)},value:e.opening})}),(0,u.jsx)("td",{className:"p-1",children:(0,u.jsx)("input",{type:"text",onChange:e=>{const s=[..._];s[t].alert=e.target.value,P(s)},value:e.alert})}),(0,u.jsx)("td",{align:"center",className:"p-1",children:0!==t&&(0,u.jsx)("div",{className:"delete__icon",children:(0,u.jsx)(h.F.DELETE,{className:"cursor-pointer text-[16px]",onClick:()=>{if(1===_.length)return;const e=[..._];e.splice(t,1),P(e)}})})})]},t)))}),(0,u.jsx)("tfoot",{children:(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:5,children:(0,u.jsxs)("button",{className:"w-full p-[5px] font-bold bg-gray-200 text-gray-800 flex justify-center items-center active:bg-gray-300",onClick:()=>P([..._,T]),children:[(0,u.jsx)(h.F.ADD_LIST,{}),"  Add"]})})})})]})}),(0,u.jsxs)("div",{className:"flex gap-4 justify-center mt-3",children:[(0,u.jsxs)("button",{onClick:async e=>{if(""===j.title)return i("Item name can't be blank","error");if(""===j.salePrice)return i("Sale Price can't be blank","error");try{const e="https://ezy-bill-api.tisindia.net/api/v1/item/add",n=d.A.get("token"),r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t?(0,a.A)((0,a.A)({},j),{},{token:n,unit:_,update:!0,id:y}):(0,a.A)((0,a.A)({},j),{},{token:n,unit:_}))}),c=await r.json();return 200!==r.status||c.err?i(c.err,"error"):(t||O(),l&&l(c),i(t?"Item update success":"Item create success","success"),s?void s(!0):k("/admin/item"))}catch(n){return console.log(n),i("Something went wrong","error")}},className:"flex items-center rounded-sm bg-green-500 text-white p-2 gap-2",children:[(0,u.jsx)(h.F.CHECK,{}),t?"Update":"Save"]}),(0,u.jsxs)("button",{className:"flex items-center rounded-sm bg-blue-500 text-white p-2  gap-2",onClick:O,children:[(0,u.jsx)(h.F.RESET,{}),"Reset"]})]})]})},j=e=>{let{mode:t}=e;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.A,{title:t?"Update Item ":"Add Item"}),(0,u.jsxs)("main",{id:"main",children:[(0,u.jsx)(i.A,{}),(0,u.jsx)("div",{className:"content__body",children:(0,u.jsx)(m,{mode:t})})]})]})}},89621:(e,t,s)=>{s.r(t),s.d(t,{PartyComponent:()=>h,default:()=>u});var a=s(89379),n=s(65043),l=s(75206),i=s(86319),r=s(9435),c=s(1880),d=s(66580),o=s(89771),p=s(53435),x=s(70579);const h=e=>{let{mode:t,save:s,getRes:l}=e;const{id:i}=(0,d.g)(),h=(0,r.A)(),[u,m]=(0,n.useState)({name:"",type:"customer",contactNumber:"",billingAddress:"",shippingAddress:"",pan:"",gst:"",openingBalance:"0",details:"",email:"",partyCategory:"",creditPeriod:"",creditLimit:"",dob:"",partyCategory:""}),j=(0,d.Zp)();(0,n.useEffect)((()=>{if(t){(async()=>{const e=c.A.get("token"),t=await fetch("https://ezy-bill-api.tisindia.net/api/v1/party/get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,id:i})}),s=await t.json();console.log(s),m((0,a.A)((0,a.A)({},u),s.data))})()}}),[t]);const g=()=>{m({name:"",type:"customer",contactNumber:"",address:"",pan:"",gst:"",country:"",state:"",openingBalance:"0",details:"",email:"",billingAddress:"",shippingAddress:"",creditPeriod:"",creditLimit:"",dob:"",partyCategory:""})};return(0,x.jsxs)("div",{className:"content__body__main ",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 lg:gap-4 gap-0",children:[(0,x.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("p",{className:"mb-1",children:["Party Name ",(0,x.jsx)("span",{className:"required__text",children:"*"})]}),(0,x.jsx)("input",{type:"text",onChange:e=>m((0,a.A)((0,a.A)({},u),{},{name:e.target.value})),value:u.name})]}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("p",{className:"mb-1",children:["Contact Number ",(0,x.jsx)("span",{className:"required__text",children:"*"})]}),(0,x.jsx)("input",{type:"text",onChange:e=>m((0,a.A)((0,a.A)({},u),{},{contactNumber:e.target.value})),value:u.contactNumber})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"mb-1",children:"Party Type"}),(0,x.jsxs)("select",{onChange:e=>m((0,a.A)((0,a.A)({},u),{},{type:e.target.value})),value:u.type,children:[(0,x.jsx)("option",{value:"none",children:"--Select--"}),(0,x.jsx)("option",{value:"customer",children:"Customer"}),(0,x.jsx)("option",{value:"supplier",children:"Supplier"}),(0,x.jsx)("option",{value:"both",children:"Both"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"mb-1",children:"Credit Period "}),(0,x.jsx)("input",{type:"text",onChange:e=>m((0,a.A)((0,a.A)({},u),{},{creditPeriod:e.target.value})),value:u.creditPeriod})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"mb-1",children:"Party Category "}),(0,x.jsx)(o.A,{model:"partycategory",onType:e=>m((0,a.A)((0,a.A)({},u),{},{partyCategory:e})),value:u.partyCategory})]}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("p",{className:"mb-1",children:["Billing Address ",(0,x.jsx)("span",{className:"required__text",children:"*"})]}),(0,x.jsx)("textarea",{rows:3,value:u.billingAddress,onChange:e=>m((0,a.A)((0,a.A)({},u),{},{billingAddress:e.target.value}))})]})]}),(0,x.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,x.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 items-center w-full",children:[(0,x.jsxs)("div",{className:"w-full",children:[(0,x.jsx)("p",{className:"mb-1",children:"PAN"}),(0,x.jsx)("input",{type:"text",onChange:e=>m((0,a.A)((0,a.A)({},u),{},{pan:e.target.value.toUpperCase()})),value:u.pan.toUpperCase()})]}),(0,x.jsxs)("div",{className:"w-full",children:[(0,x.jsx)("p",{className:"mb-1",children:"GST Number"}),(0,x.jsx)("input",{type:"text",onChange:e=>m((0,a.A)((0,a.A)({},u),{},{gst:e.target.value.toUpperCase()})),value:u.gst.toUpperCase()})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"mb-1",children:"Email"}),(0,x.jsx)("input",{type:"email",onChange:e=>m((0,a.A)((0,a.A)({},u),{},{email:e.target.value})),value:u.email})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"mb-1",children:"Opening Balance"}),(0,x.jsx)("input",{type:"text",onChange:e=>m((0,a.A)((0,a.A)({},u),{},{openingBalance:e.target.value})),value:u.openingBalance})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"mb-1",children:"Credit Limit"}),(0,x.jsx)("input",{type:"text",onChange:e=>m((0,a.A)((0,a.A)({},u),{},{creditLimit:e.target.value})),value:u.creditLimit})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"mb-1",children:"DOB"}),(0,x.jsx)("input",{type:"date",onChange:e=>m((0,a.A)((0,a.A)({},u),{},{dob:e.target.value})),value:u.dob?new Date(u.dob).toISOString().split("T")[0]:""})]}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"mb-1 mt-1 flex items-center",children:[(0,x.jsx)("p",{children:"Shipping Address"}),(0,x.jsx)("input",{type:"checkbox",className:"ml-2",onChange:e=>{e.target.checked?m((0,a.A)((0,a.A)({},u),{},{shippingAddress:u.billingAddress})):m((0,a.A)((0,a.A)({},u),{},{shippingAddress:""}))}}),(0,x.jsx)("sub",{className:"ml-1",children:"Same as billing address"})]}),(0,x.jsx)("textarea",{rows:3,value:u.shippingAddress,onChange:e=>m((0,a.A)((0,a.A)({},u),{},{shippingAddress:e.target.value}))})]})]})]}),(0,x.jsxs)("div",{className:"w-full flex justify-center gap-3 mt-5 my-3",children:[(0,x.jsxs)("button",{onClick:async()=>{if(""===u.name)return h("Name is required","error");if(""===u.contactNumber)return h("Contact Number is required","error");try{const e="https://ezy-bill-api.tisindia.net/api/v1/party/add",n=c.A.get("token"),r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t?(0,a.A)((0,a.A)({},u),{},{token:n,update:!0,id:i}):(0,a.A)((0,a.A)({},u),{},{token:n}))}),d=await r.json();return 200!==r.status||d.err?h(d.err,"error"):(t||g(),l&&l(d),h(t?"Party update success":"Party create success","success"),s?void s(!0):j("/admin/party"))}catch(e){return console.log(e),h("Something went wrong","error")}},className:"bg-green-500 hover:bg-green-400 text-md text-white rounded w-[90px] flex items-center justify-center gap-1 py-2",children:[(0,x.jsx)(p.F.CHECK,{}),t?"Update":"Save"]}),(0,x.jsxs)("button",{onClick:g,className:"bg-blue-800 hover:bg-blue-700 text-md text-white rounded w-[90px] flex items-center justify-center gap-1 py-2",children:[(0,x.jsx)(p.F.RESET,{}),"Reset"]})]})]})},u=e=>{let{mode:t}=e;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(l.A,{title:t?"Update Party":"Add Party"}),(0,x.jsxs)("main",{id:"main",children:[(0,x.jsx)(i.A,{}),(0,x.jsx)("div",{className:"content__body",children:(0,x.jsx)(h,{mode:t})})]})]})}}}]);
//# sourceMappingURL=9771.da367d67.chunk.js.map