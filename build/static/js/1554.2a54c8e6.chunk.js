"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[1554],{81444:(e,t,i)=>{i.d(t,{A:()=>h});var s=i(89379),l=i(65043),n=i(83003),a=i(75105),d=i(48304),c=i(27528),r=i(26156),o=i(53435),x=i(78283),m=i(70579);const h=e=>{var t;let{data:i}=e;const h=(0,n.wA)(),p=(0,n.d4)((e=>e.barcodeModal.show)),[u,j]=(0,l.useState)({enabled:!1,itemCode:!0,itemName:!0,itemPrice:!0,numberOfPrint:1});return(0,m.jsxs)(a.A,{size:"xs",open:p,onClose:()=>{h((0,x.M)(!1)),j((0,s.A)((0,s.A)({},u),{},{enabled:!1}))},children:[(0,m.jsx)(a.A.Header,{children:(0,m.jsxs)("div",{className:"w-full pr-2 flex items-center justify-between",children:[(0,m.jsx)("p",{className:"font-semibold",children:"View Barcode"}),(0,m.jsx)(o.F.SETTING,{className:"cursor-pointer transition-all"+(u.enabled?" rotate-90":""),onClick:()=>{j((0,s.A)((0,s.A)({},u),{},{enabled:!u.enabled}))}})]})}),(0,m.jsxs)(a.A.Body,{children:[(0,m.jsxs)("div",{className:"flex flex-col items-center justify-center w-[95%] p-2 rounded bg-white mx-auto",children:[(0,m.jsx)("img",{className:"h-[30px] w-[120px]",src:"https://api-bwipjs.metafloor.com/?bcid=code128&text=".concat(null===i||void 0===i?void 0:i.itemCode),alt:"Barcode"}),u.itemCode&&(0,m.jsx)("label",{className:"text-[10px]",children:null===i||void 0===i?void 0:i.itemCode}),u.itemName&&(0,m.jsx)("label",{className:"text-[10px]",children:null===i||void 0===i||null===(t=i.title)||void 0===t?void 0:t.slice(0,10)}),u.itemPrice&&(0,m.jsxs)("label",{className:"text-[10px]",children:["Price: ",parseFloat(null===i||void 0===i?void 0:i.salePrice).toFixed(2)]})]}),(0,m.jsxs)("div",{className:"w-[95%] mt-4 px-2 flex items-center justify-between",children:[(0,m.jsx)("p",{className:"text-[11px]",children:"Number of barcode you want to print"}),(0,m.jsxs)(d.A,{size:"sm",style:{width:"100px"},children:[(0,m.jsx)(d.A.Addon,{className:"cursor-pointer",onClick:()=>{u.numberOfPrint>1&&j((0,s.A)((0,s.A)({},u),{},{numberOfPrint:u.numberOfPrint-1}))},children:"-"}),(0,m.jsx)(c.A,{onChange:e=>{e<1&&(e=1),j((0,s.A)((0,s.A)({},u),{},{numberOfPrint:e}))},value:u.numberOfPrint}),(0,m.jsx)(d.A.Addon,{className:"cursor-pointer",onClick:()=>{j((0,s.A)((0,s.A)({},u),{},{numberOfPrint:u.numberOfPrint+1}))},children:"+"})]})]}),u.enabled&&(0,m.jsxs)("div",{className:"mx-auto w-[95%] mt-4 p-1 flex flex-col text-xs",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between border-b pb-1",children:[(0,m.jsx)("p",{children:"Show item code"}),(0,m.jsx)(r.A,{size:"sm",checked:u.itemCode,onChange:e=>j((0,s.A)((0,s.A)({},u),{},{itemCode:e}))})]}),(0,m.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,m.jsx)("p",{children:"Show item name"}),(0,m.jsx)(r.A,{size:"sm",checked:u.itemName,onChange:e=>j((0,s.A)((0,s.A)({},u),{},{itemName:e}))})]}),(0,m.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,m.jsx)("p",{children:"Show item price"}),(0,m.jsx)(r.A,{size:"sm",checked:u.itemPrice,onChange:e=>j((0,s.A)((0,s.A)({},u),{},{itemPrice:e}))})]})]})]}),(0,m.jsx)(a.A.Footer,{children:(0,m.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,m.jsxs)("button",{className:"justify-center text-xs flex w-full items-center gap-1 border border-gray-300 hover:border-blue-300 px-2 py-1 rounded",onClick:async()=>{const e=new Image;e.crossOrigin="anonymous",e.src="https://api-bwipjs.metafloor.com/?bcid=code128&text=".concat(null===i||void 0===i?void 0:i.itemCode),e.onload=()=>{const t=document.createElement("canvas");t.width=250,t.height=100;const s=t.getContext("2d");s.fillStyle="#FFFFFF",s.fillRect(0,0,t.width,t.height),s.drawImage(e,90,10,120,40);let l=60;u.itemCode&&(s.font="12px sans-serif",s.fillStyle="#000",s.fillText((null===i||void 0===i?void 0:i.itemCode)||"",110,l),l+=15),u.itemName&&(s.font="12px sans-serif",s.fillText(((null===i||void 0===i?void 0:i.title)||"").slice(0,10),110,l),l+=15),u.itemPrice&&(s.font="12px sans-serif",s.fillText("Price: ".concat(parseFloat((null===i||void 0===i?void 0:i.salePrice)||0).toFixed(2)),100,l));const n=document.createElement("a");n.download="".concat((null===i||void 0===i?void 0:i.itemCode)||"barcode",".png"),n.href=t.toDataURL("image/png"),n.click()}},children:["DOWNLOAD",(0,m.jsx)(o.F.DOWNLOAD,{})]}),(0,m.jsxs)("button",{className:"justify-center text-xs flex w-full items-center gap-1 bg-blue-400 hover:bg-blue-500 text-white px-2 py-1 rounded",onClick:()=>{let e='\n    <div style="display: flex; flex-wrap: wrap; gap: 10px; padding: 10px;">\n  ';for(let t=0;t<u.numberOfPrint;t++)e+='\n      <div style="display: flex; flex-direction: column; align-items: center; width: 140px; border: 1px solid #ddd; padding: 4px;">\n        <img style="height:30px; width:120px"\n          src="https://api-bwipjs.metafloor.com/?bcid=code128&text='.concat((null===i||void 0===i?void 0:i.itemCode)||"",'"\n        />\n\n        ').concat(u.itemCode?'\n          <label style="font-size:10px">'.concat(null===i||void 0===i?void 0:i.itemCode,"</label>\n        "):"","\n\n        ").concat(u.itemName?'\n          <label style="font-size:10px">'.concat(((null===i||void 0===i?void 0:i.title)||"").slice(0,10),"</label>\n        "):"","\n\n        ").concat(u.itemPrice?'\n          <label style="font-size:10px">Price: '.concat(parseFloat((null===i||void 0===i?void 0:i.salePrice)||0).toFixed(2),"</label>\n        "):"","\n      </div>\n    ");e+="</div>",document.body.innerHTML=e,window.print(),window.location.reload()},children:["PRINT",(0,m.jsx)(o.F.PRINTER,{})]})]})})]})}},88918:(e,t,i)=>{i.d(t,{A:()=>n});var s=i(89379),l=i(1880);const n=()=>({getApiData:async(e,t,i)=>{let n={token:l.A.get("token")};t&&(n=(0,s.A)((0,s.A)({},n),{},{id:t})),i&&(n=(0,s.A)((0,s.A)({},n),{},{barCode:i}));try{const t="https://ezy-bill-api.tisindia.net/api/v1"+"/".concat(e,"/get"),i=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return await i.json()}catch(a){return a}}})},1554:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var s=i(75206),l=i(86319),n=i(88918),a=i(81444),d=i(66580),c=i(65043),r=i(83003),o=i(78283),x=i(53435),m=i(9435),h=i(1880),p=i(70579);const u=()=>{var e;const t=(0,m.A)(),i=(0,r.wA)(),u=(0,d.Zp)(),{id:j}=(0,d.g)(),[v,f]=(0,c.useState)(),{getApiData:b}=(0,n.A)(),[y,g]=(0,c.useState)(),[N,w]=(0,c.useState)([]),[A,C]=(0,c.useState)(!1),P=(0,r.d4)((e=>e.userDetail)),[T,S]=(0,c.useState)(null);(0,c.useEffect)((()=>{var e;const t=null===P||void 0===P?void 0:P.activeCompany,i=null===P||void 0===P||null===(e=P.companies)||void 0===e?void 0:e.find((e=>e._id===t));S(parseInt(null===i||void 0===i?void 0:i.expireReminder))}),[P]),(0,c.useEffect)((()=>{(async e=>{const t=await b("item",j),i=await b("tax",null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.tax);g(i.data.title),f(t.data)})()}),[]),(0,c.useEffect)((()=>{(async()=>{C(!0);try{const e={token:h.A.get("token"),itemId:j},t="https://ezy-bill-api.tisindia.net/api/v1/item/get-purchase-invoice",i=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await i.json();C(!1),200===i.status&&w(s)}catch(e){return console.log(e),C(!1),t("Something went wrong","error")}})()}),[]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.A,{title:"Item Details"}),(0,p.jsx)(a.A,{data:v}),(0,p.jsxs)("main",{id:"main",children:[(0,p.jsx)(l.A,{}),(0,p.jsxs)("div",{className:"content__body flex flex-col",children:[(0,p.jsxs)("div",{className:"content__body__main",children:[(0,p.jsxs)("div",{className:"details__header",children:[(0,p.jsxs)("p",{children:[(0,p.jsx)(x.F.INVOICE,{})," General Details"]}),(0,p.jsx)(x.F.PENCIL,{onClick:()=>u("/admin/item/edit/".concat(j)),className:"pencil"})]}),(0,p.jsx)("hr",{}),(0,p.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 pl-4",children:[(0,p.jsxs)("div",{className:"flex flex-col text-xs w-full gap-5",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-600 text-sm",children:"Item name"}),(0,p.jsx)("p",{children:null===v||void 0===v?void 0:v.title})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-600 text-sm",children:"GST Tax (%)"}),(0,p.jsx)("p",{children:y})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-600 text-sm",children:"Sale Price"}),(0,p.jsxs)("p",{children:[(null===v||void 0===v?void 0:v.salePrice)||"--",(0,p.jsx)("sub",{children:"0"===(null===v||void 0===v?void 0:v.saleTaxType)?" Without Tax":" With Tax"})]})]})]}),(0,p.jsxs)("div",{className:"flex flex-col text-xs w-full gap-5",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-600 text-sm",children:"Type"}),(0,p.jsx)("p",{children:(null===v||void 0===v?void 0:v.type)||"--"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-600 text-sm",children:"HSN"}),(0,p.jsx)("p",{children:(null===v||void 0===v?void 0:v.hsn)||"--"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-600 text-sm",children:"Purchase Price"}),(0,p.jsxs)("p",{children:[(null===v||void 0===v?void 0:v.purchasePrice)||"--",(0,p.jsx)("sub",{children:"0"===(null===v||void 0===v?void 0:v.purchaseTaxType)?" Without Tax":" With Tax"})]})]})]}),(0,p.jsxs)("div",{className:"flex flex-col text-xs w-full gap-5",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-600 text-sm",children:"Category"}),(0,p.jsx)("p",{children:(null===v||void 0===v||null===(e=v.category)||void 0===e?void 0:e.title)||"--"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-600 text-sm",children:"Item Code"}),(0,p.jsx)("p",{children:(null===v||void 0===v?void 0:v.itemCode)||"--"})]}),(0,p.jsx)("div",{children:(null===v||void 0===v?void 0:v.itemCode)&&(0,p.jsx)("button",{className:"bg-blue-500 hover:bg-blue-600 uppercase px-3 py-1 rounded-full text-white text-xs",onClick:()=>{i((0,o.M)(!0))},children:"View Barcode"})})]})]})]}),(0,p.jsxs)("div",{className:"content__body__main mt-4",children:[(0,p.jsx)("div",{className:"details__header",children:(0,p.jsxs)("p",{children:[(0,p.jsx)(x.F.INVOICE,{})," Item's Purchase Bill "]})}),(0,p.jsx)("hr",{}),(0,p.jsx)("div",{className:"item__details__table",children:(0,p.jsxs)("table",{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Invoice No."}),(0,p.jsx)("td",{children:"Invoice Date"}),(0,p.jsx)("td",{children:"Expire Date"}),(0,p.jsx)("td",{align:"center",children:"Qun Left"})]})}),(0,p.jsxs)("tbody",{children:[N.map(((e,t)=>{const i=e.items.find((e=>e.itemId===j)),s=(e=>{const t=new Date,i=new Date(e);t.setHours(0,0,0,0),i.setHours(0,0,0,0);const s=i-t,l=Math.round(s/864e5);let n="";return n=0===l?"Today":l<0?"Expired":"".concat(l," days"),{status:n,days:l}})(i.expireDate.split("T")[0]);return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:e.purchaseInvoiceNumber}),(0,p.jsx)("td",{children:e.invoiceDate.split("T")[0]}),(0,p.jsxs)("td",{children:[i.expireDate.split("T")[0],(0,p.jsx)("span",{className:"".concat(s.days<0?"bg-red-600":s.days<=T?"bg-yellow-600":"bg-blue-400"," badge ml-2"),children:s.status})]}),(0,p.jsxs)("td",{align:"center",children:[i.qunLeft," ",(0,p.jsx)("sub",{children:i.selectedUnit})]})]},t)})),A?(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:4,align:"center",className:"text-[14px] text-blue-400 uppercase",children:"Loading..."})}):N.length<1&&(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:4,align:"center",className:"text-[15px] text-gray-400 uppercase",children:"No Invoice found"})})]})]})})]})]})]})]})}}}]);
//# sourceMappingURL=1554.2a54c8e6.chunk.js.map