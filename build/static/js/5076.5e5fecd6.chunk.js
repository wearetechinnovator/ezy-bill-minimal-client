(self.webpackChunkclient=self.webpackChunkclient||[]).push([[5076],{85623:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});s(65043);const n=s.p+"static/media/norecord.048751373b74c78a9b0413a800412fa9.svg";var l=s(66580),a=s(70579);const r=e=>{let{title:t,link:s}=e;const r=(0,l.Zp)();return(0,a.jsx)("div",{className:"add_new_compnent",children:(0,a.jsxs)("div",{className:"w-full bg-white rounded shadow-sm p-4 grid place-items-center",children:[(0,a.jsx)("img",{src:n,alt:"",srcset:""}),(0,a.jsxs)("p",{className:"mb-3 text-lg text-gray-400",children:["You don't have any ",t]}),(0,a.jsxs)("button",{onClick:()=>{r(s)},className:"bg-[#003E32] text-white mb-2",children:["Add ",t]})]})})}},80138:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});s(65043);var n=s(70579);const l=()=>(0,n.jsx)("div",{className:"shimmer__parent",children:(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"flex flex-col gap-2",children:Array.from({length:8}).map(((e,t)=>(0,n.jsx)("div",{className:"animate w-full h-[20px] rounded"},e)))})})})},69577:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var n=s(75105),l=s(53435),a=s(83003),r=s(27882),c=s(70579);const o=e=>{let{title:t,onYesFunc:s}=e;const o=(0,a.wA)(),i=(0,a.d4)((e=>e.deleteModal.show));return(0,c.jsxs)(n.A,{open:i,size:"xs",onClose:()=>o((0,r.Y)(!1)),children:[(0,c.jsxs)(n.A.Header,{className:"pb-2",children:[(0,c.jsxs)("p",{className:"flex items-center gap-1",children:[(0,c.jsx)(l.F.DELETE,{className:"bg-red-400 rounded-full w-[17px] h-[17px] text-white p-[2px]"}),(0,c.jsxs)("span",{className:"text-xs",children:["Delete ",t]})]}),(0,c.jsx)(n.A.Title,{})]}),(0,c.jsx)(n.A.Body,{children:(0,c.jsxs)("div",{className:"flex flex-col items-center justify-center text-center",children:[(0,c.jsx)(l.F.DELETE,{className:"text-2xl text-red-400 "}),(0,c.jsx)("p",{className:"text-xl mt-2 font-semibold",children:"Are You Sure?"}),(0,c.jsx)("p",{className:"mt-6 text-xs",children:"Do you really want to delete these records? This process cannot be undone."})]})}),(0,c.jsx)(n.A.Footer,{children:(0,c.jsxs)("div",{className:"w-full flex gap-2 items-center mt-6",children:[(0,c.jsx)("button",{onClick:()=>o((0,r.Y)(!1)),className:"w-full bg-red-300 hover:bg-red-200 text-white rounded p-2",children:"No"}),(0,c.jsx)("button",{onClick:()=>{s(),o((0,r.Y)(!1))},className:"w-full bg-red-500 hover:bg-red-400 text-white rounded p-2",children:"Yes"})]})})]})}},36615:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var n=s(64363);const l=async e=>{let t="";try{const s=await(0,n.x8)(e).toBlob();t=URL.createObjectURL(s);const l=await fetch(t),a=await l.blob(),r=window.URL.createObjectURL(a),c=document.createElement("a");c.href=r,c.download="data-".concat(Date.now(),".pdf"),c.click()}catch(s){console.error("Error in download process:",s)}finally{t&&URL.revokeObjectURL(t)}}},63744:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var n=s(11238),l=s(64363),a=s(9435),r=s(70579);const c=()=>{const e=(0,a.A)();return{copyTable:async e=>{const t=document.querySelector("#"+e);if(!t)return void console.error("Table with id ".concat(e," not found."));try{const e=document.createElement("textarea");e.value=(e=>{let t="";return e.querySelectorAll("tr").forEach((e=>{const s=e.querySelectorAll("th, td");s.forEach(((e,n)=>{t+=e.textContent.trim(),n<s.length-1&&(t+="\t")})),t+="\n"})),t})(t),document.body.appendChild(e),e.select(),e.setSelectionRange(0,99999),await navigator.clipboard.writeText(e.value),console.log("Table copied to clipboard."),document.body.removeChild(e)}catch(s){console.error("Failed to copy table:",s)}},downloadExcel:(t,s)=>{try{const e=n.Wp.book_new(),l=n.Wp.json_to_sheet(t);n.Wp.book_append_sheet(e,l,"Data"),n._h(e,s)}catch(l){e("Download faild! "+l,"error")}},printTable:(e,t)=>{const s=e.current.outerHTML,n=window.open("","_blank","width=800,height=600");n.document.write("\n      <html>\n        <head>\n          <title>".concat(t,"</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              padding: 20px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n            }\n            th, td {\n              border: 1px solid gray;\n              padding: 8px;\n              text-align: left;\n            }\n          </style>\n        </head>\n        <body>\n          <h3>").concat(t,"</h3>\n          ").concat(s,"\n        </body>\n      </html>\n    ")),n.document.close(),n.focus(),n.print(),n.close()},exportPdf:(e,t)=>{console.log("exprot hook",t);const s=l.vv.create({page:{padding:20,backgroundColor:"#fff"},header:{marginBottom:20,textAlign:"center"},table:{display:"flex",flexDirection:"column",borderWidth:1,borderColor:"#ddd",borderRadius:4,overflow:"hidden"},row:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#ddd"},headerRow:{backgroundColor:"#3B82F6"},cell:{flex:1,padding:5,textAlign:"center",borderRightWidth:1,borderRightColor:"#ddd",fontSize:10},headerCell:{color:"white",fontWeight:"bold"}});try{const n=t&&t[0];return(0,r.jsx)(l.yo,{children:(0,r.jsxs)(l.YW,{size:"A4",style:s.page,children:[(0,r.jsx)(l.Ss,{style:s.header,children:(0,r.jsx)(l.EY,{children:e})}),(0,r.jsxs)(l.Ss,{style:s.table,children:[(0,r.jsx)(l.Ss,{style:[s.row,s.headerRow],children:n&&Object.keys(n).map(((e,t)=>(0,r.jsx)(l.EY,{style:[s.cell,s.headerCell],children:e},t)))}),t&&t.map(((e,t)=>(0,r.jsx)(l.Ss,{style:s.row,children:Object.keys(e).map(((t,n)=>(0,r.jsx)(l.EY,{style:s.cell,children:e[t]},n)))},t)))]})]})})}catch(n){console.log(n)}}}}},14960:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var n=s(65043),l=s(75206),a=s(86319),r=s(96685),c=s(96074),o=s(66580),i=s(63744),d=s(9435),x=s(1880),h=s(36615),m=s(80138),p=s(39532),u=s(85623),b=s(53435),j=s(83003),y=s(27882),g=s(69577),f=s(70579);document.title="Payment in";const w=()=>{const e=(0,d.A)(),t=(0,j.wA)(),{copyTable:s,downloadExcel:w,printTable:N,exportPdf:v}=(0,i.A)(),[_,A]=(0,n.useState)(1),[k,E]=(0,n.useState)(10),[C,D]=(0,n.useState)(),[S,P]=(0,n.useState)([]),R=(0,o.Zp)(),[T,F]=(0,n.useState)([]),L=(0,n.useRef)(null),[I,O]=(0,n.useState)("active"),Y=(0,n.useMemo)((()=>T&&T.map((e=>{let{paymentInDate:t,paymentInNumber:s,party:n}=e;return{"Payment In Date":t,"Payment In Number":s,Party:n.name}}))),[T]),[W,M]=(0,n.useState)(!0),[U,B]=(0,n.useState)(!0);(0,n.useEffect)((()=>{(async()=>{try{const e={token:x.A.get("token"),trash:"trash"===I,all:"all"===I},t="https://ezy-bill-api.tisindia.net/api/v1"+"/paymentin/get?page=".concat(_,"&limit=").concat(k),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await s.json();D(n.totalData),F([...n.data]),M(!1)}catch(e){console.log(e)}})()}),[I,k,_]);const q=async e=>{if("copy"===e)s("listQuotation");else if("excel"===e)w(Y,"payment-in.xlsx");else if("print"===e)N(L,"Payment In List");else if("pdf"===e){let e=v("Payment In List",Y);(0,h.A)(e)}};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.A,{title:"Payment in"}),(0,f.jsxs)("main",{id:"main",children:[(0,f.jsx)(a.A,{}),(0,f.jsx)(p.m_,{id:"payInTooltip"}),(0,f.jsx)(g.A,{title:"Payment In",onYesFunc:async t=>{if(0===S.length||"active"!==I)return;try{const s=await fetch("https://ezy-bill-api.tisindia.net/api/v1/paymentin/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:S,trash:t})}),n=await s.json();return 200!==s.status||n.err?e(n.err,"error"):(S.forEach(((e,t)=>{F((t=>t.filter(((t,s)=>t._id!==e))))})),P([]),e(n.msg,"success"))}catch(s){console.log(s),e("Something went wrong","error")}}}),(0,f.jsxs)("div",{className:"content__body",children:[(0,f.jsxs)("div",{className:"mb-5 w-full bg-white rounded p-4 shadow-sm add_new_compnent  overflow-hidden\n              transition-all\n            ",children:[(0,f.jsxs)("div",{className:"flex justify-between items-center",children:[(0,f.jsx)("div",{className:"flex flex-col",children:(0,f.jsxs)("select",{value:k,onChange:e=>E(e.target.value),children:[(0,f.jsx)("option",{value:10,children:"10"}),(0,f.jsx)("option",{value:25,children:"25"}),(0,f.jsx)("option",{value:50,children:"50"}),(0,f.jsx)("option",{value:100,children:"100"})]})}),(0,f.jsxs)("div",{className:"flex items-center gap-2 listing__btn_grp",children:[(0,f.jsx)("div",{className:"flex w-full flex-col lg:w-[300px]",children:(0,f.jsx)("input",{type:"text",placeholder:"Search...",onChange:e=>{const t=e.target.value.toLowerCase();document.querySelectorAll(".list__table tbody tr").forEach((e=>{const s=e.querySelectorAll("td");let n=!1;s.forEach(((e,s)=>{0!==s&&e.innerHTML.toLowerCase().includes(t)&&(n=!0)})),e.style.display=n?"":"none"}))},className:"p-[6px]"})}),(0,f.jsxs)("button",{className:"bg-gray-100 border",children:[(0,f.jsx)(b.F.FILTER,{className:"text-xl"}),"Filter"]}),(0,f.jsxs)("button",{onClick:()=>{S.length>0&&t((0,y.Y)(!0))},className:"".concat(S.length>0?"bg-red-400 text-white":"bg-gray-100"," border"),children:[(0,f.jsx)(b.F.DELETE,{className:"text-lg"}),"Delete"]}),(0,f.jsxs)("button",{onClick:()=>R("/admin/payment-in/add"),className:"bg-[#003E32] text-white ",children:[(0,f.jsx)(b.F.ADD,{className:"text-xl text-white"}),"Add New"]}),T.length>0&&(0,f.jsx)("div",{className:"flex justify-end",children:(0,f.jsx)(r.A,{placement:"leftStart",trigger:"click",speaker:(0,f.jsxs)(c.A,{full:!0,children:[(0,f.jsxs)("div",{className:"download__menu",onClick:()=>q("print"),children:[(0,f.jsx)(b.F.PRINTER,{className:"text-[16px]"}),"Print Table"]}),(0,f.jsxs)("div",{className:"download__menu",onClick:()=>q("copy"),children:[(0,f.jsx)(b.F.COPY,{className:"text-[16px]"}),"Copy Table"]}),(0,f.jsxs)("div",{className:"download__menu",onClick:()=>q("pdf"),children:[(0,f.jsx)(b.F.PDF,{className:"text-[16px]"}),"Download Pdf"]}),(0,f.jsxs)("div",{className:"download__menu",onClick:()=>q("excel"),children:[(0,f.jsx)(b.F.EXCEL,{className:"text-[16px]"}),"Download Excel"]})]}),children:(0,f.jsx)("div",{className:"record__download",children:(0,f.jsx)(b.F.MORE,{})})})})]})]}),(0,f.jsx)("div",{id:"proformaInvoice"})]}),W?(0,f.jsx)(m.A,{}):T.length>0?(0,f.jsx)("div",{className:"content__body__main",children:(0,f.jsxs)("div",{className:"overflow-x-auto list__table",children:[(0,f.jsxs)("table",{className:"min-w-full bg-white",id:"listQuotation",ref:L,children:[(0,f.jsx)("thead",{className:"list__table__head",children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:"py-2 px-4 border-b",children:(0,f.jsx)("input",{type:"checkbox",onChange:e=>{e.target.checked?P(T.map((e=>e._id))):P([])},checked:T.length>0&&S.length===T.length})}),(0,f.jsx)("th",{className:"py-2 px-4 border-b cursor-pointer",onClick:()=>{const e=[...T].sort(((e,t)=>{const s=new Date(e.paymentInDate),n=new Date(t.paymentInDate);return U?s-n:n-s}));F(e),B(!U)},children:(0,f.jsxs)("div",{className:"flex items-center justify-center",children:["Date ",U?(0,f.jsx)(b.F.DROPDOWN,{}):(0,f.jsx)(b.F.DROPUP,{})]})}),(0,f.jsx)("th",{className:"py-2 px-4 border-b",children:"Payment In Number"}),(0,f.jsx)("th",{className:"py-2 px-4 border-b",children:"Party Name"}),(0,f.jsx)("th",{className:"py-2 px-4 border-b",children:"Amount"}),(0,f.jsx)("th",{className:"py-2 px-4 border-b",children:"Action"})]})}),(0,f.jsx)("tbody",{children:T.map(((e,t)=>(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"py-2 px-4 border-b max-w-[10px]",children:(0,f.jsx)("input",{type:"checkbox",checked:S.includes(e._id),onChange:()=>{return t=e._id,void P((e=>e.includes(t)?e.filter(((e,s)=>e!==t)):[...e,t]));var t},onClick:e=>e.stopPropagation()})}),(0,f.jsx)("td",{className:"px-4 border-b",align:"center",children:new Date(e.paymentInDate).toLocaleDateString()}),(0,f.jsx)("td",{className:"px-4 border-b",align:"center",children:e.paymentInNumber}),(0,f.jsx)("td",{className:"px-4 border-b",align:"center",children:e.party.name}),(0,f.jsx)("td",{className:"px-4 border-b",align:"center",children:e.amount}),(0,f.jsx)("td",{className:"px-4 text-center",children:(0,f.jsx)(r.A,{placement:"leftStart",trigger:"click",speaker:(0,f.jsx)(c.A,{full:!0,children:(0,f.jsxs)("div",{className:"table__list__action__icon",onClick:()=>R("/admin/payment-in/edit/".concat(e._id)),children:[(0,f.jsx)(b.F.EDIT,{className:"text-[16px]"}),"Edit"]})}),children:(0,f.jsx)("div",{className:"table__list__action",children:(0,f.jsx)(b.F.HORIZONTAL_MORE,{})})})})]},t)))})]}),(0,f.jsxs)("div",{className:"paginate__parent",children:[(0,f.jsxs)("p",{children:["Showing ",T.length," of ",C," entries"]}),(0,f.jsxs)("div",{className:"flex justify-end gap-2 pb-3",children:[_>1?(0,f.jsx)("div",{onClick:()=>A(_-1),className:"border bg-blue-600 text-white w-[20px] h-[20px] grid place-items-center rounded cursor-pointer",children:(0,f.jsx)(b.F.PREV_PAGE_ARROW,{})}):null,Array.from({length:Math.ceil(C/k)}).map(((e,t)=>(0,f.jsx)("div",{onClick:()=>A(t+1),className:"border-blue-400 border w-[20px] h-[20px] text-center rounded cursor-pointer",style:_===t+1?{border:"1px solid blue"}:{},children:t+1}))),C/k>_?(0,f.jsx)("div",{onClick:()=>A(_+1),className:"border bg-blue-600 text-white w-[20px] h-[20px] flex items-center justify-center rounded cursor-pointer",children:(0,f.jsx)(b.F.NEXT_PAGE_ARROW,{})}):null]})]})]})}):(0,f.jsx)(u.A,{title:"Payment In",link:"/admin/payment-in/add"})]})]})]})}},50477:()=>{}}]);
//# sourceMappingURL=5076.5e5fecd6.chunk.js.map