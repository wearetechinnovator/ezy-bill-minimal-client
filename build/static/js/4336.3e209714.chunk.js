(self.webpackChunkclient=self.webpackChunkclient||[]).push([[4336],{85623:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});s(65043);const a=s.p+"static/media/norecord.048751373b74c78a9b0413a800412fa9.svg";var n=s(66580),l=s(70579);const c=e=>{let{title:t,link:s}=e;const c=(0,n.Zp)();return(0,l.jsx)("div",{className:"add_new_compnent",children:(0,l.jsxs)("div",{className:"w-full bg-white rounded shadow-sm p-4 grid place-items-center",children:[(0,l.jsx)("img",{src:a,alt:"",srcset:""}),(0,l.jsxs)("p",{className:"mb-3 text-lg text-gray-400",children:["You don't have any ",t]}),(0,l.jsxs)("button",{onClick:()=>{c(s)},className:"bg-[#003E32] text-white mb-2",children:["Add ",t]})]})})}},60309:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var a=s(89379),n=s(65043),l=s(75105),c=s(83003),r=s(91887),i=s(1880),o=s(9435),d=s(70579);const x=e=>{let{open:t,get:s,id:x}=e;const h=(0,c.wA)(),[p,m]=(0,n.useState)({name:""}),u=(0,o.A)();(0,n.useEffect)((()=>{x?(async()=>{if(!x)return;const e=i.A.get("token");try{const t=await fetch("https://ezy-bill-api.tisindia.net/api/v1/partycategory/get/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,id:x})}),s=await t.json();if(console.log(s),200!==t.status)return void u(s.error,"error");m({name:s.name})}catch(t){console.log(t),u("Something went wrong!","error")}})():m({name:""})}),[x]);return(0,d.jsx)("div",{className:"party__modal",children:(0,d.jsxs)(l.A,{open:t,size:400,onClose:()=>{h((0,r.L)(!1))},children:[(0,d.jsx)(l.A.Header,{children:(0,d.jsx)("h6",{className:"py-2",children:"Add Party Category"})}),(0,d.jsxs)(l.A.Body,{children:[(0,d.jsxs)("div",{className:"border-t pt-7 border-gray-300",children:[(0,d.jsx)("p",{className:"mb-1 text-[12px]",children:"Category Name"}),(0,d.jsx)("input",{type:"text",onChange:e=>m((0,a.A)((0,a.A)({},p),{},{name:e.target.value})),value:p.name})]}),(0,d.jsx)("button",{onClick:async()=>{if(!p.name)return void u("Please enter a category name!","error");const e=i.A.get("token"),t=(0,a.A)((0,a.A)({},p),{},{token:e});x&&(t.update=!0,t.id=x);try{const e=await fetch("https://ezy-bill-api.tisindia.net/api/v1/partycategory/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await e.json();return 200!==e.status?void u(a.error,"error"):(s&&s(x?p.name:a),m({name:""}),u("Party category added successfully!","success"),void h((0,r.L)(!1)))}catch(n){console.log(n),u("Something went wrong!","error")}},className:"px-3 py-2 mt-3 bg-blue-800 text-white rounded-md",children:"Save"})]})]})})}},80138:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});s(65043);var a=s(70579);const n=()=>(0,a.jsx)("div",{className:"shimmer__parent",children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"flex flex-col gap-2",children:Array.from({length:8}).map(((e,t)=>(0,a.jsx)("div",{className:"animate w-full h-[20px] rounded"},e)))})})})},69577:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(75105),n=s(53435),l=s(83003),c=s(27882),r=s(70579);const i=e=>{let{title:t,onYesFunc:s}=e;const i=(0,l.wA)(),o=(0,l.d4)((e=>e.deleteModal.show));return(0,r.jsxs)(a.A,{open:o,size:"xs",onClose:()=>i((0,c.Y)(!1)),children:[(0,r.jsxs)(a.A.Header,{className:"pb-2",children:[(0,r.jsxs)("p",{className:"flex items-center gap-1",children:[(0,r.jsx)(n.F.DELETE,{className:"bg-red-400 rounded-full w-[17px] h-[17px] text-white p-[2px]"}),(0,r.jsxs)("span",{className:"text-xs",children:["Delete ",t]})]}),(0,r.jsx)(a.A.Title,{})]}),(0,r.jsx)(a.A.Body,{children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center text-center",children:[(0,r.jsx)(n.F.DELETE,{className:"text-2xl text-red-400 "}),(0,r.jsx)("p",{className:"text-xl mt-2 font-semibold",children:"Are You Sure?"}),(0,r.jsx)("p",{className:"mt-6 text-xs",children:"Do you really want to delete these records? This process cannot be undone."})]})}),(0,r.jsx)(a.A.Footer,{children:(0,r.jsxs)("div",{className:"w-full flex gap-2 items-center mt-6",children:[(0,r.jsx)("button",{onClick:()=>i((0,c.Y)(!1)),className:"w-full bg-red-300 hover:bg-red-200 text-white rounded p-2",children:"No"}),(0,r.jsx)("button",{onClick:()=>{s(),i((0,c.Y)(!1))},className:"w-full bg-red-500 hover:bg-red-400 text-white rounded p-2",children:"Yes"})]})})]})}},2331:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(53435),n=s(70579);const l=e=>{let{activePage:t,totalData:s,dataLimit:l,setActivePage:c}=e;const r=Math.ceil(s/l);if(!(l>s))return(0,n.jsxs)("div",{className:"flex justify-end items-center space-x-2",children:[t>1&&(0,n.jsx)("div",{onClick:()=>c(t-1),className:"paginate__button__back",children:(0,n.jsx)(a.F.PREV_PAGE_ARROW,{})}),(()=>{const e=[];if(r<=5)for(let t=1;t<=r;t++)e.push(t);else{e.push(1),t>3&&e.push("...");const s=Math.max(2,t-1),a=Math.min(r-1,t+1);for(let t=s;t<=a;t++)e.push(t);t<r-2&&e.push("..."),e.push(r)}return e})().map(((e,s)=>"..."===e?(0,n.jsx)("div",{className:"px-2",children:"..."},"ellipsis-".concat(s)):(0,n.jsx)("div",{onClick:()=>c(e),className:"paginate__button__number ".concat(t===e?"active__page":""),children:e},e))),t<r&&(0,n.jsx)("div",{onClick:()=>c(t+1),className:"paginate__button__next",children:(0,n.jsx)(a.F.NEXT_PAGE_ARROW,{})})]})}},36615:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(64363);const n=async e=>{let t="";try{const s=await(0,a.x8)(e).toBlob();t=URL.createObjectURL(s);const n=await fetch(t),l=await n.blob(),c=window.URL.createObjectURL(l),r=document.createElement("a");r.href=c,r.download="data-".concat(Date.now(),".pdf"),r.click()}catch(s){console.error("Error in download process:",s)}finally{t&&URL.revokeObjectURL(t)}}},63744:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(11238),n=s(64363),l=s(9435),c=s(70579);const r=()=>{const e=(0,l.A)();return{copyTable:async e=>{const t=document.querySelector("#"+e);if(!t)return void console.error("Table with id ".concat(e," not found."));try{const e=document.createElement("textarea");e.value=(e=>{let t="";return e.querySelectorAll("tr").forEach((e=>{const s=e.querySelectorAll("th, td");s.forEach(((e,a)=>{t+=e.textContent.trim(),a<s.length-1&&(t+="\t")})),t+="\n"})),t})(t),document.body.appendChild(e),e.select(),e.setSelectionRange(0,99999),await navigator.clipboard.writeText(e.value),console.log("Table copied to clipboard."),document.body.removeChild(e)}catch(s){console.error("Failed to copy table:",s)}},downloadExcel:(t,s)=>{try{const e=a.Wp.book_new(),n=a.Wp.json_to_sheet(t);a.Wp.book_append_sheet(e,n,"Data"),a._h(e,s)}catch(n){e("Download faild! "+n,"error")}},printTable:(e,t)=>{const s=e.current.outerHTML,a=window.open("","_blank","width=800,height=600");a.document.write("\n      <html>\n        <head>\n          <title>".concat(t,"</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              padding: 20px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n            }\n            th, td {\n              border: 1px solid gray;\n              padding: 8px;\n              text-align: left;\n            }\n          </style>\n        </head>\n        <body>\n          <h3>").concat(t,"</h3>\n          ").concat(s,"\n        </body>\n      </html>\n    ")),a.document.close(),a.focus(),a.print(),a.close()},exportPdf:(e,t)=>{console.log("exprot hook",t);const s=n.vv.create({page:{padding:20,backgroundColor:"#fff"},header:{marginBottom:20,textAlign:"center"},table:{display:"flex",flexDirection:"column",borderWidth:1,borderColor:"#ddd",borderRadius:4,overflow:"hidden"},row:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#ddd"},headerRow:{backgroundColor:"#3B82F6"},cell:{flex:1,padding:5,textAlign:"center",borderRightWidth:1,borderRightColor:"#ddd",fontSize:10},headerCell:{color:"white",fontWeight:"bold"}});try{const a=t&&t[0];return(0,c.jsx)(n.yo,{children:(0,c.jsxs)(n.YW,{size:"A4",style:s.page,children:[(0,c.jsx)(n.Ss,{style:s.header,children:(0,c.jsx)(n.EY,{children:e})}),(0,c.jsxs)(n.Ss,{style:s.table,children:[(0,c.jsx)(n.Ss,{style:[s.row,s.headerRow],children:a&&Object.keys(a).map(((e,t)=>(0,c.jsx)(n.EY,{style:[s.cell,s.headerCell],children:e},t)))}),t&&t.map(((e,t)=>(0,c.jsx)(n.Ss,{style:s.row,children:Object.keys(e).map(((t,a)=>(0,c.jsx)(n.EY,{style:s.cell,children:e[t]},a)))},t)))]})]})})}catch(a){console.log(a)}}}}},36356:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A});var a=s(65043),n=s(75206),l=s(86319),c=s(66580),r=s(63744),i=s(1880),o=s(9435),d=s(36615),x=s(80138),h=s(39532),p=s(85623),m=s(96685),u=s(96074),j=s(53435),y=s(2331),g=s(69577),b=s(83003),f=s(27882),w=s(60309),N=s(60184),_=s(91887),v=s(70579);document.title="Party";const A=()=>{const e=(0,b.wA)(),t=(0,o.A)(),{copyTable:s,downloadExcel:A,printTable:k,exportPdf:C}=(0,r.A)(),[E,S]=(0,a.useState)(1),[T,P]=(0,a.useState)(10),[O,R]=(0,a.useState)(),[F,L]=(0,a.useState)([]),D=(0,c.Zp)(),[Y,z]=(0,a.useState)([]),B=(0,a.useRef)(null),[W,M]=(0,a.useState)("active"),U=(0,a.useMemo)((()=>Y&&Y.map((e=>{let{name:t,type:s,openingBalance:a}=e;return{Name:t,Type:s,OpeningBalance:a}}))),[Y]),[J,I]=(0,a.useState)(!0),[q,H]=(0,a.useState)(null),[G,Z]=(0,a.useState)(null),X=(0,b.d4)((e=>e.partyModalSlice.show)),[K,Q]=(0,a.useState)(""),[V,$]=(0,a.useState)([]),ee=i.A.get("token");(0,a.useEffect)((()=>{(async()=>{try{const e={token:i.A.get("token"),trash:"trash"===W,all:"all"===W},t="https://ezy-bill-api.tisindia.net/api/v1"+"/party/get?page=".concat(E,"&limit=").concat(T),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();R(a.totalData),z([...a.data]),I(!1)}catch(e){console.log(e)}})()}),[W,T,E]),(0,a.useEffect)((()=>{(async()=>{try{const e="https://ezy-bill-api.tisindia.net/api/v1/partycategory/get",s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:ee})}),a=await s.json();if(200!==s.status)return t(a.err,"error");$(a)}catch(e){console.log(e)}})()}),[]),(0,a.useEffect)((()=>{const e=async e=>{try{const t="https://ezy-bill-api.tisindia.net/api/v1"+"/".concat(e,"/get"),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i.A.get("token"),totalPayment:!0})}),a=await s.json();200===s.status&&("paymentin"===e?H(a.totalAmount):"paymentout"===e&&Z(a.totalAmount))}catch(s){return t("Can't get total collection","error")}};e("paymentin"),e("paymentout")}),[]);const te=async e=>{if("copy"===e)s("listOfPartys");else if("excel"===e)A(U,"party-list.xlsx");else if("print"===e)k(B,"Party List");else if("pdf"===e){let e=C("Party List",U);(0,d.A)(e)}};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.A,{title:"Party"}),(0,v.jsxs)("main",{id:"main",children:[(0,v.jsx)(l.A,{}),(0,v.jsx)(h.m_,{id:"partyTooltip"}),(0,v.jsx)(g.A,{title:"Party",onYesFunc:async e=>{if(0===F.length||"active"!==W)return;try{const s=await fetch("https://ezy-bill-api.tisindia.net/api/v1/party/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:F,trash:e})}),a=await s.json();return 200!==s.status||a.err?t(a.err,"error"):(F.forEach(((e,t)=>{z((t=>t.filter(((t,s)=>t._id!==e))))})),L([]),t(a.msg,"success"))}catch(s){console.log(s),t("Something went wrong","error")}}}),(0,v.jsx)(w.A,{open:X,id:K,get:e=>{if(""===K)$([e,...V]);else{V.filter((e=>e._id===K))[0].name=e,Q("")}}}),(0,v.jsxs)("div",{className:"content__body",children:[(0,v.jsx)("div",{className:"add_new_compnent",children:(0,v.jsxs)("div",{className:"flex justify-between items-center",children:[(0,v.jsx)("div",{className:"flex flex-col",children:(0,v.jsxs)("select",{value:T,onChange:e=>P(e.target.value),children:[(0,v.jsx)("option",{value:10,children:"10"}),(0,v.jsx)("option",{value:25,children:"25"}),(0,v.jsx)("option",{value:50,children:"50"}),(0,v.jsx)("option",{value:100,children:"100"})]})}),(0,v.jsxs)("div",{className:"flex items-center gap-2 listing__btn_grp",children:[(0,v.jsx)("div",{className:"flex w-full flex-col lg:w-[300px]",children:(0,v.jsx)("input",{type:"text",placeholder:"Search...",onChange:e=>{const t=e.target.value.toLowerCase();document.querySelectorAll(".list__table tbody tr").forEach((e=>{const s=e.querySelectorAll("td");let a=!1;s.forEach(((e,s)=>{0!==s&&e.innerHTML.toLowerCase().includes(t)&&(a=!0)})),e.style.display=a?"":"none"}))},className:"p-[6px]"})}),(0,v.jsxs)("button",{onClick:()=>{F.length>0&&e((0,f.Y)(!0))},className:"".concat(F.length>0?"bg-red-400 text-white":"bg-gray-100"," border"),children:[(0,v.jsx)(j.F.DELETE,{className:"text-lg"}),"Delete"]}),(0,v.jsxs)("button",{onClick:()=>D("/admin/party/add"),className:"bg-[#003E32] text-white ",children:[(0,v.jsx)(j.F.ADD,{className:"text-xl text-white"}),"Add New"]}),Y.length>0&&(0,v.jsx)("div",{className:"flex justify-end",children:(0,v.jsx)(m.A,{placement:"leftStart",trigger:"click",speaker:(0,v.jsxs)(u.A,{full:!0,children:[(0,v.jsxs)("div",{className:"download__menu",onClick:()=>te("print"),children:[(0,v.jsx)(j.F.PRINTER,{className:"text-[16px]"}),"Print Table"]}),(0,v.jsxs)("div",{className:"download__menu",onClick:()=>te("copy"),children:[(0,v.jsx)(j.F.COPY,{className:"text-[16px]"}),"Copy Table"]}),(0,v.jsxs)("div",{className:"download__menu",onClick:()=>te("pdf"),children:[(0,v.jsx)(j.F.PDF,{className:"text-[16px]"}),"Download Pdf"]}),(0,v.jsxs)("div",{className:"download__menu",onClick:()=>te("excel"),children:[(0,v.jsx)(j.F.EXCEL,{className:"text-[16px]"}),"Download Excel"]})]}),children:(0,v.jsx)("div",{className:"record__download",children:(0,v.jsx)(j.F.MORE,{})})})})]})]})}),J?(0,v.jsx)(x.A,{}):Y.length>0?(0,v.jsxs)("div",{className:"content__body__main",children:[(0,v.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-5 gap-8",children:[(0,v.jsxs)("div",{className:"party__data",children:[(0,v.jsxs)("h6",{children:[(0,v.jsx)(j.F.USERS,{})," Total Parties"]}),(0,v.jsx)("p",{children:O})]}),(0,v.jsxs)("div",{className:"party__data",children:[(0,v.jsxs)("h6",{children:[(0,v.jsx)(j.F.TREDING_UP,{})," Total Amount To Pay"]}),(0,v.jsxs)("p",{children:[(0,v.jsx)(j.F.RUPES,{}),G]})]}),(0,v.jsxs)("div",{className:"party__data",children:[(0,v.jsxs)("h6",{children:[(0,v.jsx)(j.F.TREDING_DOWN,{}),"Total Amount To Collect"]}),(0,v.jsxs)("p",{children:[(0,v.jsx)(j.F.RUPES,{})," ",q]})]})]}),(0,v.jsxs)("div",{className:"overflow-x-auto list__table",children:[(0,v.jsxs)("table",{className:"min-w-full bg-white",id:"listOfPartys",ref:B,children:[(0,v.jsx)("thead",{className:"list__table__head",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"py-2 px-4 w-[50px]",children:(0,v.jsx)("input",{type:"checkbox",onChange:e=>{e.target.checked?L(Y.map((e=>e._id))):L([])},checked:Y.length>0&&F.length===Y.length})}),(0,v.jsx)("td",{className:"py-2 px-4",children:"Name"}),(0,v.jsx)("td",{className:"py-2 px-4",children:"Phone"}),(0,v.jsx)("th",{className:"py-2 px-4",children:"Type"}),(0,v.jsx)("th",{className:"py-2 px-4",children:"Balance"}),(0,v.jsx)("th",{className:"py-2 px-4 w-[100px]",children:"Action"})]})}),(0,v.jsx)("tbody",{children:Y.map(((e,t)=>(0,v.jsxs)("tr",{onClick:()=>D("/admin/party/details/"+e._id),className:"cursor-pointer hover:bg-gray-100",children:[(0,v.jsx)("td",{className:"py-2 px-4",children:(0,v.jsx)("input",{type:"checkbox",checked:F.includes(e._id),onClick:e=>e.stopPropagation(),onChange:()=>{return t=e._id,void L((e=>e.includes(t)?e.filter(((e,s)=>e!==t)):[...e,t]));var t}})}),(0,v.jsx)("td",{className:"px-4",children:e.name}),(0,v.jsx)("td",{className:"px-4",children:e.contactNumber}),(0,v.jsx)("td",{className:"px-4 text-center",children:(0,v.jsx)("span",{className:"customer_badge",children:e.type.capitalize()})}),(0,v.jsx)("td",{className:"px-4 text-center",children:e.openingBalance}),(0,v.jsx)("td",{className:"px-4 text-center",children:(0,v.jsx)(m.A,{onClick:e=>e.stopPropagation(),placement:"leftStart",trigger:"click",speaker:(0,v.jsx)(u.A,{full:!0,children:(0,v.jsxs)("div",{className:"table__list__action__icon",onClick:t=>{t.stopPropagation(),D("/admin/party/edit/"+e._id)},children:[(0,v.jsx)(j.F.EDIT,{className:"text-[16px]"}),"Edit"]})}),children:(0,v.jsx)("div",{className:"table__list__action",children:(0,v.jsx)(j.F.HORIZONTAL_MORE,{})})})})]},t)))})]}),(0,v.jsxs)("div",{className:"paginate__parent",children:[(0,v.jsxs)("p",{children:["Showing ",Y.length," of ",O," entries"]}),(0,v.jsx)(y.A,{activePage:E,totalData:O,dataLimit:T,setActivePage:S})]})]})]}):(0,v.jsx)(p.A,{title:"Party",link:"/admin/party/add"}),(0,v.jsxs)("div",{className:"content__body__main bg-white mt-5",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center",children:[(0,v.jsx)("p",{className:"font-bold",children:"Party Category"}),(0,v.jsxs)("button",{onClick:()=>{Q(""),e((0,_.L)(!0))},className:"bg-green-500 hover:bg-green-400 text-md text-white \r rounded w-[70px] flex items-center justify-center gap-1 py-2",children:[(0,v.jsx)(N.toK,{}),"Add"]})]}),(0,v.jsx)("hr",{}),(0,v.jsx)("div",{className:"overflow-x-auto mt-5 list__table",children:(0,v.jsxs)("table",{className:"min-w-full bg-white",id:"listQuotation",children:[(0,v.jsx)("thead",{className:"bg-gray-100",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:"py-2 px-4 border-b",children:"Name"}),(0,v.jsx)("th",{className:"py-2 px-4 border-b w-[70px]",children:"Action"})]})}),(0,v.jsx)("tbody",{children:V.map(((s,a)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:"px-4 py-2 border-b",children:s.name}),(0,v.jsx)("td",{className:"px-4 border-b",align:"center",children:(0,v.jsxs)("div",{"data-tooltip-id":"unitTooltip","data-tooltip-content":"Edit",className:"flex justify-center items-center flex-col md:flex-row gap-2 mr-2",children:[(0,v.jsx)("button",{className:"bg-blue-400 grid place-items-center text-white px-1 py-1 rounded w-full text-[16px]",onClick:()=>{e((0,_.L)(!0)),Q(s._id)},children:(0,v.jsx)(j.F.PENCIL,{})}),(0,v.jsx)("button",{className:"bg-red-500 grid place-items-center text-white px-1 py-1 rounded w-full text-[16px]",onClick:()=>(async e=>{const s=i.A.get("token");try{const a=await fetch("https://ezy-bill-api.tisindia.net/api/v1/partycategory/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,token:s})}),n=await a.json();if(200!==a.status)return t(n.err,"error");const l=V.filter((t=>t._id!==e));return $(l),t("Party category removed successfully!","success")}catch(a){return console.log(a),t("Something went wrong","error")}})(s._id),children:(0,v.jsx)(j.F.DELETE,{})})]})})]},a)))})]})})]})]})]})]})}},50477:()=>{}}]);
//# sourceMappingURL=4336.3e209714.chunk.js.map