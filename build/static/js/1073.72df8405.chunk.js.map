{"version":3,"file":"static/js/1073.72df8405.chunk.js","mappings":"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","sources":["components/AddItemModal.jsx","hooks/useBillPrefix.jsx","hooks/useFormHandle.jsx","pages/salesinvoice/AddSalesInvoice.jsx"],"sourcesContent":["import React from 'react'\r\nimport { Modal } from 'rsuite';\r\nimport { AddItemComponent } from '../pages/Items/ItemAdd';\r\nimport { useDispatch } from 'react-redux';\r\nimport { toggle } from '../store/itemModalSlice';\r\n\r\n\r\nconst AddItemModal = ({ open }) => {\r\n  const dispatch = useDispatch();\r\n\r\n\r\n  return (\r\n    <div className='item__modal'>\r\n      <Modal open={open} size={600} onClose={() => {\r\n        dispatch(toggle(false))\r\n        window.location.reload(); //this reload is important for add new party to list;\r\n      }}>\r\n        <Modal.Header>\r\n          <h6 className='py-2'>Add Item</h6>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <AddItemComponent />\r\n        </Modal.Body>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nexport default AddItemModal;","import { useSelector } from \"react-redux\";\r\n\r\n\r\nconst useBillPrefix = (type) => {\r\n  const userData = useSelector((state) => state.userDetail);\r\n  const activeCompany = userData.activeCompany;\r\n\r\n\r\n  if (userData.companies) {\r\n    for (let i of userData.companies) {\r\n      if (i._id === activeCompany) {\r\n        if (type === 'invoice') return [i.invoiceInitial, i.invoiceNextCount];\r\n        else if (type === \"po\") return [i.poInitial, i.poNextCount];\r\n        else if (type === \"proforma\") return [i.proformaInitial, i.proformaNextCount];\r\n        else if (type === \"quotation\") return [i.quotationInitial, i.quotationCount];\r\n        else if (type === \"creditnote\") return [i.creditNoteInitial, i.creditNoteCount];\r\n        else if (type === \"salesreturn\") return [i.salesReturnInitial, i.salesReturnCount];\r\n        else if (type === \"deliverychalan\") return [i.deliverChalanInitial, i.deliveryChalanCount];\r\n        else if (type === \"purchase\") return [i.purchaseInitial, i.purchaseNextCount];\r\n        else return null;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default useBillPrefix;\r\n","import useApi from './useApi';\r\n\r\n\r\nconst useFormHandle = () => {\r\n    const { getApiData } = useApi();\r\n\r\n    //========================================= [Add item row] ========================================;\r\n    const addItem = (which, itemRowSet, setItemRows, setFormData, additionalRowSet, setAdditionalRow) => {\r\n        if (which === 1) {\r\n            console.log(\"itemRowSet\", itemRowSet.length);\r\n            setItemRows((prevItemRows) => {\r\n                const newItem = {\r\n                    ...itemRowSet,\r\n                    rowItem: prevItemRows.length > 0 ? prevItemRows[prevItemRows.length - 1].rowItem + 1 : itemRowSet.rowItem,\r\n                };\r\n                const updatedItems = [...prevItemRows, newItem];\r\n\r\n                // Update formData after itemRows is updated\r\n                setFormData((prev) => ({\r\n                    ...prev,\r\n                    items: updatedItems,\r\n                }));\r\n\r\n                return updatedItems;\r\n            });\r\n        } else {\r\n            setAdditionalRow((prevAdditionalRows) => {\r\n                const newAdditionalRow = {\r\n                    ...additionalRowSet,\r\n                    additionalRowsItem: prevAdditionalRows.length > 0 ? prevAdditionalRows[prevAdditionalRows.length - 1].additionalRowsItem + 1 : additionalRowSet.additionalRowsItem,\r\n                };\r\n                const updatedAdditionalRows = [...prevAdditionalRows, newAdditionalRow];\r\n\r\n                // Update formData after additionalRows is updated\r\n                setFormData((prev) => ({\r\n                    ...prev,\r\n                    additionalCharge: updatedAdditionalRows,\r\n                }));\r\n\r\n                return updatedAdditionalRows;\r\n            });\r\n        }\r\n    };\r\n\r\n    // ===================================== [On Item chagne ]====================================;\r\n    const onItemChange = async (value, index, tax, ItemRows, setItemRows, setItems, invType) => {\r\n        if (ItemRows[index]?.itemId === value) return;\r\n\r\n        const data = await getApiData(\"item\");\r\n        // setItems([...data.data]);\r\n\r\n        let selectedItem = data.data.filter(i => i._id === value);\r\n        if (selectedItem.length >= 0) {\r\n            let item = [...ItemRows];\r\n            console.log(\"lengthOfItem\", item.length);\r\n            let currentUnit = [];\r\n            let taxId = selectedItem[0]?.category?.tax || selectedItem[0]?.tax;\r\n            const getTax = tax.filter((t, _) => t._id === taxId)[0];\r\n\r\n\r\n            item[index].itemName = selectedItem[0]?.title;\r\n            item[index].itemId = selectedItem[0]?._id;\r\n            item[index].hsn = selectedItem[0]?.category?.hsn || selectedItem[0]?.hsn;\r\n            item[index].unit = selectedItem[0]?.unit;\r\n            item[index].price = (invType === \"sale\" ? selectedItem[0]?.salePrice : selectedItem[0]?.purchasePrice);\r\n            item[index].selectedUnit = selectedItem[0]?.unit[0]?.unit\r\n            item[index].tax = getTax?.gst ?? 0.0;\r\n            selectedItem[0]?.unit.forEach((u, _) => {\r\n                currentUnit.push(u.unit);\r\n            })\r\n            item[index].unit = [...currentUnit];\r\n\r\n            setItemRows(item);\r\n        }\r\n\r\n    }\r\n\r\n    // ===================================[Delete item and additional row] ==============================;\r\n    const deleteItem = (which, ItemId, setItemRows, setFormData, setAdditionalRow) => {\r\n        if (which === 1) {\r\n            setItemRows((prevItemRows) => {\r\n                const updatedItems = prevItemRows.filter((_, index) => index !== ItemId);\r\n\r\n                // Update formData after itemRows is updated\r\n                setFormData((prev) => ({\r\n                    ...prev,\r\n                    items: updatedItems,\r\n                }));\r\n\r\n                return updatedItems;\r\n            });\r\n        } else {\r\n            setAdditionalRow((prevAdditionalRows) => {\r\n                const updatedAdditionalRows = prevAdditionalRows.filter((_, index) => index !== ItemId);\r\n\r\n                // Update formData after additionalRows is updated\r\n                setFormData((prev) => ({\r\n                    ...prev,\r\n                    additionalCharge: updatedAdditionalRows,\r\n                }));\r\n\r\n                return updatedAdditionalRows;\r\n            });\r\n        }\r\n    };\r\n\r\n\r\n    // ========================= [When change discount type `before` `after` `no`] ==========================;\r\n    const changeDiscountType = (e, ItemRows, formData, setFormData, setDiscountToggler, toast) => {\r\n        if (e.target.value !== \"no\") {\r\n            if (e.target.value === \"before\") {\r\n                if (ItemRows.some((field) => parseInt(field.discountPerAmount) > 0)) {\r\n                    toast(\"To apply discount before tax, remove discount on item\", 'warning')\r\n                    return;\r\n                }\r\n\r\n            }\r\n\r\n            setFormData({ ...formData, discountType: e.target.value });\r\n            setDiscountToggler(false);\r\n        } else {\r\n            setFormData({ ...formData, discountType: e.target.value });\r\n            setFormData((pv) => ({\r\n                ...pv,\r\n                discountAmount: (0).toFixed(2),\r\n                discountPercentage: (0).toFixed(2)\r\n            }))\r\n            setDiscountToggler(true);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    //======================================= [Calculate Final Amount] ===================================='\r\n    const calculateFinalAmount = (additionalRows, formData, subTotal, autoRoundOff = false, roundOffAmount = 0, roundOffType = '0') => {\r\n        let totalParticular = 0;\r\n        let total = 0;\r\n\r\n        // Total additionla amount and store\r\n        additionalRows.forEach((d, _) => {\r\n            if (d.amount) {\r\n                totalParticular = totalParticular + parseFloat(d.amount);\r\n            }\r\n        })\r\n\r\n        if (formData.discountType === \"no\" || formData.discountType === \"\" || formData.discountType === \"before\") {\r\n            total = subTotal()('amount');\r\n        }\r\n        else if (formData.discountType === \"after\") {\r\n            total = (subTotal()('amount') - formData.discountAmount).toFixed(2);\r\n        }\r\n\r\n        if (autoRoundOff) {\r\n            return !isNaN(totalParticular) ? (parseFloat(totalParticular) + parseFloat(total)).toFixed(0) : total;\r\n        } else {\r\n            let final = !isNaN(totalParticular) ? (parseFloat(totalParticular) + parseFloat(total)).toFixed(2) : total;\r\n            if (roundOffAmount) {\r\n                final =  roundOffType === \"0\" ? parseFloat(final) - parseFloat(roundOffAmount):  parseFloat(final) + parseFloat(roundOffAmount);\r\n\r\n            }\r\n            return final\r\n        }\r\n\r\n    }\r\n\r\n\r\n    const onPerDiscountAmountChange = (val, index, ItemRows, setItemRows, formData) => {\r\n        let item = [...ItemRows];\r\n        let amount = parseFloat(item[index].price) * parseFloat(item[index].qun);\r\n        let percentage = ((parseFloat(val) / amount) * 100).toFixed(2);\r\n\r\n        if (item[index].perDiscountType !== \"percentage\" || formData.discountType === \"before\") {\r\n            item[index].discountPerAmount = isNaN(val) || val === 0 ? (0).toFixed(2) : val;\r\n            item[index].discountPerPercentage = isNaN(percentage) ? (0).toFixed(2) : percentage;\r\n        }\r\n        setItemRows(item);\r\n\r\n    }\r\n\r\n\r\n    const onPerDiscountPercentageChange = (val, index, ItemRows, setItemRows, formData) => {\r\n        let item = [...ItemRows];\r\n        let amount = parseFloat(item[index].price) * parseFloat(item[index].qun);\r\n        // let percentage = (parseFloat(val) / amount) * 100;\r\n        let dis_amount = amount / 100 * val\r\n\r\n        if (item[index].perDiscountType !== \"amount\" || formData.discountType === \"before\") {\r\n            item[index].discountPerPercentage = val;\r\n            item[index].discountPerAmount = (dis_amount).toFixed(2);\r\n        }\r\n        setItemRows(item);\r\n\r\n    }\r\n\r\n    const calculatePerTaxAmount = (index, ItemRows) => {\r\n        const tax = ItemRows[index].tax / 100;\r\n        const qun = ItemRows[index].qun;\r\n        const price = ItemRows[index].price;\r\n        const disAmount = ItemRows[index].discountPerAmount;\r\n        const amount = ((qun * price) - disAmount);\r\n        const taxamount = (amount * tax).toFixed(2);\r\n\r\n        return taxamount;\r\n    }\r\n\r\n\r\n    const calculatePerAmount = (index, ItemRows) => {\r\n        const qun = ItemRows[index].qun;\r\n        const price = ItemRows[index].price;\r\n        const disAmount = ItemRows[index].discountPerAmount;\r\n        const totalPerAmount = parseFloat((qun * price) - disAmount) + parseFloat(calculatePerTaxAmount(index, ItemRows));\r\n\r\n        return (totalPerAmount).toFixed(2);\r\n    }\r\n\r\n\r\n    const onDiscountAmountChange = (e, discountToggler, formData, setFormData, subTotal) => {\r\n        if (discountToggler !== null) {\r\n            const value = e.target.value || (0).toFixed(2);\r\n            let per = ((value / subTotal()('amount')) * 100).toFixed(2) //Get percentage\r\n            setFormData({ ...formData, discountAmount: e.target.value, discountPercentage: per });\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    return {\r\n        onItemChange, addItem, deleteItem,\r\n        changeDiscountType, calculateFinalAmount,\r\n        onPerDiscountAmountChange, onPerDiscountPercentageChange,\r\n        calculatePerTaxAmount, calculatePerAmount,\r\n        onDiscountAmountChange\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default useFormHandle;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { SelectPicker, DatePicker, Button, TagPicker } from 'rsuite';\r\nimport Nav from '../../components/Nav';\r\nimport SideNav from '../../components/SideNav';\r\nimport useMyToaster from '../../hooks/useMyToaster';\r\nimport useApi from '../../hooks/useApi';\r\nimport useBillPrefix from '../../hooks/useBillPrefix';\r\nimport Cookies from 'js-cookie';\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport swal from 'sweetalert';\r\nimport AddPartyModal from '../../components/AddPartyModal';\r\nimport AddItemModal from '../../components/AddItemModal';\r\nimport MySelect2 from '../../components/MySelect2';\r\nimport { Icons } from '../../helper/icons';\r\nimport useFormHandle from '../../hooks/useFormHandle';\r\n\r\n\r\n\r\ndocument.title = \"Sales Invoice\";\r\nconst SalesInvoice = ({ mode }) => {\r\n  const toast = useMyToaster();\r\n  const { id } = useParams()\r\n  const getBillPrefix = useBillPrefix(\"invoice\");\r\n  const { getApiData } = useApi();\r\n  const getPartyModalState = useSelector((store) => store.partyModalSlice.show);\r\n  const getItemModalState = useSelector((store) => store.itemModalSlice.show);\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const itemRowSet = {\r\n    rowItem: 1, itemName: '', description: '', hsn: '', qun: '1', qunLeft: 0, itemId: '',\r\n    unit: [], selectedUnit: '', price: '', discountPerAmount: '', discountPerPercentage: '',\r\n    tax: '', taxAmount: '', amount: '', perDiscountType: \"\", //for checking purpose only\r\n    itemInvoice: [], itemInvoiceList: [],//invoice full data,\r\n    scaneItemCodeValue: ''\r\n  }\r\n  const additionalRowSet = {\r\n    additionalRowsItem: 1, particular: '', amount: ''\r\n  }\r\n  const [ItemRows, setItemRows] = useState([itemRowSet]);\r\n  const [additionalRows, setAdditionalRow] = useState([additionalRowSet]); //{ additionalRowsItem: 1 }\r\n  const [formData, setFormData] = useState({\r\n    party: '', salesInvoiceNumber: '', invoiceDate: new Date().toISOString().split('T')[0], DueDate: '',\r\n    items: ItemRows, additionalCharge: additionalRows, note: '', terms: '',\r\n    discountType: '', discountAmount: '', discountPercentage: '', paymentStatus: '0',\r\n    paymentAccount: '', finalAmount: '', paymentAmount: '', autoRoundOff: false,\r\n    roundOffAmount: null, roundOffType: '0' //1 =`add` | 0 =`reduce`\r\n  })\r\n  const location = useLocation();\r\n  const fromWhichBill = location.state?.fromWhichBill || null;\r\n  const activeRowIndexRef = useRef(null); // For tracking active row index\r\n\r\n\r\n  const [perPrice, setPerPrice] = useState(null);\r\n  const [perTax, setPerTax] = useState(null);\r\n  const [perDiscount, setPerDiscount] = useState(null);\r\n  const [perQun, setPerQun] = useState(null)\r\n\r\n  // When change discount type;\r\n  const [discountToggler, setDiscountToggler] = useState(true);\r\n\r\n  // Store all items without filter\r\n  const [items, setItems] = useState([]);\r\n  // Store units\r\n  const [unit, setUnit] = useState([]);\r\n  // Store taxes\r\n  const [tax, setTax] = useState([]);\r\n  // Store party\r\n  const [party, setParty] = useState([]);\r\n  // Account\r\n  const [account, setAccount] = useState([])\r\n\r\n\r\n  // store label and value pair for dropdown\r\n  const [itemData, setItemData] = useState([])\r\n  const [taxData, setTaxData] = useState([]);\r\n\r\n  // Form hook\r\n  const {\r\n    onItemChange, addItem, deleteItem, changeDiscountType,\r\n    calculateFinalAmount\r\n  } = useFormHandle();\r\n\r\n\r\n\r\n\r\n  // Barcode Scan function;\r\n  useEffect(() => {\r\n    let buffer = \"\";\r\n    let lastTime = 0;\r\n\r\n    const handler = (e) => {\r\n      const now = Date.now();\r\n      const diff = now - lastTime;\r\n\r\n      if (diff > 80) buffer = \"\";\r\n      lastTime = now;\r\n\r\n      if (e.key.length === 1) buffer += e.key;\r\n\r\n      if (e.key === \"Enter\" && buffer.length > 0) {\r\n        const scannedCode = buffer;\r\n        buffer = \"\";\r\n        console.log(\"SCANNER:\", scannedCode);\r\n\r\n        (async () => {\r\n          const data = await getApiData(\"item\", null, scannedCode);\r\n\r\n          if (!data?.data?._id) return; // item not found\r\n\r\n          const scannedId = data.data._id;\r\n\r\n          // 1️⃣ Check if item already exists → increase qty\r\n          const existIndex = ItemRows.findIndex(\r\n            (row) => String(row.itemId) === String(scannedId)\r\n          );\r\n\r\n          if (existIndex !== -1) {\r\n            setItemRows((prev) => {\r\n              const updated = [...prev];\r\n              updated[existIndex].qun = Number(updated[existIndex].qun || 0) + 1;\r\n              return updated;\r\n            });\r\n\r\n            activeRowIndexRef.current = existIndex;\r\n            return;\r\n          }\r\n\r\n          // 2️⃣ If first row is empty (default row), USE it instead of adding new row\r\n          const firstEmpty =\r\n            ItemRows.length === 1 &&\r\n            (!ItemRows[0].itemId || ItemRows[0].itemId === \"\");\r\n\r\n          if (firstEmpty) {\r\n            activeRowIndexRef.current = 0;\r\n\r\n            onItemChange(\r\n              scannedId,\r\n              0,           // first row\r\n              tax,\r\n              ItemRows,\r\n              setItemRows,\r\n              setItems,\r\n              \"sale\"\r\n            );\r\n\r\n            return; // important → prevent adding new row\r\n          }\r\n\r\n          // 3️⃣ Otherwise add new row + fill item\r\n          const newRow = {\r\n            ...itemRowSet,\r\n            rowItem: ItemRows.length + 1,\r\n          };\r\n\r\n          const newRows = [...ItemRows, newRow];\r\n          const newIndex = newRows.length - 1;\r\n\r\n          setItemRows(newRows);\r\n          activeRowIndexRef.current = newIndex;\r\n\r\n          onItemChange(\r\n            scannedId,\r\n            newIndex,\r\n            tax,\r\n            newRows,       // use newRows (not old ItemRows)\r\n            setItemRows,\r\n            setItems,\r\n            \"sale\"\r\n          );\r\n        })();\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", handler);\r\n    return () => document.removeEventListener(\"keydown\", handler);\r\n  }, [ItemRows, tax, getApiData, onItemChange]);\r\n\r\n\r\n\r\n  const get = async () => {\r\n    try {\r\n      let url;\r\n      \r\n      if (mode === 'edit' || !mode) {\r\n        url = `${process.env.REACT_APP_API_URL}${\"/salesinvoice/get\"}`\r\n      }\r\n      else if (mode === \"convert\" && fromWhichBill === \"proforma\") {\r\n        url = `${process.env.REACT_APP_API_URL}${\"/proforma/get\"}`\r\n      }\r\n      else if (mode === \"convert\" && fromWhichBill === \"quotation\") {\r\n        url = `${process.env.REACT_APP_API_URL}${\"/quotation/get\"}`\r\n      }\r\n\r\n      const cookie = Cookies.get(\"token\");\r\n\r\n      const req = await fetch(url, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": 'application/json'\r\n        },\r\n        body: JSON.stringify({ token: cookie, id: id })\r\n      })\r\n      const res = await req.json();\r\n      const removeProformaNumber = { ...res.data };\r\n      delete removeProformaNumber.proformaNumber;\r\n\r\n      const cleanedData = {\r\n        ...removeProformaNumber,\r\n        invoiceDate: res.data.invoiceDate\r\n          ? new Date(res.data.invoiceDate).toISOString().split(\"T\")[0]\r\n          : \"\",\r\n      };\r\n\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        ...cleanedData\r\n      }));\r\n\r\n      if (mode) {\r\n        setAdditionalRow([...res.data.additionalCharge]);\r\n        setItemRows([...res.data.items]);\r\n      }\r\n\r\n      if (res.data.discountType != \"no\") {\r\n        setDiscountToggler(false);\r\n      }\r\n    } catch (error) {\r\n      console.log(error)\r\n      toast(\"Data not get something went wrong\", 'error')\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    if (id) {\r\n      get();\r\n    }\r\n  }, [id, fromWhichBill])\r\n\r\n\r\n  // Set invoice number;\r\n  useEffect(() => {\r\n    if ((getBillPrefix && mode === \"convert\") || (getBillPrefix && !mode)) {\r\n      setFormData(prev => ({ ...prev, salesInvoiceNumber: getBillPrefix[0] + getBillPrefix[1] }));\r\n\r\n    }\r\n    else if (getBillPrefix && mode === \"edit\") {\r\n      get();\r\n    }\r\n\r\n  }, [getBillPrefix?.length, mode]);\r\n\r\n\r\n\r\n  // Get all data from api\r\n  useState(() => {\r\n    const apiData = async () => {\r\n      {\r\n        const data = await getApiData(\"item\");\r\n        setItems([...data.data]);\r\n\r\n        const newItemData = data.data.map(d => ({ label: d.title, value: d.title }));\r\n        setItemData(newItemData);\r\n      }\r\n      {\r\n        const data = await getApiData(\"unit\");\r\n        const unit = data.data.map(d => ({ label: d.title, value: d.title }));\r\n        setUnit([...unit]);\r\n      }\r\n      {\r\n        const data = await getApiData(\"tax\");\r\n        const tax = data.data.map(d => ({ label: d.title, value: d.gst }));\r\n        setTax([...data.data]);\r\n        setTaxData([...tax]);\r\n      }\r\n      {\r\n        const data = await getApiData(\"party\");\r\n        const party = data.data.map(d => ({ label: d.name, value: d._id }));\r\n        setParty([...party]);\r\n      }\r\n      {\r\n        const data = await getApiData(\"account\")\r\n        setAccount([...data.data])\r\n      }\r\n    }\r\n\r\n    apiData();\r\n\r\n  }, [])\r\n\r\n\r\n\r\n  // When `discount type is before` and apply discount this useEffect run;\r\n  useEffect(() => {\r\n    if (formData.discountType === \"before\" && ItemRows.length > 0) {\r\n      setItemRows(prevItems =>\r\n        prevItems.map(i => {\r\n          const percentage = ((parseFloat(formData.discountAmount || 0) / parseFloat(i.price || 0) * 100)).toFixed(2);\r\n          const amount = (parseFloat(formData.discountAmount || 0) / parseFloat(prevItems.length)).toFixed(2);\r\n          return {\r\n            ...i,\r\n            discountPerPercentage: percentage,\r\n            discountPerAmount: amount,\r\n          }\r\n        })\r\n      );\r\n    }\r\n  }, [formData.discountAmount, ItemRows.length]);\r\n\r\n\r\n  const onPerDiscountAmountChange = (val, index) => {\r\n    let item = [...ItemRows];\r\n    let amount = parseFloat(item[index].price) * parseFloat(item[index].qun);\r\n    let percentage = ((parseFloat(val) / amount) * 100).toFixed(2);\r\n\r\n    if (item[index].perDiscountType !== \"percentage\" || formData.discountType === \"before\") {\r\n      item[index].discountPerAmount = isNaN(val) || val === 0 ? (0).toFixed(2) : val;\r\n      item[index].discountPerPercentage = isNaN(percentage) ? (0).toFixed(2) : percentage;\r\n    }\r\n    setItemRows(item);\r\n\r\n  }\r\n\r\n\r\n  const onPerDiscountPercentageChange = (val, index) => {\r\n    let item = [...ItemRows];\r\n    let amount = parseFloat(item[index].price) * parseFloat(item[index].qun);\r\n    // let percentage = (parseFloat(val) / amount) * 100;\r\n    let dis_amount = amount / 100 * val\r\n\r\n    if (item[index].perDiscountType !== \"amount\" || formData.discountType === \"before\") {\r\n      item[index].discountPerPercentage = val;\r\n      item[index].discountPerAmount = (dis_amount).toFixed(2);\r\n    }\r\n    setItemRows(item);\r\n\r\n  }\r\n\r\n\r\n  const calculatePerTaxAmount = (index) => {\r\n    const tax = ItemRows[index].tax / 100;\r\n    const qun = ItemRows[index].qun;\r\n    const price = ItemRows[index].price;\r\n    const disAmount = ItemRows[index].discountPerAmount;\r\n    const amount = ((qun * price) - disAmount);\r\n    const taxamount = (amount * tax).toFixed(2);\r\n\r\n    return taxamount;\r\n  }\r\n\r\n\r\n  const calculatePerAmount = (index) => {\r\n    const qun = ItemRows[index].qun;\r\n    const price = ItemRows[index].price;\r\n    const disAmount = ItemRows[index].discountPerAmount;\r\n    const totalPerAmount = parseFloat((qun * price) - disAmount) + parseFloat(calculatePerTaxAmount(index));\r\n\r\n    return (totalPerAmount).toFixed(2);\r\n  }\r\n\r\n\r\n\r\n  // Save Final Amount;\r\n  useEffect(() => {\r\n    const finalAmount = calculateFinalAmount(\r\n      additionalRows, formData, subTotal, formData.autoRoundOff,\r\n      formData.roundOffAmount, formData.roundOffType\r\n    );\r\n    setFormData((prevData) => ({\r\n      ...prevData,\r\n      finalAmount\r\n    }));\r\n  }, [ItemRows, additionalRows, formData.autoRoundOff, formData.roundOffAmount, formData.roundOffType]);\r\n\r\n\r\n\r\n  // Return Sub-Total\r\n  /*\r\n    Total Discount.\r\n    Total Tax.\r\n    Total Amount.\r\n  */\r\n  const subTotal = useCallback(() => {\r\n    const subTotal = (which) => {\r\n      let total = 0;\r\n\r\n      ItemRows.forEach((item, index) => {\r\n        if (which === \"discount\") {\r\n          if (item.discountPerAmount) {\r\n            total = (parseFloat(total) + parseFloat(item.discountPerAmount)).toFixed(2)\r\n          }\r\n        }\r\n        else if (which === \"tax\") {\r\n          total = (parseFloat(total) + parseFloat(calculatePerTaxAmount(index))).toFixed(2);\r\n        }\r\n        else if (which === \"amount\") {\r\n          total = (parseFloat(total) + parseFloat(calculatePerAmount(index))).toFixed(2);\r\n        }\r\n      })\r\n\r\n      return !isNaN(total) ? total : 0.00;\r\n\r\n    }\r\n    return subTotal;\r\n  }, [ItemRows, perPrice, perTax, perDiscount, perQun])\r\n\r\n\r\n\r\n  const onDiscountAmountChange = (e) => {\r\n    if (discountToggler !== null) {\r\n      const value = e.target.value || (0).toFixed(2);\r\n      let per = ((value / subTotal()('amount')) * 100).toFixed(2) //Get percentage\r\n      setFormData({ ...formData, discountAmount: e.target.value, discountPercentage: per });\r\n    }\r\n\r\n  }\r\n\r\n\r\n  // *Save bill\r\n  const saveBill = async () => {\r\n    if (!formData.party) {\r\n      return toast(\"Please select party\", \"error\");\r\n    } else if (!formData.salesInvoiceNumber) {\r\n      return toast(\"Please enter invoice number\", \"error\");\r\n    } else if (!formData.invoiceDate) {\r\n      return toast(\"Please select invoice date\", \"error\");\r\n    }\r\n\r\n\r\n    for (let row of ItemRows) {\r\n      if (row.itemName === \"\") {\r\n        return toast(\"Please select item\", \"error\");\r\n      } else if (row.qun === \"\") {\r\n        return toast(\"Please enter quantity\", \"error\");\r\n      } else if (row.unit === \"\") {\r\n        return toast(\"Please select unit\", \"error\");\r\n      } else if (row.price === \"\") {\r\n        return toast(\"Please enter price\", \"error\");\r\n      }\r\n    }\r\n\r\n    // Add Per Item Tax and Amound before save\r\n    ItemRows.forEach((row, index) => {\r\n      row.taxAmount = calculatePerTaxAmount(index);\r\n      row.amount = calculatePerAmount(index);\r\n    });\r\n    setItemRows([...ItemRows]);\r\n\r\n    try {\r\n      const url = process.env.REACT_APP_API_URL + \"/salesinvoice/add\";\r\n      const token = Cookies.get(\"token\");\r\n\r\n      const req = await fetch(url, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(!mode || mode !== \"edit\" ? { ...formData, token } : { ...formData, token, update: true, id: id })\r\n      })\r\n      const res = await req.json();\r\n      if (req.status !== 200 || res.err) {\r\n        return toast(res.err, 'error');\r\n      }\r\n\r\n      if (mode === \"edit\") {\r\n        toast('Invoice update successfully', 'success');\r\n        navigate(-1);\r\n        return;\r\n      }\r\n\r\n      clearForm();\r\n\r\n      // if this is converted by proforma then delete the proforma\r\n      // :::::::::::::::::::::::::::::::::::::::::::::::::::::::::\r\n      if (mode === \"convert\" && fromWhichBill === \"proforma\") {\r\n        try {\r\n          await fetch(process.env.REACT_APP_API_URL + \"/proforma/delete\", {\r\n            method: \"DELETE\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ ids: [id], trash: false })\r\n          });\r\n\r\n        } catch (error) {\r\n          console.log(\"Proforma not deleted: \" + error);\r\n        }\r\n      }\r\n\r\n      else if (mode === \"convert\" && fromWhichBill === \"quotation\") {\r\n        try {\r\n          const url = process.env.REACT_APP_API_URL + \"/quotation/add\";\r\n          await fetch(url, {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ token, id, update: true, billStatus: \"convert\" })\r\n          })\r\n\r\n        } catch (error) {\r\n          console.log(error);\r\n          return toast('Quotation status not change', 'error')\r\n        }\r\n      }\r\n\r\n\r\n      toast('Invoice add successfully', 'success');\r\n      navigate('/admin/sales-invoice')\r\n      return\r\n\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n      return toast('Something went wrong', 'error')\r\n    }\r\n\r\n  }\r\n\r\n\r\n  // *Clear form values;\r\n  const clearForm = () => {\r\n    setItemRows([itemRowSet]);\r\n    setAdditionalRow([additionalRowSet])\r\n    setFormData({\r\n      party: '', salesInvoiceNumber: '', invoiceDate: '', DueDate: '', items: ItemRows,\r\n      additionalCharge: additionalRows, note: '', terms: '',\r\n      discountType: '', discountAmount: '', discountPercentage: ''\r\n    });\r\n\r\n  }\r\n\r\n\r\n  const getInvoiceListByProductId = async (id, index) => {\r\n    try {\r\n      const url = process.env.REACT_APP_API_URL + \"/purchaseinvoice/get-item-invoice\";\r\n      const req = await fetch(url, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({ token: Cookies.get(\"token\"), itemId: id })\r\n      })\r\n      const res = await req.json();\r\n      if (req.status !== 200) {\r\n        return toast(res.err, \"warning\");\r\n      }\r\n\r\n      setItemRows((p) => {\r\n        const prevItems = [...p];\r\n        prevItems[index].itemInvoice = [];\r\n        prevItems[index].itemInvoiceList = res;\r\n\r\n        res.forEach((i, _) => {\r\n          // find index;\r\n          const invIndex = i.items.findIndex((it, _) => String(it.itemId) === String(id));\r\n\r\n          if (parseInt(i.items[invIndex].qunLeft) > 0) {\r\n            prevItems[index].qunLeft = parseInt(prevItems[index].qunLeft || 0) + parseInt(i.items[invIndex].qunLeft || 0);\r\n            prevItems[index].itemInvoice.push({\r\n              label: `${i.purchaseInvoiceNumber} \\t(Qun. ${i.items[invIndex].qunLeft} ${i.items[invIndex].selectedUnit}) \\t(Exp. ${i.items[invIndex].expireDate.split(\"T\")[0]})`,\r\n              value: i.purchaseInvoiceNumber\r\n            });\r\n          }\r\n\r\n        })\r\n\r\n        return prevItems;\r\n      })\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n      return toast(\"Invoice no get\", \"error\")\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <Nav title={mode == \"edit\" ? \"Update Sales Invoice\" : \"Add Sales Invoice\"} />\r\n      <main id='main'>\r\n        <SideNav />\r\n        <AddPartyModal open={getPartyModalState} />\r\n        <AddItemModal open={getItemModalState} />\r\n        <div className='content__body'>\r\n          <div className='content__body__main bg-white' id='addQuotationTable'>\r\n\r\n            <div className='top__btn__grp'>\r\n              <div className='extra__btns'>\r\n                {/* {mode === \"edit\" && <button onClick={() => {\r\n                  swal({\r\n                    title: \"Are you sure?\",\r\n                    icon: \"warning\",\r\n                    buttons: true,\r\n                  })\r\n                    .then((cnv) => {\r\n                      if (cnv) {\r\n                        swal(\"Invoice successfully duplicate\", {\r\n                          icon: \"success\",\r\n                        });\r\n                        navigate(`/admin/sales-invoice/add/${id}`)\r\n                      }\r\n                    });\r\n                }}><Icons.COPY />Duplicate invoice</button>} */}\r\n                {/* <button onClick={saveBill}><Icons.CHECK />{mode ? \"Update\" : \"Save\"}</button> */}\r\n              </div>\r\n            </div>\r\n\r\n            <div className='flex flex-col lg:flex-row items-center justify-around gap-4'>\r\n              <div className='flex flex-col gap-2 w-full'>\r\n                <p className='text-xs'>Select Party <span className='required__text'>*</span></p>\r\n                <MySelect2\r\n                  model={\"party\"}\r\n                  partyType={\"customer\"}\r\n                  onType={(v) => {\r\n                    setFormData({ ...formData, party: v })\r\n                  }}\r\n                  value={formData.party?._id}\r\n                />\r\n              </div>\r\n              <div className='flex flex-col gap-2 w-full lg:w-1/2'>\r\n                <p className='text-xs'>Sales Invoice Number <span className='required__text'>*</span></p>\r\n                <input type=\"text\"\r\n                  onChange={(e) => setFormData({ ...formData, salesInvoiceNumber: e.target.value })}\r\n                  value={formData.salesInvoiceNumber || \"\"}\r\n                />\r\n              </div>\r\n              <div className='flex flex-col gap-2 w-full lg:w-1/2'>\r\n                <p className='text-xs'>Invoice Date <span className='required__text'>*</span></p>\r\n                <input type=\"date\"\r\n                  onChange={(e) => {\r\n                    setFormData({ ...formData, invoiceDate: e.target.value })\r\n                  }}\r\n                  value={formData.invoiceDate || \"\"}\r\n                />\r\n              </div>\r\n              <div className='flex flex-col gap-2 w-full lg:w-1/2'>\r\n                <p className='text-xs'>Due Date</p>\r\n                <input type=\"date\"\r\n                  onChange={(e) => {\r\n                    setFormData({ ...formData, DueDate: e.target.value })\r\n                  }}\r\n                  value={formData.DueDate}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className='overflow-x-auto rounded'>\r\n              <table className='add__table min-w-full table-style'>\r\n                <thead >\r\n                  <tr>\r\n                    <th style={{ \"width\": \"*\" }}>Item</th>\r\n                    <th style={{ \"width\": \"6%\" }}>HSN/SAC</th>\r\n                    <th style={{ \"width\": \"5%\" }}>QTY</th>\r\n                    <th style={{ \"width\": \"7%\" }}>Unit</th>\r\n                    <th style={{ \"width\": \"10%\" }}>Price/Item</th>\r\n                    <th style={{ \"width\": \"10%\" }}>Discount</th>\r\n                    <th style={{ \"width\": \"10%\" }}>Tax</th>\r\n                    <th style={{ \"width\": \"10%\" }}>Amount</th>\r\n                    <th style={{ \"width\": \"3%\" }}></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {ItemRows.map((i, index) => (\r\n                    <tr key={i.rowItem} className='border-b' onClick={(e) => {\r\n                      activeRowIndexRef.current = index;\r\n                    }}>\r\n\r\n                      {/* Item name and description */}\r\n                      <td>\r\n                        <div className='flex flex-col gap-2'>\r\n                          <MySelect2\r\n                            model={\"item\"}\r\n                            onType={(v) => {\r\n                              onItemChange(v, index, tax, ItemRows, setItemRows, setItems, 'sale');\r\n                              if (v) {\r\n                                getInvoiceListByProductId(v, index);\r\n                              } else {\r\n                                setItemRows((p) => {\r\n                                  const prevItems = [...p];\r\n                                  prevItems[index].itemInvoice = []\r\n                                  return prevItems;\r\n                                })\r\n                              }\r\n                            }}\r\n                            value={ItemRows[index].itemId}\r\n                          />\r\n                          <TagPicker\r\n                            data={ItemRows[index].itemInvoice}\r\n                            onChange={(v) => {\r\n                              setItemRows((p) => {\r\n                                const prevItems = [...p];\r\n\r\n                                v.forEach((inv, _) => {\r\n                                  const invoiceData = prevItems[index].itemInvoiceList.find((i, _) => i.purchaseInvoiceNumber === inv);\r\n                                  prevItems[index].qunLeft = parseInt(prevItems[index].qunLeft || 0) + parseInt(invoiceData.items[0].qunLeft || 0);\r\n                                })\r\n\r\n                                return prevItems;\r\n                              })\r\n                            }}\r\n                          />\r\n                          <input type='text' className='input-style' placeholder='Description'\r\n                            onChange={(e) => {\r\n                              let item = [...ItemRows];\r\n                              item[index].description = e.target.value;\r\n                              setItemRows(item);\r\n                            }}\r\n                            value={ItemRows[index].description}\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <input type='text' className='w-[70px] input-style'\r\n                          onChange={(e) => {\r\n                            let item = [...ItemRows];\r\n                            item[index].hsn = e.target.value;\r\n                            setItemRows(item);\r\n                          }}\r\n                          value={ItemRows[index].hsn}\r\n                        />\r\n                      </td>\r\n                      <td>\r\n                        <input type='text' className='input-style'\r\n                          onChange={(e) => {\r\n                            if (parseInt(e.target.value) > ItemRows[index].qunLeft) {\r\n                              return toast(\"Insufficient stock\", 'warning')\r\n                            }\r\n\r\n                            let item = [...ItemRows];\r\n                            item[index].qun = e.target.value;\r\n                            setItemRows(item);\r\n                            setPerQun(e.target.value);\r\n                            if (formData.discountType !== \"before\") {\r\n                            }\r\n                            onPerDiscountPercentageChange(formData.items[index].discountPerPercentage, index);\r\n                            onPerDiscountAmountChange(formData.items[index].discountPerAmount, index);\r\n                          }}\r\n                          value={ItemRows[index].qun}\r\n                        />\r\n                      </td>\r\n                      <td>\r\n                        <select className='input-style'\r\n                          onChange={(e) => {\r\n                            let item = [...ItemRows];\r\n                            item[index].selectedUnit = e.target.value;\r\n                            setItemRows(item);\r\n                          }}\r\n                          value={ItemRows[index].selectedUnit}\r\n                        >\r\n                          {\r\n                            ItemRows[index].unit.map((u, _) => {\r\n                              return <option key={_} value={u}>{u}</option>\r\n                            })\r\n                          }\r\n                        </select>\r\n                      </td>\r\n                      <td align='center'>\r\n                        <div>\r\n                          <input type='text' className='input-style'\r\n                            onChange={(e) => {\r\n                              let item = [...ItemRows];\r\n                              item[index].price = e.target.value;\r\n                              setItemRows(item);\r\n                              setPerPrice(e.target.value);\r\n                              if (formData.discountType !== \"before\") {\r\n                              }\r\n                              onPerDiscountPercentageChange(formData.items[index].discountPerPercentage, index);\r\n                              onPerDiscountAmountChange(formData.items[index].discountPerAmount, index);\r\n                            }}\r\n                            value={ItemRows[index].price}\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                      <td> {/** Discount amount and percentage */}\r\n                        <div className={`w-[100px] flex flex-col gap-2 items-center`} >\r\n                          <div className='add-table-discount-input'>\r\n                            <input type=\"text\"\r\n                              className={`${formData.discountType === 'before' ? 'bg-gray-100' : ''} `}\r\n                              onChange={formData.discountType !== 'before' ? (e) => {\r\n                                let form = { ...formData };\r\n                                form.items[index].perDiscountType = 'amount';\r\n                                setFormData({ ...form });\r\n                                onPerDiscountAmountChange(e.target.value, index)\r\n                              } : null}\r\n                              value={ItemRows[index].discountPerAmount}\r\n                            // value={calculatePerDiscountAmount(index)}\r\n                            />\r\n                            <div><Icons.RUPES /></div>\r\n                          </div>\r\n                          <div className='add-table-discount-input' >\r\n                            <input type=\"text\"\r\n                              className={`${formData.discountType === 'before' ? 'bg-gray-100' : ''} `}\r\n                              onChange={formData.discountType !== 'before' ? (e) => {\r\n                                let form = { ...formData };\r\n                                form.items[index].perDiscountType = 'percentage';\r\n                                setFormData({ ...form });\r\n                                onPerDiscountPercentageChange(e.target.value, index)\r\n                              } : null}\r\n                              value={ItemRows[index].discountPerPercentage}\r\n                            // value={calculatePerDiscountPercentage(index)}\r\n                            />\r\n                            <div>%</div>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td> {/** Tax and Taxamount */}\r\n                        <div className='flex flex-col gap-2'>\r\n                          <SelectPicker\r\n                            onChange={(v) => {\r\n                              let item = [...ItemRows];\r\n                              item[index].tax = v;\r\n                              setItemRows(item);\r\n                              setPerTax('')\r\n                            }}\r\n                            value={ItemRows[index].tax}\r\n                            data={taxData}\r\n                          />\r\n                          <input type=\"text\"\r\n                            onChange={(e) => {\r\n                              let item = [...ItemRows];\r\n                              item[index].taxAmount = e.target.value;\r\n                              setItemRows(item);\r\n                            }}\r\n                            value={calculatePerTaxAmount(index)}\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                      <td align='center'>\r\n                        <div>\r\n                          <input type=\"text\"\r\n                            value={calculatePerAmount(index)}\r\n                            className='bg-gray-100 custom-disabled'\r\n                            disabled\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                      <td align='center' className='w-[20px]'>\r\n                        <Icons.DELETE\r\n                          className='cursor-pointer text-[16px]'\r\n                          onClick={() => ItemRows.length > 1 && deleteItem(1, index, setItemRows, setFormData, setAdditionalRow)}\r\n                        />\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n                <tfoot>\r\n                  <tr>\r\n                    <td colSpan={9}>\r\n                      <Button\r\n                        color='blue' className='float-right w-full font-bold'\r\n                        onClick={() => addItem(1, itemRowSet, setItemRows, setFormData, additionalRowSet, setAdditionalRow)}\r\n                      >\r\n                        <Icons.ADD_LIST className='text-lg mr-1' />\r\n                        Add Item\r\n                      </Button>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td colSpan={5} align='right'>\r\n                      <p className='py-2 font-bold'>Sub-Total</p>\r\n                    </td>\r\n                    <td>{subTotal()('discount')}</td>\r\n                    <td>{subTotal()('tax')}</td>\r\n                    <td>{subTotal()('amount')}</td>\r\n                  </tr>\r\n                </tfoot>\r\n              </table>\r\n            </div>\r\n            {/* --------- Tax amount table ------- */}\r\n            <div className='overflow-x-auto rounded' id='taxAmountTable'>\r\n              <table className='table-style w-full'>\r\n                <thead>\r\n                  <tr>\r\n                    <td className='font-bold'>Total Taxable Amount</td>\r\n                    <td className='font-bold'>Total Tax Amount</td>\r\n                    <td>\r\n                      <span className='font-bold mr-1'>Discount Type</span>\r\n                      <span>(Additional)</span>\r\n                    </td>\r\n                    <td>\r\n                      <span className='font-bold mr-1'>Discount Amount</span>\r\n                      <span>(Additional)</span>\r\n                    </td>\r\n                    <td>\r\n                      <span className='font-bold mr-1'>Discount Percentage</span>\r\n                      <span>(Additional)</span>\r\n                    </td>\r\n                    <td className='font-bold'>Total Amount</td>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td className='min-w-[150px]'>\r\n                      <input type=\"text\" name=\"total_taxable_amount\"\r\n                        value={(subTotal()('amount') - subTotal()('tax')).toFixed(2)}\r\n                        className='bg-gray-100 custom-disabled'\r\n                        disabled\r\n                      />\r\n                    </td>\r\n                    <td className='min-w-[150px]'>\r\n                      <input type=\"text\" name='total_tax_amount'\r\n                        value={subTotal()('tax')}\r\n                        className='bg-gray-100 custom-disabled'\r\n                        disabled\r\n                      />\r\n                    </td>\r\n                    <td className='min-w-[180px]'>\r\n                      <select name=\"discount_type\" value={formData.discountType} onChange={(e) => {\r\n                        changeDiscountType(e, ItemRows, formData, setFormData, setDiscountToggler, toast)\r\n                      }}>\r\n                        <option value=\"no\">No Discount</option>\r\n                        <option value=\"before\">Before Tax</option>\r\n                        <option value=\"after\">After Tax</option>\r\n                      </select>\r\n                    </td>\r\n\r\n                    <td className='min-w-[180px]'>\r\n                      <div className='add-table-discount-input' >\r\n                        <input\r\n                          id='discountAmount'\r\n                          type=\"text\"\r\n                          className={`${discountToggler ? 'bg-gray-100 custom-disabled' : ''}`}\r\n                          disabled={discountToggler ? true : false}\r\n                          onChange={(e) => discountToggler ? null : onDiscountAmountChange(e)}\r\n                          value={formData.discountAmount}\r\n                        />\r\n                        <div><Icons.RUPES /></div>\r\n                      </div>\r\n                    </td>\r\n                    <td className='min-w-[200px]'>\r\n                      <div className='add-table-discount-input'>\r\n                        <input\r\n                          type=\"text\"\r\n                          id='discountPercentage'\r\n                          className={`${discountToggler ? 'bg-gray-100 custom-disabled' : ''}`}\r\n                          disabled={discountToggler ? true : false}\r\n                          onChange={discountToggler ? null : (e) => {\r\n                            let amount = ((subTotal()('amount') / 100) * e.target.value).toFixed(2);\r\n                            setFormData({\r\n                              ...formData, discountPercentage: e.target.value, discountAmount: amount,\r\n                            })\r\n\r\n                            if (formData.discountType === \"before\") {\r\n                              let items = [...ItemRows];\r\n                              items.forEach((i, _) => {\r\n                                // i.discountPerAmount = amount / parseFloat(items.length);\r\n                                i.discountPerPercentage = e.target.value;\r\n                              })\r\n\r\n                              setItemRows([...items]);\r\n                            }\r\n                          }}\r\n                          value={formData.discountPercentage}\r\n                        />\r\n                        <div>%</div>\r\n                      </div>\r\n                    </td>\r\n                    <td className='min-w-[150px]'>\r\n                      <input type=\"text\" name=\"total_amount\"\r\n                        className='bg-gray-100 custom-disabled'\r\n                        disabled\r\n                        value={subTotal()('amount')}\r\n                        onChange={null}\r\n                      />\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            {/* ------- Note and Additional charges ------- */}\r\n            <div className='w-full flex flex-col lg:flex-row justify-between gap-4 mt-3'>\r\n              <div className='flex flex-col w-full gap-3'>\r\n                <div>\r\n                  <p>Note: </p>\r\n                  <input type=\"text\"\r\n                    onChange={(e) => setFormData({ ...formData, note: e.target.value })}\r\n                    value={formData.note}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <p>Terms:</p>\r\n                  <input type=\"text\"\r\n                    onChange={(e) => setFormData({ ...formData, terms: e.target.value })}\r\n                    value={formData.terms}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <p>Payment Status:</p>\r\n                  <select\r\n                    onChange={(e) => {\r\n                      setFormData({ ...formData, paymentStatus: e.target.value })\r\n                    }}\r\n                    value={formData.paymentStatus}\r\n                  >\r\n                    <option value=\"0\">Not Paid</option>\r\n                    <option value=\"1\">Full Paid</option>\r\n                    <option value=\"2\">Partial Paid</option>\r\n                  </select>\r\n                </div>\r\n                {\r\n                  formData.paymentStatus === \"1\" || formData.paymentStatus === \"2\" ?\r\n                    <div className='flex items-center gap-2'>\r\n                      <div className='w-full'>\r\n                        <p>Amount:</p>\r\n                        <input type=\"text\"\r\n                          onChange={(e) => setFormData({ ...formData, paymentAmount: e.target.value })}\r\n                          value={formData.paymentAmount}\r\n                        />\r\n                      </div>\r\n\r\n                      <div className='w-full'>\r\n                        <p>Select Account:</p>\r\n                        <select\r\n                          onChange={(e) => {\r\n                            setFormData({ ...formData, paymentAccount: e.target.value })\r\n                          }}\r\n                          value={formData.paymentAccount}\r\n                        >\r\n                          <option value=\"\">--Select Account--</option>\r\n                          {\r\n                            account.map((a, _) => {\r\n                              return <option value={a._id} key={_}>{a.title}</option>\r\n                            })\r\n                          }\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                    : null\r\n                }\r\n              </div>\r\n              <div className='w-full'>\r\n                <div className='uppercase font-bold border border-dashed p-2 rounded'>\r\n                  Additional Charges\r\n                </div>\r\n                <div className='overflow-x-auto rounded mt-3' id='addtionalChargeTable'>\r\n                  <table className='table-style w-full'>\r\n                    <thead className='bg-gray-100'>\r\n                      <tr>\r\n                        <td>Particular</td>\r\n                        <td>Amount</td>\r\n                        <td>Actions</td>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {\r\n                        additionalRows.map((i, index) => (\r\n                          <tr key={i.additionalRowsItem}>\r\n                            <td>\r\n                              <input type=\"text\"\r\n                                onChange={(e) => {\r\n                                  let item = [...additionalRows];\r\n                                  item[index].particular = e.target.value;\r\n                                  setAdditionalRow(item);\r\n                                }}\r\n                                value={additionalRows[index].particular}\r\n                              />\r\n                            </td>\r\n                            <td>\r\n                              <input type=\"text\"\r\n                                onChange={(e) => {\r\n                                  let item = [...additionalRows];\r\n                                  item[index].amount = e.target.value;\r\n                                  setAdditionalRow(item);\r\n                                }}\r\n                                value={additionalRows[index].amount}\r\n                              />\r\n                            </td>\r\n                            <td align='center'>\r\n                              <Icons.DELETE\r\n                                className='cursor-pointer text-lg'\r\n                                onClick={() => deleteItem(2, index, setItemRows, setFormData, setAdditionalRow)}\r\n                              />\r\n                            </td>\r\n                          </tr>\r\n                        ))\r\n                      }\r\n                    </tbody>\r\n                    <tfoot>\r\n                      <tr>\r\n                        <td colSpan={3}>\r\n                          <Button color='blue' className='float-right w-full font-bold' onClick={() => addItem(2, itemRowSet, setItemRows, setFormData, additionalRowSet, setAdditionalRow)}>\r\n                            <Icons.ADD_LIST className='text-lg mr-1' />\r\n                            Add Item\r\n                          </Button>\r\n                        </td>\r\n                      </tr>\r\n                    </tfoot>\r\n                  </table>\r\n                </div>\r\n                {/* Round Off Section */}\r\n                <div className='flex justify-between items-center w-full mt-4 round__off__section'>\r\n                  <div className='flex items-center gap-1'>\r\n                    <input type=\"checkbox\"\r\n                      onChange={(e) => setFormData({ ...formData, autoRoundOff: e.target.checked })}\r\n                      checked={formData.autoRoundOff}\r\n                    />\r\n                    <p>Auto Round Off</p>\r\n                  </div>\r\n\r\n                  {!formData.autoRoundOff && <div>\r\n                    <div className='flex items-center text-sm'>\r\n                      <button\r\n                        onClick={() => {\r\n                          setFormData({ ...formData, roundOffType: '1' })\r\n                        }}\r\n                        className={`flex items-center text-[10px] border ${formData.roundOffType === \"1\" ? 'border-blue-700' : ''} p-[2px]`}>\r\n                        Add <span>(+)</span>\r\n                      </button>\r\n                      <input type=\"text\" className='w-[100px]'\r\n                        value={formData.roundOffAmount}\r\n                        onChange={(e) => setFormData({ ...formData, roundOffAmount: e.target.value })}\r\n                      />\r\n                      <button\r\n                        onClick={() => {\r\n                          setFormData({ ...formData, roundOffType: '0' })\r\n                        }}\r\n                        className={`flex items-center text-[10px] border ${formData.roundOffType === \"0\" ? 'border-blue-700' : ''} p-[2px]`}>\r\n                        Reduce <span>(-)</span>\r\n                      </button>\r\n                    </div>\r\n                  </div>}\r\n                </div>\r\n\r\n                <p className='font-bold mt-4 mb-2'>Final Amount</p>\r\n                <input type=\"text\" name=\"final_amount\"\r\n                  className='bg-gray-100 custom-disabled w-full'\r\n                  disabled\r\n                  value={formData.finalAmount}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className='w-full flex justify-center gap-3 my-3 mt-5'>\r\n              <button\r\n                onClick={saveBill}\r\n                className='add-bill-btn'>\r\n                <Icons.CHECK />\r\n                {!mode || mode === \"convert\" ? \"Save\" : \"Update\"}\r\n              </button>\r\n              <button className='reset-bill-btn' onClick={clearForm}>\r\n                <Icons.RESET />\r\n                Reset\r\n              </button>\r\n            </div>\r\n\r\n          </div>\r\n          {/* Content Body Main Close */}\r\n        </div>\r\n        {/* Content Body Close */}\r\n      </main>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SalesInvoice;\r\n"],"names":["_ref","open","dispatch","useDispatch","_jsx","className","children","_jsxs","Modal","size","onClose","toggle","window","location","reload","Header","Body","AddItemComponent","type","userData","useSelector","state","userDetail","activeCompany","companies","i","_id","invoiceInitial","invoiceNextCount","poInitial","poNextCount","proformaInitial","proformaNextCount","quotationInitial","quotationCount","creditNoteInitial","creditNoteCount","salesReturnInitial","salesReturnCount","deliverChalanInitial","deliveryChalanCount","purchaseInitial","purchaseNextCount","useFormHandle","getApiData","useApi","calculatePerTaxAmount","index","ItemRows","tax","qun","price","discountPerAmount","toFixed","onItemChange","async","value","setItemRows","setItems","invType","_ItemRows$index","itemId","selectedItem","data","filter","length","_selectedItem$","_selectedItem$$catego","_selectedItem$2","_selectedItem$3","_selectedItem$4","_selectedItem$5","_selectedItem$5$categ","_selectedItem$6","_selectedItem$7","_selectedItem$8","_selectedItem$9","_selectedItem$10","_selectedItem$10$unit","_getTax$gst","_selectedItem$11","item","console","log","currentUnit","taxId","category","getTax","t","_","itemName","title","hsn","unit","salePrice","purchasePrice","selectedUnit","gst","forEach","u","push","addItem","which","itemRowSet","setFormData","additionalRowSet","setAdditionalRow","prevItemRows","newItem","_objectSpread","rowItem","updatedItems","prev","items","prevAdditionalRows","newAdditionalRow","additionalRowsItem","updatedAdditionalRows","additionalCharge","deleteItem","ItemId","changeDiscountType","e","formData","setDiscountToggler","toast","target","some","field","parseInt","discountType","pv","discountAmount","discountPercentage","calculateFinalAmount","additionalRows","subTotal","autoRoundOff","arguments","undefined","roundOffAmount","roundOffType","totalParticular","total","d","amount","parseFloat","isNaN","final","onPerDiscountAmountChange","val","percentage","perDiscountType","discountPerPercentage","onPerDiscountPercentageChange","dis_amount","calculatePerAmount","disAmount","onDiscountAmountChange","discountToggler","per","document","_location$state","_formData$party","mode","useMyToaster","id","useParams","getBillPrefix","useBillPrefix","getPartyModalState","store","partyModalSlice","show","getItemModalState","itemModalSlice","navigate","useNavigate","description","qunLeft","taxAmount","itemInvoice","itemInvoiceList","scaneItemCodeValue","particular","useState","party","salesInvoiceNumber","invoiceDate","Date","toISOString","split","DueDate","note","terms","paymentStatus","paymentAccount","finalAmount","paymentAmount","fromWhichBill","useLocation","activeRowIndexRef","useRef","perPrice","setPerPrice","perTax","setPerTax","perDiscount","setPerDiscount","perQun","setPerQun","setUnit","setTax","setParty","account","setAccount","itemData","setItemData","taxData","setTaxData","useEffect","buffer","lastTime","handler","now","key","scannedCode","_data$data","scannedId","existIndex","findIndex","row","String","updated","Number","current","newRow","newRows","newIndex","addEventListener","removeEventListener","get","url","concat","process","cookie","Cookies","req","fetch","method","headers","body","JSON","stringify","token","res","json","removeProformaNumber","proformaNumber","cleanedData","error","newItemData","map","label","name","apiData","prevItems","prevData","useCallback","clearForm","_Fragment","Nav","SideNav","AddPartyModal","AddItemModal","MySelect2","model","partyType","onType","v","onChange","style","onClick","status","err","p","invIndex","it","purchaseInvoiceNumber","expireDate","getInvoiceListByProductId","TagPicker","inv","invoiceData","find","placeholder","align","form","Icons","RUPES","SelectPicker","disabled","DELETE","colSpan","Button","color","ADD_LIST","a","checked","update","ids","trash","billStatus","CHECK","RESET"],"sourceRoot":""}