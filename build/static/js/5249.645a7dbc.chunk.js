/*! For license information please see 5249.645a7dbc.chunk.js.LICENSE.txt */
(self.webpackChunkclient=self.webpackChunkclient||[]).push([[5249],{99679:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});s(65043);var l=s(70579);const n=()=>(0,l.jsx)("div",{class:"w-4 h-4 border-2 border-t-transparent border-white rounded-full animate-spin"})},36615:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var l=s(64363);const n=async e=>{let t="";try{const s=await(0,l.x8)(e).toBlob();t=URL.createObjectURL(s);const n=await fetch(t),a=await n.blob(),i=window.URL.createObjectURL(a),r=document.createElement("a");r.href=i,r.download="data-".concat(Date.now(),".pdf"),r.click()}catch(s){console.error("Error in download process:",s)}finally{t&&URL.revokeObjectURL(t)}}},30989:(e,t,s)=>{"use strict";s.r(t),s.d(t,{InvoicePdf:()=>k,default:()=>P});var l=s(89379),n=s(65043),a=s(60184),i=s(66580),r=s(1880),o=s(75206),d=s(86319),c=s(74926),u=s(64363),x=s(36615),h=s(9435),m=s(75105),p=s(94461),j=s(83003),v=s(99679),y=s(89698),b=s(70579);const g=e=>{let{open:t,pdf:s,email:a}=e;const[i,o]=(0,n.useState)({subject:"",body:""}),d=(0,h.A)(),[c,u]=(0,n.useState)(!1),x=(0,j.wA)();return(0,b.jsx)("div",{className:"mail__modal",children:(0,b.jsxs)(m.A,{open:t,onClose:()=>{x((0,p.L$)(!1))},children:[(0,b.jsx)(m.A.Header,{children:(0,b.jsx)("p",{className:"text-xl font-bold",children:"Mail"})}),(0,b.jsxs)(m.A.Body,{className:"flex flex-col gap-2 mail__body",children:[(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("p",{children:"To"}),(0,b.jsx)("input",{type:"text",value:a,onChange:null})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{children:"Subject"}),(0,b.jsx)("input",{type:"email",value:i.subject,onChange:e=>o((0,l.A)((0,l.A)({},i),{},{subject:e.target.value}))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{children:"Message"}),(0,b.jsx)("textarea",{rows:5,value:i.body,onChange:e=>o((0,l.A)((0,l.A)({},i),{},{body:e.target.value}))})]})]}),(0,b.jsx)(m.A.Footer,{children:(0,b.jsxs)("button",{onClick:async()=>{if(""===i.subject||""===i.body||""===s)return d("Please fill all fields","error");try{u(!0);const e="https://ezy-bill-api.tisindia.net/api/v1/user/send-bill",t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r.A.get("token"),data:s,email:a,subject:i.subject,body:i.body})}),l=await t.json();return u(!1),console.log(l),200===t.status||l.send?(o({subject:"",body:""}),x((0,p.L$)(!1)),d("Email sent successfully","success")):d("Email not sent","error")}catch(e){console.log(e),u(!1),d("Mail not send","error")}},className:"flex items-center gap-1 bg-orange-600 text-white rounded-[5px] p-2",children:[c?(0,b.jsx)(v.A,{}):(0,b.jsx)(y.Qv8,{}),"Send"]})})]})})};var f=s(7801),N=s(96685),S=s(96074),w=s(6720),A=s(50423),I=s(3538),C=s(73023),T=s.n(C),E=s(53435),_=s(3601),D=s(37614);document.title="Invoice";const k=e=>{var t;let{companyDetails:s,billData:l,billDetails:n,hsnData:a,totalAmountInText:i,billname:r}=e;const o=u.vv.create({page:{padding:20},section:{marginBottom:0},bold:{fontWeight:"bold"},flexRow:{flexDirection:"row"},flexCol:{flexDirection:"column"},border:{border:"1px solid black"},table:{display:"table",width:"auto"},tableRow:{flexDirection:"row"},tableCol:{borderBottom:"1px solid black",padding:2,borderRight:"0px solid black",borderLeft:"1px solid black"},header:{backgroundColor:"#f0f0f0"},textSmall:{fontSize:10},textXSmall:{fontSize:5},partyText:{paddingTop:3,paddingBottom:3}});return(0,b.jsx)(u.yo,{children:(0,b.jsxs)(u.YW,{size:"A4",style:o.page,children:[(0,b.jsxs)(u.Ss,{style:o.section,children:[(0,b.jsx)(u.EY,{style:[o.bold,{marginBottom:10,textAlign:"center"}],children:r}),(0,b.jsxs)(u.Ss,{style:[o.border,{borderBottomWidth:0}],children:[(0,b.jsxs)(u.Ss,{style:[o.flexRow,{borderBottom:"1px solid black",height:90}],children:[(0,b.jsxs)(u.Ss,{style:{width:"60%",padding:10,flexDirection:"row",borderRight:"1px solid black"},children:[(0,b.jsx)(u._V,{src:null===s||void 0===s?void 0:s.invoiceLogo,style:{height:35,marginRight:10,marginTop:15}}),(0,b.jsxs)(u.Ss,{style:[o.flexCol,o.textSmall],children:[(0,b.jsx)(u.EY,{style:[{color:"#2202D0",fontWeight:"800",fontSize:14},o.partyText],children:null===s||void 0===s?void 0:s.name}),(0,b.jsx)(u.EY,{style:o.partyText,children:null===s||void 0===s?void 0:s.address}),(0,b.jsxs)(u.EY,{style:[o.bold,o.partyText],children:["GSTIN: ",null===s||void 0===s?void 0:s.gst]}),(0,b.jsxs)(u.EY,{style:[o.bold,o.partyText],children:["Mobile: ",null===s||void 0===s?void 0:s.phone]}),(0,b.jsxs)(u.EY,{style:o.partyText,children:[(0,b.jsx)(u.EY,{style:[o.bold],children:"PAN Number:"})," ",null===s||void 0===s?void 0:s.pan]})]})]}),(0,b.jsxs)(u.Ss,{style:[o.flexCol,{width:"40%",padding:10,justifyContent:"center"},o.textSmall],children:[(0,b.jsxs)(u.EY,{style:o.partyText,children:[(0,b.jsxs)(u.EY,{style:o.bold,children:[r," No: "]}),(null===l||void 0===l?void 0:l.quotationNumber)||(null===l||void 0===l?void 0:l.proformaNumber)||(null===l||void 0===l?void 0:l.poNumber)||(null===l||void 0===l?void 0:l.purchaseInvoiceNumber)||(null===l||void 0===l?void 0:l.purchaseReturnNumber)||(null===l||void 0===l?void 0:l.debitNoteNumber)||(null===l||void 0===l?void 0:l.salesInvoiceNumber)||(null===l||void 0===l?void 0:l.salesReturnNumber)||(null===l||void 0===l?void 0:l.creditNoteNumber)||(null===l||void 0===l?void 0:l.deliveryChalanNumber)]}),(0,b.jsxs)(u.EY,{style:o.partyText,children:[(0,b.jsxs)(u.EY,{style:o.bold,children:[r," Date: "]}),"  ",new Date((null===l||void 0===l?void 0:l.estimateDate)||(null===l||void 0===l?void 0:l.invoiceDate)||(null===l||void 0===l?void 0:l.debitNoteDate)||(null===l||void 0===l?void 0:l.returnDate)||(null===l||void 0===l?void 0:l.poDate)||(null===l||void 0===l?void 0:l.purchaseInvoiceDate)||(null===l||void 0===l?void 0:l.creditNoteDate)||(null===l||void 0===l?void 0:l.purchaseReturnDate)||(null===l||void 0===l?void 0:l.chalanDate)).toLocaleDateString()]})]})]}),(0,b.jsxs)(u.Ss,{style:{padding:10},children:[(0,b.jsx)(u.EY,{style:[o.textSmall,o.partyText],children:"TO"}),(0,b.jsx)(u.EY,{style:[o.bold,o.textSmall,o.partyText],children:null===l||void 0===l||null===(t=l.party.name)||void 0===t?void 0:t.toUpperCase()}),(0,b.jsxs)(u.EY,{style:[o.textSmall,o.partyText,{flexWrap:"wrap"}],children:[(0,b.jsx)(u.EY,{children:"Address:"})," ",null===l||void 0===l?void 0:l.party.address]}),(0,b.jsxs)(u.EY,{style:[o.textSmall,o.partyText,{textTransform:"uppercase"}],children:[(0,b.jsx)(u.EY,{children:"GSTIN:"})," ",null===l||void 0===l?void 0:l.party.gst,(0,b.jsx)(u.EY,{children:" State:"})," ",null===l||void 0===l?void 0:l.party.state]})]})]})]}),(0,b.jsxs)(u.Ss,{style:[o.table,{borderTop:"1px solid black",borderRight:"1px solid black"}],children:[(0,b.jsx)(u.Ss,{style:[o.tableRow,o.header],children:["S.NO.","ITEM","HSN/SAC","QTY.","RATE","DISCOUNT","TAX","AMOUNT"].map(((e,t)=>(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:1===t?"30%":"10%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:e})},t)))}),null===l||void 0===l?void 0:l.items.map(((e,t)=>(0,b.jsxs)(u.Ss,{style:[o.tableRow],children:[(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"10%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:t+1})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"30%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:e.itemName})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"10%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:e.hsn})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"10%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:e.qun})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"10%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:e.price})}),(0,b.jsxs)(u.Ss,{style:[o.tableCol,{width:"10%"}],children:[(0,b.jsx)(u.EY,{style:o.textSmall,children:e.discountPerAmount||"0.00"}),(0,b.jsx)(u.EY,{style:[o.textSmall,{color:"#666"}],children:isNaN(parseFloat(e.discountPerAmount)/(parseFloat(e.price)*parseFloat(e.qun))*100)?"(0.00%)":"(".concat((parseFloat(e.discountPerAmount)/(parseFloat(e.price)*parseFloat(e.qun))*100).toFixed(2),"%)")})]}),(0,b.jsxs)(u.Ss,{style:[o.tableCol,{width:"10%"}],children:[(0,b.jsx)(u.EY,{style:o.textSmall,children:(e.qun*e.price/100*e.tax).toFixed(2)}),(0,b.jsx)(u.EY,{style:[o.textSmall,{color:"#666"}],children:"(".concat(e.tax||"0.00","%)")})]}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"10%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:(parseFloat(e.price)*parseFloat(e.qun)-parseFloat(e.discountPerAmount||0)+e.qun*e.price/100*e.tax).toFixed(2)})})]},t))),(0,b.jsxs)(u.Ss,{style:[o.tableRow,o.bold,{backgroundColor:"#F3F4F6"}],children:[(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"50%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:"TOTAL"})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"10%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:n.qun})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"10%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"10%"}],children:(0,b.jsxs)(u.EY,{style:o.textSmall,children:["INR. ",n.discount]})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"10%"}],children:(0,b.jsxs)(u.EY,{style:o.textSmall,children:["INR. ",n.taxAmount]})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"10%"}],children:(0,b.jsxs)(u.EY,{style:o.textSmall,children:["INR. ",n.amount]})})]})]}),(0,b.jsxs)(u.Ss,{style:[o.table,{marginTop:10,borderTop:"1px solid black",borderRight:"1px solid black"}],children:[(0,b.jsx)(u.Ss,{style:[o.tableRow,o.header],children:["HSN Code","Tax Type","Rate","Amount","Total Tax Amount"].map(((e,t)=>(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"20%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:e})},t)))}),a&&[...new Map(a.map((e=>[e.hsn,e])))].map(((e,t)=>{let[s,l]=e;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(u.Ss,{style:o.tableRow,children:[(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"20%",borderBottom:"0"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:l.hsn})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"20%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:"SGST"})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"20%"}],children:(0,b.jsxs)(u.EY,{style:o.textSmall,children:[l.rate/2,"%"]})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"20%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:l.price})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"20%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:l.taxAmount.toFixed(2)})})]},"".concat(t,"-sgst")),(0,b.jsxs)(u.Ss,{style:o.tableRow,children:[(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"20%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"20%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:"CGST"})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"20%"}],children:(0,b.jsxs)(u.EY,{style:o.textSmall,children:[l.rate/2,"%"]})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"20%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:l.price})}),(0,b.jsx)(u.Ss,{style:[o.tableCol,{width:"20%"}],children:(0,b.jsx)(u.EY,{style:o.textSmall,children:l.taxAmount.toFixed(2)})})]},"".concat(t,"-cgst"))]})}))]}),(0,b.jsxs)(u.Ss,{style:[o.border,{marginTop:10}],children:[(0,b.jsx)(u.Ss,{style:{borderBottom:"1px solid black",padding:3},children:(0,b.jsxs)(u.EY,{style:o.textSmall,children:[(0,b.jsx)(u.EY,{style:o.bold,children:"Total Amount (in words) :"})," ",i]})}),(0,b.jsxs)(u.Ss,{style:o.flexRow,children:[(0,b.jsxs)(u.Ss,{style:{width:"50%",padding:5},children:[(0,b.jsx)(u.EY,{style:o.textSmall,children:"Note:"}),(0,b.jsx)(u.EY,{style:o.textSmall,children:null===l||void 0===l?void 0:l.note}),(0,b.jsx)(u.EY,{style:[o.textSmall,{marginTop:"10px"}],children:"Terms:"}),(0,b.jsx)(u.EY,{style:o.textSmall,children:null===l||void 0===l?void 0:l.terms})]}),(0,b.jsxs)(u.Ss,{style:{width:"50%",borderLeft:"1px solid black",textAlign:"center",padding:5},children:[(0,b.jsx)(u._V,{src:null===s||void 0===s?void 0:s.signature,style:{height:30,marginBottom:10}}),(0,b.jsx)(u.EY,{style:o.textSmall,children:"Authorised Signatory For"}),(0,b.jsx)(u.EY,{style:o.textSmall,children:null===s||void 0===s?void 0:s.name})]})]})]})]})})},P=()=>{var e,t,s,m;const v=(0,i.Zp)(),{id:y,bill:C}=(0,i.g)(),[P,F]=(0,n.useState)(null),[Y,O]=(0,n.useState)(null),[R,M]=(0,n.useState)([]),[q,L]=(0,n.useState)({}),[B,U]=(0,n.useState)(""),[z,W]=(0,n.useState)(""),H=(0,h.A)(),G=(0,j.d4)((e=>e.mailModalSlice.show)),$=(0,j.wA)(),[J,Q]=(0,n.useState)(null),[X,Z]=(0,n.useState)(""),[K,V]=(0,n.useState)(!1),[ee,te]=(0,n.useState)(""),[se,le]=(0,n.useState)(!1);(0,n.useEffect)((()=>{"quotation"===C?(W("quotation"),Z("Qutation"),te("quotation-estimate")):"proforma"===C?(W("proforma"),Z("Proforma"),te("proforma-invoice")):"po"===C?(W("po"),Z("Purchase Order"),te("purchase-order")):"purchaseinvoice"===C?(W("purchaseinvoice"),Z("Purchase Invoice"),te("purchase-invoice")):"purchasereturn"===C?(W("purchasereturn"),Z("Purchase Return"),te("purchase-return")):"debitnote"===C?(W("debitnote"),Z("Debitnote"),te("debit-note")):"salesinvoice"===C?(W("salesinvoice"),Z("Sales Invoice"),te("sales-invoice")):"salesreturn"===C?(W("salesreturn"),Z("Sales Return"),te("sales-return")):"creditnote"===C?(W("creditnote"),Z("Creditnote"),te("credit-note")):"deliverychalan"===C&&(W("deliverychalan"),Z("Delivery Chalan"),te("delivery-chalan"))}),[C]),(0,n.useEffect)((()=>{(async()=>{try{const e="https://ezy-bill-api.tisindia.net/api/v1/company/get",t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r.A.get("token")})}),s=await t.json();return O(s),s}catch(e){return console.log(e),e}})(),(async()=>{try{if(z){const e="https://ezy-bill-api.tisindia.net/api/v1"+"/".concat(z,"/get"),t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r.A.get("token"),id:y})}),s=await t.json();return F(s.data),s}}catch(e){return console.log(e),e}})()}),[z]),(0,n.useEffect)((()=>{let e=[];P&&P.items.forEach(((t,s)=>{let l={};if(l.hsn=t.hsn,l.rate=t.tax,e.length>0)for(let n=0;n<e.length;n++){if(l.hsn==e[n].hsn){e[n].price+=parseInt(t.price),l.price=parseInt(e[n].price),e[n].taxAmount+=parseInt(t.qun)*parseInt(t.price)/100*parseInt(t.tax),l.taxAmount=parseInt(e[n].taxAmount);break}l.price=parseInt(t.price),l.taxAmount=parseInt(t.qun)*parseInt(t.price)/100*parseInt(t.tax)}else l.price=parseInt(t.price),l.taxAmount=parseInt(t.qun)*parseInt(t.price)/100*parseInt(t.tax);e.push(l)})),M([...e])}),[P]),(0,n.useEffect)((()=>{let e=0,t=0,s=0,n=0;P&&P.items.map(((l,a)=>{e+=parseInt(l.qun),t+=parseInt(l.qun)*parseInt(l.price)/100*l.tax,s+=parseInt(l.discountPerAmount||0);let i=parseInt(l.qun)*parseInt(l.price)+parseInt(l.qun)*parseInt(l.price)/100*l.tax;n+=i-parseInt(l.discountPerAmount||0)})),L((0,l.A)((0,l.A)({},q),{},{qun:e,taxAmount:t.toFixed(2),discount:s,amount:n.toFixed(2)})),U((0,c.toWords)(n||0))}),[P]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.A,{}),(0,b.jsxs)("main",{id:"main",children:[(0,b.jsx)(d.A,{}),(0,b.jsxs)(f.A,{open:se,onClose:()=>le(!1),children:[(0,b.jsx)(f.A.Header,{children:(0,b.jsx)(f.A.Actions,{children:"Make Payment"})}),(0,b.jsxs)(f.A.Body,{children:["purchaseinvoice"===z&&(0,b.jsx)(_.AddPaymentOutComponent,{partyId:null===P||void 0===P||null===(e=P.party)||void 0===e?void 0:e._id,invoiceNumber:null===P||void 0===P?void 0:P.purchaseInvoiceNumber,due:null===P||void 0===P?void 0:P.dueAmount}),"salesinvoice"===z&&(0,b.jsx)(D.AddPaymentInComponent,{partyId:null===P||void 0===P||null===(t=P.party)||void 0===t?void 0:t._id,invoiceNumber:null===P||void 0===P?void 0:P.purchaseInvoiceNumber,due:null===P||void 0===P?void 0:P.dueAmount})]})]}),(0,b.jsx)(g,{open:G,pdf:J,email:null===P||void 0===P||null===(s=P.party)||void 0===s?void 0:s.email}),(0,b.jsx)("div",{className:"content__body",children:(0,b.jsx)("div",{id:"invoice",className:"content__body__main w-[100%] min-h-[100vh] bg-gray-100 flex justify-center",children:(0,b.jsxs)("div",{className:"bg-white /*w-[190mm]*/ w-[80%]  p-5",children:[(0,b.jsxs)("div",{id:"invoiceBtn",className:"flex gap-2 w-full justify-end mb-5",children:[("purchaseinvoice"===z||"salesinvoice"===z)&&(null===P||void 0===P?void 0:P.dueAmount)>0&&(0,b.jsx)("button",{onClick:async()=>{le(!0)},className:"bg-[#003E32] text-white rounded-[5px] px-2 py-[5px] gap-1",children:"Make Payment"}),(0,b.jsxs)("button",{onClick:()=>{T()({title:"Are you sure?",icon:"warning",buttons:!0}).then((e=>{e&&(T()("Quotation successfully duplicate",{icon:"success"}),v("/admin/".concat(ee,"/add/").concat(y)))}))},title:"Duplicate",className:"bg-[#003E32] text-white rounded-[5px] flex justify-center items-center px-2 py-[5px] gap-1",children:[(0,b.jsx)(E.F.COPY,{}),"Duplicate"]}),(0,b.jsxs)("button",{onClick:()=>{(0,x.A)(k({companyDetails:Y,billData:P,billDetails:q,hsnData:R,totalAmountInText:B,billname:X.toUpperCase()}))},title:"PDF",className:"bg-[#003E32] text-white rounded-[5px] flex justify-center items-center px-2 py-[5px]",children:[(0,b.jsx)(a.uNb,{className:"text-white text-[15px] mr-1"}),"Download"]}),(0,b.jsx)(N.A,{trigger:"click",enterable:!0,placement:"bottomEnd",open:K,onClick:()=>V(!K),speaker:(0,b.jsxs)(S.A,{children:[(0,b.jsxs)("div",{onClick:()=>{(async()=>{try{const e=await(0,u.x8)(k({companyDetails:Y,billData:P,billDetails:q,hsnData:R,totalAmountInText:B,billname:z.toUpperCase()})).toBlob();let t=await function(e){return new Promise(((t,s)=>{const l=new FileReader;l.readAsDataURL(e),l.onload=()=>t(l.result.split(",")[1]),l.onerror=s}))}(e);Q(t),$((0,p.L$)(!0))}catch(e){return H("Something went wrong","error"),e}})(),V(!1)},className:"flex items-center gap-2 w-[120px] p-1 cursor-pointer hover:bg-gray-100 rounded",children:[(0,b.jsx)(I.FlW,{className:"text-[16px]"}),"Email"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 w-[120px] p-1 cursor-pointer hover:bg-gray-100 rounded",children:[(0,b.jsx)(w.imD,{className:"text-[16px]"}),"WhatsApp"]})]}),children:(0,b.jsxs)("div",{className:"flex items-center gap-3 bg-[#003E32] text-white rounded-[5px] px-2 py-[5px] cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(A.y40,{}),"Share"]}),(0,b.jsx)(w.suq,{})]})}),(0,b.jsxs)("button",{onClick:()=>{const e=document.getElementById("mainBill").innerHTML;document.body.innerHTML=e,window.print(),window.location.reload()},title:"Print Bill",className:"bg-[#003E32] text-white rounded-[5px] flex justify-center items-center px-2 py-[5px]",children:[(0,b.jsx)(E.F.PRINTER,{className:"text-white text-[15px] mr-1"}),"Print"]})]}),(0,b.jsx)("div",{id:"mainBill",children:(0,b.jsxs)("div",{className:"border border-black p-4",children:[(0,b.jsxs)("p",{className:"font-semibold text-center uppercase",children:[z.toUpperCase()," Invoice"]}),(0,b.jsxs)("div",{className:"border border-b-0 w-full mt-3",children:[(0,b.jsxs)("div",{className:"flex w-full border-b h-[130px]",children:[(0,b.jsxs)("div",{className:"p-3 w-[60%] flex items-center gap-5 border-r",children:[(0,b.jsx)("div",{children:(0,b.jsx)("img",{src:null===Y||void 0===Y?void 0:Y.invoiceLogo,className:"h-[100px]"})}),(0,b.jsxs)("div",{className:"flex flex-col gap-1 text-[12px]",children:[(0,b.jsx)("p",{className:"text-blue-700 font-semibold text-[16px] leading-[0]",children:null===Y||void 0===Y?void 0:Y.name}),(0,b.jsx)("p",{children:null===Y||void 0===Y?void 0:Y.address}),(0,b.jsxs)("p",{className:"leading-[0]",children:[(0,b.jsx)("span",{className:"font-semibold",children:"GSTIN"}),":  ",null===Y||void 0===Y?void 0:Y.gst]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-semibold",children:"PAN"}),": ",null===Y||void 0===Y?void 0:Y.pan]}),(0,b.jsxs)("p",{className:"leading-[0]",children:[(0,b.jsx)("span",{className:"font-semibold",children:"Mobile"}),":  ",null===Y||void 0===Y?void 0:Y.phone]})]})]}),(0,b.jsxs)("div",{className:"w-[40%] flex flex-col justify-center px-3 text-[12px]",children:[(0,b.jsxs)("p",{children:[(0,b.jsxs)("span",{className:"font-semibold",children:[X," No: "]}),(null===P||void 0===P?void 0:P.quotationNumber)||(null===P||void 0===P?void 0:P.proformaNumber)||(null===P||void 0===P?void 0:P.poNumber)||(null===P||void 0===P?void 0:P.purchaseInvoiceNumber)||(null===P||void 0===P?void 0:P.purchaseReturnNumber)||(null===P||void 0===P?void 0:P.debitNoteNumber)||(null===P||void 0===P?void 0:P.salesInvoiceNumber)||(null===P||void 0===P?void 0:P.salesReturnNumber)||(null===P||void 0===P?void 0:P.creditNoteNumber)||(null===P||void 0===P?void 0:P.deliveryChalanNumber)]}),(0,b.jsxs)("p",{children:[(0,b.jsxs)("span",{className:"font-semibold",children:[X," Date: "]}),new Date((null===P||void 0===P?void 0:P.estimateDate)||(null===P||void 0===P?void 0:P.invoiceDate)||(null===P||void 0===P?void 0:P.debitNoteDate)||(null===P||void 0===P?void 0:P.returnDate)||(null===P||void 0===P?void 0:P.poDate)||(null===P||void 0===P?void 0:P.purchaseInvoiceDate)||(null===P||void 0===P?void 0:P.creditNoteDate)||(null===P||void 0===P?void 0:P.purchaseReturnDate)||(null===P||void 0===P?void 0:P.chalanDate)).toLocaleDateString()]})]})]}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)("p",{className:"text-[12px]",children:"TO"}),(0,b.jsx)("p",{className:"text-black font-semibold text-[12px] uppercase",children:null===P||void 0===P?void 0:P.party.name}),(0,b.jsxs)("p",{className:"text-[12px]",children:[(0,b.jsx)("span",{className:"text-black font-semibold",children:"Address:"})," ",null===P||void 0===P?void 0:P.party.billingAddress]}),(0,b.jsxs)("p",{className:"text-[12px]",children:[(0,b.jsx)("span",{className:"text-black font-semibold",children:"Mobile:"})," ",null===P||void 0===P?void 0:P.party.contactNumber]}),(0,b.jsxs)("p",{className:"text-[12px] uppercase text-black",children:[(0,b.jsx)("span",{className:"font-semibold",children:"GSTIN:"})," ",null===P||void 0===P?void 0:P.party.gst,(0,b.jsx)("span",{className:"font-semibold ml-2",children:"PAN:"})," ",null===P||void 0===P?void 0:P.party.pan]})]})]}),(0,b.jsx)("div",{className:"table__wrapper items-page",children:(0,b.jsxs)("table",{className:"w-full text-[12px] border item__table",children:[(0,b.jsx)("thead",{className:"bg-gray-100",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{align:"center",valign:"center",className:"p-2",width:"5%",children:"SL.NO."}),(0,b.jsx)("td",{align:"center",width:"49%",children:"ITEM"}),(0,b.jsx)("td",{align:"center",width:"7%",children:"HSN/SAC"}),(0,b.jsx)("td",{align:"center",width:"7%",children:"QTY."}),(0,b.jsx)("td",{align:"center",width:"7%",children:"RATE"}),(0,b.jsx)("td",{align:"center",width:"8%",children:"DISCOUNT"}),(0,b.jsx)("td",{align:"center",width:"7%",children:"TAX"}),(0,b.jsx)("td",{align:"center",width:"10%",children:"AMOUNT(INR.)"})]})}),(0,b.jsxs)("tbody",{children:[P&&P.items.map(((e,t)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{valign:"top",align:"center",className:"p-2 border",children:t+1}),(0,b.jsx)("td",{valign:"top",align:"left",children:e.itemName}),(0,b.jsx)("td",{valign:"top",align:"right",children:e.hsn}),(0,b.jsxs)("td",{valign:"top",align:"right",children:[e.qun," ",(0,b.jsx)("sub",{children:e.selectedUnit})]}),(0,b.jsx)("td",{valign:"top",align:"right",children:e.price}),(0,b.jsxs)("td",{valign:"top",align:"right",children:[e.discountPerAmount||"0.00",(0,b.jsx)("div",{className:"discount-font text-gray-500",children:isNaN(parseFloat(e.discountPerAmount)/(parseFloat(e.price)*parseFloat(e.qun))*100)?"(0.00%)":"(".concat((parseFloat(e.discountPerAmount)/(parseFloat(e.price)*parseFloat(e.qun))*100).toFixed(2),"%)")})]}),(0,b.jsxs)("td",{valign:"top",align:"right",children:[(e.qun*e.price/100*e.tax).toFixed(2),(0,b.jsx)("div",{className:"text-gray-500 discount-font",children:"(".concat(e.tax||"0.00","%)")})]}),(0,b.jsxs)("td",{valign:"top",align:"right",children:[" ",(parseFloat(e.price)*parseFloat(e.qun)-parseFloat(e.discountPerAmount||0)+e.qun*e.price/100*e.tax).toFixed(2)]})]},t))),Array.from({length:Math.max(0,8-((null===P||void 0===P||null===(m=P.items)||void 0===m?void 0:m.length)||0))}).map(((e,t)=>(0,b.jsxs)("tr",{className:"without__border",children:[(0,b.jsx)("td",{className:"p-2 border without__border",children:"\xa0"}),(0,b.jsx)("td",{className:"without__border",children:"\xa0"}),(0,b.jsx)("td",{className:"without__border",children:"\xa0"}),(0,b.jsx)("td",{className:"without__border",children:"\xa0"}),(0,b.jsx)("td",{className:"without__border",children:"\xa0"}),(0,b.jsx)("td",{className:"without__border",children:"\xa0"}),(0,b.jsx)("td",{className:"without__border",children:"\xa0"}),(0,b.jsx)("td",{className:"without__border",children:"\xa0"})]},t+100)))]}),(0,b.jsxs)("tfoot",{className:"w-full",children:[(0,b.jsxs)("tr",{className:"font-bold bg-[#F3F4F6]",children:[(0,b.jsx)("td",{colSpan:3,align:"right",children:"TOTAL"}),(0,b.jsx)("td",{children:q.qun}),(0,b.jsx)("td",{}),(0,b.jsxs)("td",{children:["INR. ",q.discount]}),(0,b.jsxs)("td",{children:["INR. ",q.taxAmount]}),(0,b.jsxs)("td",{children:["INR. ",q.amount]})]}),(null===P||void 0===P?void 0:P.roundOffAmount)&&(0,b.jsxs)("tr",{className:"font-bold bg-[#F3F4F6]",children:[(0,b.jsx)("td",{colSpan:7,align:"right",className:"italic",children:"Round Off"}),(0,b.jsx)("td",{children:null===P||void 0===P?void 0:P.roundOffAmount})]}),(null===P||void 0===P?void 0:P.roundOffAmount)&&(0,b.jsxs)("tr",{className:"font-bold bg-[#F3F4F6]",children:[(0,b.jsx)("td",{colSpan:7,align:"right",className:"font-semibold",children:"SUB TOTAL"}),(0,b.jsx)("td",{children:q.amount-(null===P||void 0===P?void 0:P.roundOffAmount)})]})]})]})}),(0,b.jsx)("div",{className:"print-page-break mt-2 ",children:(0,b.jsxs)("table",{className:"w-full text-[12px] ",children:[(0,b.jsx)("thead",{className:"bg-gray-100",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"HSN Code"}),(0,b.jsx)("td",{children:"Tax Type"}),(0,b.jsx)("td",{children:"Rate"}),(0,b.jsx)("td",{children:"Amount"}),(0,b.jsx)("td",{children:"Total Tax Amount"})]})}),(0,b.jsx)("tbody",{children:R&&[...new Map(R.map((e=>[e.hsn,e])))].map(((e,t)=>{let[s,l]=e;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{rowSpan:2,children:l.hsn}),(0,b.jsx)("td",{children:"SGST"}),(0,b.jsxs)("td",{children:[l.rate/2,"%"]}),(0,b.jsx)("td",{children:l.price/2}),(0,b.jsx)("td",{children:l.taxAmount.toFixed(2)})]},"".concat(t,"-sgst")),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"CGST"}),(0,b.jsxs)("td",{children:[l.rate/2,"%"]}),(0,b.jsx)("td",{children:l.price/2}),(0,b.jsx)("td",{children:l.taxAmount.toFixed(2)})]},"".concat(t,"-cgst"))]})}))})]})}),(0,b.jsxs)("div",{className:"border w-full mt-2",children:[(0,b.jsx)("div",{className:"w-full border-b",children:(0,b.jsxs)("p",{className:"text-[12px] p-1",children:[(0,b.jsx)("span",{className:"font-bold ",children:"Total Amount (in words) : "}),B]})}),(0,b.jsxs)("div",{className:"w-full flex",children:[(0,b.jsxs)("div",{className:"w-full p-2",children:[(0,b.jsx)("p",{className:"font-semibold text-md",children:"Note:"}),(0,b.jsx)("p",{children:null===P||void 0===P?void 0:P.note}),(0,b.jsx)("br",{}),(0,b.jsx)("p",{className:"font-semibold text-md",children:"Terms:"}),(0,b.jsx)("p",{children:null===P||void 0===P?void 0:P.terms})]}),(0,b.jsxs)("div",{className:"border-l w-full text-center p-2",children:[(0,b.jsx)("img",{src:null===Y||void 0===Y?void 0:Y.signature,alt:"signature",className:"mx-auto h-[30px]"}),(0,b.jsx)("p",{className:"text-[10px] leading-[0] mt-5",children:"Authorised Signatory For"}),(0,b.jsx)("p",{className:"text-[10px]",children:null===Y||void 0===Y?void 0:Y.name})]})]})]})]})})]})})})]})]})}},37614:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AddPaymentInComponent:()=>p,default:()=>j});var l=s(89379),n=s(65043),a=s(75206),i=s(86319),r=s(35543),o=s(88918),d=s(9435),c=s(1880),u=s(66580),x=s(89771),h=s(53435),m=s(70579);const p=e=>{let{mode:t,partyId:s,invoiceNumber:a,due:i}=e;const p=(0,u.Zp)(),{getApiData:j}=(0,o.A)(),v=(0,d.A)(),{id:y}=(0,u.g)(),[b,g]=(0,n.useState)({party:s||"",paymentInNumber:"",paymentInDate:"",paymentMode:"",account:"",amount:"",details:"",invoiceId:""}),[f,N]=(0,n.useState)([]),[S,w]=(0,n.useState)([]),[A,I]=(0,n.useState)([]);let[C,T]=(0,n.useState)([]),[E,_]=(0,n.useState)(0);(0,n.useEffect)((()=>{if(b.amount){let e=0;for(const s of C)e+=parseInt(s.dueAmount,10);const t=parseInt(b.amount,10)-e;_(t)}}),[b.amount,C]),(0,n.useEffect)((()=>{(async()=>{try{const e="https://ezy-bill-api.tisindia.net/api/v1/salesinvoice/get",t=c.A.get("token"),s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,invoice:!0,party:b.party})}),l=await s.json(),n=l.data.map((e=>({value:e.salesInvoiceNumber,label:e.salesInvoiceNumber,due:e.dueAmount})));console.log(l.data),I([...l.data]),w([...n])}catch(e){return console.log(e),v("Something went wrong","error")}})()}),[b.party]),(0,n.useEffect)((()=>{if(t){(async()=>{const e=await j("paymentin",y);g((0,l.A)((0,l.A)((0,l.A)({},b),e.data),{},{paymentInDate:e.data.paymentInDate.split("T")[0]}))})()}}),[t]),(0,n.useEffect)((()=>{(async()=>{{const e=(await j("account")).data.map((e=>({label:e.title,value:e._id})));N([...e])}})()}),[]);const D=()=>{g({party:"",paymentInNumber:"",paymentInDate:"",paymentMode:"",account:"",amount:"",details:"",invoiceId:""})};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"content__body__main bg-white",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 lg:gap-4 gap-0",children:[(0,m.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"mb-1",children:"Select Party"}),(0,m.jsx)(x.A,{model:"party",partyType:"customer",onType:e=>{g((0,l.A)((0,l.A)({},b),{},{party:e}))},value:b.party})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"mb-1",children:"Amount"}),(0,m.jsx)("input",{type:"text",value:b.amount,onChange:C.length>0?null:e=>g((0,l.A)((0,l.A)({},b),{},{amount:e.target.value}))})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"mb-1",children:"Payment in Number"}),(0,m.jsx)("input",{type:"text",value:b.paymentInNumber,onChange:e=>g((0,l.A)((0,l.A)({},b),{},{paymentInNumber:e.target.value}))})]})]}),(0,m.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"mb-1",children:"Payment in Date"}),(0,m.jsx)("input",{type:"date",onChange:e=>{g((0,l.A)((0,l.A)({},b),{},{paymentInDate:e.target.value}))},value:b.paymentInDate,className:"w-full"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"mb-1",children:"Payment Mode"}),(0,m.jsxs)("select",{name:"mode",id:"",value:b.paymentMode,onChange:e=>g((0,l.A)((0,l.A)({},b),{},{paymentMode:e.target.value})),children:[(0,m.jsx)("option",{value:"",children:"--Select--"}),(0,m.jsx)("option",{value:"cash",children:"Cash"}),(0,m.jsx)("option",{value:"bank",children:"Bank"}),(0,m.jsx)("option",{value:"cheque",children:"Cheque"})]})]}),"cash"!==b.paymentMode&&(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"mb-1",children:"Account"}),(0,m.jsx)(r.A,{className:"w-full",data:f,onChange:e=>g((0,l.A)((0,l.A)({},b),{},{account:e})),value:b.account})]})]})]})}),(0,m.jsxs)("div",{className:"content__body__main mt-3",children:[(0,m.jsxs)("table",{className:"w-full border",children:[(0,m.jsx)("thead",{className:"bg-gray-200",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{}),(0,m.jsx)("td",{className:"p-2 font-medium",children:"Date"}),(0,m.jsx)("td",{className:"font-medium",children:"Invoice Number"}),(0,m.jsx)("td",{className:"font-medium",children:"Invoice Amount"}),(0,m.jsx)("td",{className:"font-medium",children:"TDS Amount"})]})}),(0,m.jsx)("tbody",{children:A.length>0?A.map(((e,t)=>(0,m.jsxs)("tr",{className:"border-gray-300",children:[(0,m.jsx)("td",{className:"p-2 max-w-2",children:(0,m.jsx)("input",{type:"checkbox",onChange:t=>((e,t)=>{const{checked:s}=e.target,n=parseInt(t.dueAmount);if(s){if(E<=0)return v("No amount left to allocate","error"),e.preventDefault(),void(e.target.checked=!1);const s=Math.min(E,n),a=[...C,(0,l.A)((0,l.A)({},t),{},{allocated:s})];T(a),_(E-s)}else{const e=C.find((e=>e._id===t._id)),s=C.filter((e=>e._id!==t._id));e&&_(E+e.allocated),T(s)}})(t,e)})}),(0,m.jsx)("td",{children:e.invoiceDate.split("T")[0]}),(0,m.jsx)("td",{children:e.salesInvoiceNumber}),(0,m.jsx)("td",{children:e.dueAmount||0}),(0,m.jsx)("td",{children:e.tdsAmount||0})]},t))):(0,m.jsx)("tr",{className:"text-center",children:(0,m.jsx)("td",{colSpan:5,className:"py-5 text-gray-500 font-bold",children:"No Invoice found"})})})]}),(0,m.jsxs)("div",{className:"w-full flex justify-end gap-3 mt-3",children:[(0,m.jsxs)("button",{onClick:async()=>{if(""===b.party)return v("Please select a party","error");if(""===b.paymentInNumber)return v("Please enter a payment number","error");if(""===b.paymentInDate)return v("Please select a payment date","error");if(""===b.paymentMode)return v("Please select a payment mode","error");if(""===b.account)return v("Please select an account","error");if(C.length<=0)return v("Select invoice","error");try{const e="https://ezy-bill-api.tisindia.net/api/v1/paymentin/add",s=c.A.get("token"),n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t?(0,l.A)((0,l.A)({},b),{},{token:s,update:!0,id:y,checkedInv:C}):(0,l.A)((0,l.A)({},b),{},{token:s,checkedInv:C}))}),a=await n.json();return 200!==n.status||a.err?v(a.err,"error"):t?(v("Payment update successfully","success"),void p(-1)):(D(),v("Payment add successfully","success"),void p("/admin/payment-in"))}catch(e){return console.log(e),v("Something went wrong","error")}},className:"bg-green-500 hover:bg-green-400 save__and__reset__btns",children:[(0,m.jsx)(h.F.CHECK,{}),t?"Update":"Save"]}),(0,m.jsxs)("button",{onClick:D,className:"bg-blue-800 hover:bg-blue-700 save__and__reset__btns",children:[(0,m.jsx)(h.F.RESET,{}),"Reset"]})]})]})]})},j=e=>{let{mode:t}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a.A,{title:"Add Payment"}),(0,m.jsxs)("main",{id:"main",children:[(0,m.jsx)(i.A,{}),(0,m.jsx)("div",{className:"content__body",children:(0,m.jsx)(p,{mode:t})})]})]})}},3601:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AddPaymentOutComponent:()=>p,default:()=>j});var l=s(89379),n=s(65043),a=s(75206),i=s(86319),r=s(35543),o=s(88918),d=s(9435),c=s(1880),u=s(66580),x=s(89771),h=s(53435),m=s(70579);const p=e=>{let{mode:t,partyId:s,invoiceNumber:a,due:i}=e;const{getApiData:p}=(0,o.A)(),j=(0,d.A)(),{id:v}=(0,u.g)(),[y,b]=(0,n.useState)({party:s||"",paymentOutNumber:"",paymentOutDate:"",paymentMode:"",account:"",amount:"",details:"",invoiceId:a||""}),[g,f]=(0,n.useState)(i),[N,S]=(0,n.useState)([]),[w,A]=(0,n.useState)([]),I=(0,u.Zp)(),[C,T]=(0,n.useState)([]);let[E,_]=(0,n.useState)([]),[D,k]=(0,n.useState)(0);(0,n.useEffect)((()=>{if(y.amount){let e=0;for(const s of E)e+=parseInt(s.dueAmount,10);const t=parseInt(y.amount,10)-e;k(t)}}),[y.amount,E]),(0,n.useEffect)((()=>{(async()=>{try{const e="https://ezy-bill-api.tisindia.net/api/v1/purchaseinvoice/get",t=c.A.get("token"),s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,invoice:!0,party:y.party})}),l=await s.json(),n=l.data.map((e=>({value:e.purchaseInvoiceNumber,label:e.purchaseInvoiceNumber,due:e.dueAmount})));T([...l.data]),console.log(l.data),A([...n])}catch(e){return console.log(e),j("Something went wrong","error")}})()}),[y.party]),(0,n.useEffect)((()=>{if(t){(async()=>{const e=await p("paymentout",v);b((0,l.A)((0,l.A)((0,l.A)({},y),e.data),{},{paymentOutDate:e.data.paymentOutDate.split("T")[0]}))})()}}),[t]),(0,n.useEffect)((()=>{(async()=>{{const e=(await p("account")).data.map((e=>({label:e.title,value:e._id})));S([...e])}})()}),[]);const P=()=>{b({party:"",paymentOutNumber:"",paymentOutDate:"",paymentMode:"",account:"",amount:"",details:""})};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"content__body__main bg-white",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 lg:gap-4 gap-0",children:[(0,m.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"mb-1",children:"Select Party"}),(0,m.jsx)(x.A,{model:"party",partyType:"supplier",onType:e=>{b((0,l.A)((0,l.A)({},y),{},{party:e}))},value:y.party})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"mb-1",children:"Amount"}),(0,m.jsx)("input",{type:"text",value:y.amount,onChange:e=>b((0,l.A)((0,l.A)({},y),{},{amount:e.target.value}))})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"mb-1",children:"Payment out Number"}),(0,m.jsx)("input",{type:"text",value:y.paymentOutNumber,onChange:e=>b((0,l.A)((0,l.A)({},y),{},{paymentOutNumber:e.target.value}))})]})]}),(0,m.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"mb-1",children:"Payment out Date"}),(0,m.jsx)("input",{type:"date",value:y.paymentOutDate,onChange:e=>{b((0,l.A)((0,l.A)({},y),{},{paymentOutDate:e.target.value}))},className:"w-full"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"mb-1",children:"Payment Mode"}),(0,m.jsxs)("select",{name:"mode",id:"",value:y.paymentMode,onChange:e=>b((0,l.A)((0,l.A)({},y),{},{paymentMode:e.target.value})),children:[(0,m.jsx)("option",{value:"",children:"--Select--"}),(0,m.jsx)("option",{value:"cash",children:"Cash"}),(0,m.jsx)("option",{value:"bank",children:"Bank"}),(0,m.jsx)("option",{value:"cheque",children:"Cheque"})]})]}),"cash"!==y.paymentMode&&(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"mb-1",children:"Account"}),(0,m.jsx)(r.A,{className:"w-full",data:N,onChange:e=>b((0,l.A)((0,l.A)({},y),{},{account:e})),value:y.account})]})]})]})}),(0,m.jsxs)("div",{className:"content__body__main mt-3",children:[(0,m.jsxs)("table",{className:"w-full border",children:[(0,m.jsx)("thead",{className:"bg-gray-200",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{}),(0,m.jsx)("td",{className:"p-2 font-medium",children:"Date"}),(0,m.jsx)("td",{className:"font-medium",children:"Invoice Number"}),(0,m.jsx)("td",{className:"font-medium",children:"Invoice Amount"}),(0,m.jsx)("td",{className:"font-medium",children:"TDS Amount"})]})}),(0,m.jsx)("tbody",{children:C.length>0?C.map(((e,t)=>(0,m.jsxs)("tr",{className:"border-gray-300",children:[(0,m.jsx)("td",{className:"p-2 max-w-2",children:(0,m.jsx)("input",{type:"checkbox",onChange:t=>((e,t)=>{const{checked:s}=e.target,n=parseInt(t.dueAmount);if(s){if(D<=0)return j("No amount left to allocate","error"),e.preventDefault(),void(e.target.checked=!1);const s=Math.min(D,n),a=[...E,(0,l.A)((0,l.A)({},t),{},{allocated:s})];_(a),k(D-s)}else{const e=E.find((e=>e._id===t._id)),s=E.filter((e=>e._id!==t._id));e&&k(D+e.allocated),_(s)}})(t,e)})}),(0,m.jsx)("td",{children:e.invoiceDate.split("T")[0]}),(0,m.jsx)("td",{children:e.purchaseInvoiceNumber}),(0,m.jsx)("td",{children:e.dueAmount||0}),(0,m.jsx)("td",{children:e.tdsAmount||0})]},t))):(0,m.jsx)("tr",{className:"text-center",children:(0,m.jsx)("td",{colSpan:5,className:"py-5 text-gray-500 font-bold",children:"No Invoice found"})})})]}),(0,m.jsxs)("div",{className:"w-full flex justify-end gap-3 mt-3",children:[(0,m.jsxs)("button",{onClick:async()=>{if(""===y.party)return j("Please select a party","error");if(""===y.paymentOutNumber)return j("Please enter a payment number","error");if(""===y.paymentOutDate)return j("Please select a payment date","error");if(""===y.paymentMode)return j("Please select a payment mode","error");if(""===y.account)return j("Please select an account","error");if(E.length<=0)return j("Select invoice","error");try{const e="https://ezy-bill-api.tisindia.net/api/v1/paymentout/add",s=c.A.get("token"),n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t?(0,l.A)((0,l.A)({},y),{},{token:s,update:!0,id:v,checkedInv:E}):(0,l.A)((0,l.A)({},y),{},{token:s,checkedInv:E}))}),a=await n.json();return 200!==n.status||a.err?j(a.err,"error"):t?(j("Payment update successfully","success"),void I(-1)):(P(),j("Payment add successfully","success"),void I("/admin/payment-out"))}catch(e){return console.log(e),j("Something went wrong","error")}},className:"bg-green-500 hover:bg-green-400 save__and__reset__btns",children:[(0,m.jsx)(h.F.CHECK,{}),t?"Update":"Save"]}),(0,m.jsxs)("button",{onClick:P,className:"bg-blue-800 hover:bg-blue-700 save__and__reset__btns",children:[(0,m.jsx)(h.F.RESET,{}),"Reset"]})]})]})]})},j=e=>{let{mode:t}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a.A,{title:"Add Payment"}),(0,m.jsxs)("main",{id:"main",children:[(0,m.jsx)(i.A,{}),(0,m.jsx)("div",{className:"content__body",children:(0,m.jsx)(p,{mode:t})})]})]})}},74926:(e,t,s)=>{!function(){"use strict";"object"==typeof self&&self.self===self&&self||"object"==typeof s.g&&s.g.global===s.g&&s.g;function l(e){return!("number"!=typeof e||e!=e||e===1/0||e===-1/0)}function n(e){return"number"==typeof e&&Math.abs(e)<=9007199254740991}var a=/(hundred|thousand|(m|b|tr|quadr)illion)$/,i=/teen$/,r=/y$/,o=/(zero|one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve)$/,d={zero:"zeroth",one:"first",two:"second",three:"third",four:"fourth",five:"fifth",six:"sixth",seven:"seventh",eight:"eighth",nine:"ninth",ten:"tenth",eleven:"eleventh",twelve:"twelfth"};function c(e){return a.test(e)||i.test(e)?e+"th":r.test(e)?e.replace(r,"ieth"):o.test(e)?e.replace(o,u):e}function u(e,t){return d[t]}var x=1e3,h=1e6,m=1e9,p=1e12,j=1e15,v=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],y=["zero","ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];function b(e,t){var s,a=parseInt(e,10);if(!l(a))throw new TypeError("Not a finite number: "+e+" ("+typeof e+")");if(!n(a))throw new RangeError("Input is not a safe number, it\u2019s either too large or too small.");return s=function e(t){var s,l,n=arguments[1];return 0===t?n?n.join(" ").replace(/,$/,""):"zero":(n||(n=[]),t<0&&(n.push("minus"),t=Math.abs(t)),t<20?(s=0,l=v[t]):t<100?(s=t%10,l=y[Math.floor(t/10)],s&&(l+="-"+v[s],s=0)):t<x?(s=t%100,l=e(Math.floor(t/100))+" hundred"):t<h?(s=t%x,l=e(Math.floor(t/x))+" thousand,"):t<m?(s=t%h,l=e(Math.floor(t/h))+" million,"):t<p?(s=t%m,l=e(Math.floor(t/m))+" billion,"):t<j?(s=t%p,l=e(Math.floor(t/p))+" trillion,"):t<=9007199254740992&&(s=t%j,l=e(Math.floor(t/j))+" quadrillion,"),n.push(l),e(s,n))}(a),t?c(s):s}var g={toOrdinal:function(e){var t=parseInt(e,10);if(!l(t))throw new TypeError("Not a finite number: "+e+" ("+typeof e+")");if(!n(t))throw new RangeError("Input is not a safe number, it\u2019s either too large or too small.");var s=String(t),a=Math.abs(t%100),i=11<=a&&a<=13,r=s.charAt(s.length-1);return s+(i?"th":"1"===r?"st":"2"===r?"nd":"3"===r?"rd":"th")},toWords:b,toWordsOrdinal:function(e){return c(b(e))}};e.exports&&(t=e.exports=g),t.numberToWords=g}()},50477:()=>{}}]);
//# sourceMappingURL=5249.645a7dbc.chunk.js.map