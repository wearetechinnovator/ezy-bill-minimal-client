"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[4527],{80138:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var a=s(70579);const l=()=>(0,a.jsx)("div",{className:"shimmer__parent",children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"flex flex-col gap-2",children:Array.from({length:8}).map(((e,t)=>(0,a.jsx)("div",{className:"animate w-full h-[20px] rounded"},e)))})})})},64527:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var a=s(89379),l=s(65043),n=s(80138),i=s(75206),r=s(86319),c=s(53435),o=s(9435),d=s(1880),x=s(70579);document.title="Report | Daybook";const h=()=>{const e=(0,o.A)(),[t,s]=(0,l.useState)([]),[h,m]=(0,l.useState)(!1),[u,p]=(0,l.useState)(!1),[j,f]=(0,l.useState)({formDate:(new Date).toISOString().split("T")[0],toDate:(new Date).toISOString().split("T")[0],voucher:"sales"}),[v,b]=(0,l.useState)(null),N=async()=>{if(Object.values(j).some((e=>!e||""===e)))return e("Please fill all filters","error");try{p(!0),b(0);const t=d.A.get("token");let a="https://ezy-bill-api.tisindia.net/api/v1";"sales"===j.voucher?a+="/salesinvoice/filter":"purchase"===j.voucher&&(a+="/purchaseinvoice/filter");const l={fromDate:j.formDate,toDate:j.toDate,token:t},n=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),i=await n.json();if(p(!1),200!==n.status||i.data.length<1)return s([]),e("No bill found in this voucher","error");s([...null===i||void 0===i?void 0:i.data]),p(!1);const r=i.data.reduce(((e,t)=>e+t.finalAmount),0);b(r)}catch(t){return e("Something went to wrong","error")}};(0,l.useEffect)((()=>{N()}),[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(i.A,{title:"DayBook"}),(0,x.jsxs)("main",{id:"main",children:[(0,x.jsx)(r.A,{}),(0,x.jsxs)("div",{className:"content__body",children:[(0,x.jsx)("div",{className:"content__body__main mb-4",children:(0,x.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[(0,x.jsxs)("div",{className:"flex flex-col gap-1 w-full lg:w-1/2",children:[(0,x.jsx)("p",{className:"text-xs",children:"From Date"}),(0,x.jsx)("input",{type:"date",value:j.formDate,onChange:e=>{f((0,a.A)((0,a.A)({},j),{},{formDate:e.target.value}))}})]}),(0,x.jsxs)("div",{className:"flex flex-col gap-1 w-full lg:w-1/2",children:[(0,x.jsx)("p",{className:"text-xs",children:"To Date"}),(0,x.jsx)("input",{type:"date",value:j.toDate,onChange:e=>{f((0,a.A)((0,a.A)({},j),{},{toDate:e.target.value}))}})]}),(0,x.jsxs)("div",{className:"flex flex-col gap-1 w-full lg:w-1/2",children:[(0,x.jsx)("p",{className:"text-xs",children:"Select Voucher"}),(0,x.jsxs)("select",{value:j.voucher,onChange:e=>{f((0,a.A)((0,a.A)({},j),{},{voucher:e.target.value}))},children:[(0,x.jsx)("option",{value:"",children:"Select"}),(0,x.jsx)("option",{value:"sales",children:"Sales"}),(0,x.jsx)("option",{value:"purchase",children:"Purchase"})]})]}),(0,x.jsxs)("div",{className:"w-full flex justify-end gap-3 mt-3",children:[(0,x.jsxs)("button",{className:"add-bill-btn",onClick:N,children:[(0,x.jsx)(c.F.SEARCH,{}),"Search"]}),(0,x.jsxs)("button",{className:"reset-bill-btn",onClick:()=>{f((e=>(0,a.A)((0,a.A)({},e),{},{formDate:(new Date).toISOString().split("T")[0],toDate:(new Date).toISOString().split("T")[0],voucher:"sales"}))),N()},children:[(0,x.jsx)(c.F.RESET,{}),"Reset"]})]})]})}),u?(0,x.jsx)(n.A,{}):(0,x.jsx)("div",{className:"content__body__main",children:t.length>0?(0,x.jsx)("div",{className:"overflow-x-auto list__table",children:(0,x.jsxs)("table",{className:"min-w-full bg-white",id:"listQuotation",children:[(0,x.jsx)("thead",{className:"list__table__head",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"py-2 px-4 border-b cursor-pointer",onClick:()=>{const e=[...t].sort(((e,t)=>{const s=new Date(e.invoiceDate),a=new Date(t.invoiceDate);return h?s-a:a-s}));s(e),m(!h)},children:(0,x.jsxs)("div",{className:"flex items-center justify-center",children:["Date ",h?(0,x.jsx)(c.F.DROPDOWN,{}):(0,x.jsx)(c.F.DROPUP,{})]})}),(0,x.jsx)("th",{className:"py-2 px-4 border-b",children:"Invoice No."}),(0,x.jsx)("th",{className:"py-2 px-4 border-b",children:"Party Name"}),(0,x.jsx)("th",{className:"py-2 px-4 border-b",children:"Amount"})]})}),(0,x.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map(((e,t)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{align:"center",className:"py-2 ",children:e.invoiceDate.split("T")[0]}),(0,x.jsx)("td",{className:"px-4 border-b",align:"center",children:e.salesInvoiceNumber||e.purchaseInvoiceNumber}),(0,x.jsx)("td",{className:"px-4 border-b",align:"center",children:e.party.name}),(0,x.jsx)("td",{className:"px-4 border-b",align:"center",children:e.finalAmount})]},t)))}),(0,x.jsx)("tfoot",{className:"border",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{colSpan:3,align:"right",className:"py-2 font-semibold uppercase text-[15px]",children:"Total Amount"}),(0,x.jsx)("td",{align:"center",className:"font-semibold text-[15px]",children:v})]})})]})}):(0,x.jsxs)("p",{className:"font-semibold text-xl text-gray-300 flex flex-col items-center",children:[(0,x.jsx)(c.F.INVOICE,{className:"text-2xl"}),"No Data Found"]})})]})]})]})}}}]);
//# sourceMappingURL=4527.737258a4.chunk.js.map