"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[453],{99679:(e,s,a)=>{a.d(s,{A:()=>i});a(65043);var t=a(70579);const i=()=>(0,t.jsx)("div",{class:"w-4 h-4 border-2 border-t-transparent border-white rounded-full animate-spin"})},99803:(e,s,a)=>{a.d(s,{A:()=>t});const t=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["jpg","png","jpeg"],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const t=e;return new Promise(((i,l)=>{""!==e&&void 0!==e&&null!==e||i("Select your file");const n=t.name;s.some((e=>n.endsWith(e)))?t.size<=1048576*a?i(!0):i("Invalid filesize"):i("Invaid filetype")}))}},40453:(e,s,a)=>{a.r(s),a.d(s,{default:()=>j});var t=a(89379),i=a(65043),l=a(75206),n=a(86319),r=a(60184),c=a(89698),o=a(6720),d=a(99803),m=a(9435),u=a(1880),p=a(83003),h=a(99679),x=a(70579);const j=()=>{const e=(0,m.A)(),[s,a]=(0,i.useState)(!1),[j,f]=(0,i.useState)(!1),[v,w]=(0,i.useState)(!1),[g,N]=(0,i.useState)({name:"",email:"",profile:"",password:"",filename:""}),[b,y]=(0,i.useState)({currentPassword:"",newPassword:""}),A=(0,p.d4)((e=>e.userDetail)),[_,k]=(0,i.useState)(1),[C,P]=(0,i.useState)(!1);(0,i.useEffect)((()=>{N({name:A.name,email:A.email,filename:A.filename,profile:A.profile})}),[A]);const S=e=>{1===e?N({name:"",email:"",profile:"",password:""}):y({currentPassword:"",newPassword:""})};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(l.A,{title:"Profile"}),(0,x.jsxs)("main",{id:"main",children:[(0,x.jsx)(n.A,{}),(0,x.jsxs)("div",{className:"content__body",children:[(0,x.jsxs)("div",{className:"flex gap-4 items-center py-4",children:[(0,x.jsx)("div",{className:"profile-switch-button ".concat(1===_?"profile-switch-button-active":null),onClick:()=>k(1),children:"Profile details"}),(0,x.jsx)("div",{className:"profile-switch-button ".concat(2===_?"profile-switch-button-active":null),onClick:()=>k(2),children:"Change password"})]}),1==_&&(0,x.jsxs)("div",{className:"content__body__main",children:[(0,x.jsxs)("div",{className:"flex justify-between gap-5  flex-col lg:flex-row",children:[(0,x.jsxs)("div",{className:"w-full",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("p",{className:"ml-1",children:["Name ",(0,x.jsx)("span",{className:"required__text",children:"*"})]}),(0,x.jsx)("input",{type:"Text",className:"mb-2",onChange:e=>N((0,t.A)((0,t.A)({},g),{},{name:e.target.value})),value:g.name})]}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("p",{className:"ml-1",children:["Email ",(0,x.jsx)("span",{className:"required__text",children:"*"})]}),(0,x.jsx)("input",{type:"email",className:"mb-2",onChange:e=>N((0,t.A)((0,t.A)({},g),{},{email:e.target.value})),value:g.email})]})]}),(0,x.jsxs)("div",{className:"w-full",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"ml-1",children:"Profile picture"}),(0,x.jsxs)("div",{className:"file__uploader__div",children:[(0,x.jsx)("span",{className:"file__name",children:g.filename}),(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsx)("input",{type:"file",id:"invoiceLogo",className:"hidden",onChange:s=>(async s=>{let a=await(0,d.A)(s.target.files[0]);if("boolean"!==typeof a)return e(a,"error");const i=new FileReader;i.readAsDataURL(s.target.files[0]),i.onload=()=>{N((0,t.A)((0,t.A)({},g),{},{profile:i.result,filename:s.target.files[0].name}))}})(s)}),(0,x.jsx)("label",{htmlFor:"invoiceLogo",className:"file__upload",title:"Upload",children:(0,x.jsx)(o.P4e,{})}),g.filename&&(0,x.jsx)(c.OH1,{className:"remove__upload ",title:"Remove upload",onClick:()=>{N((0,t.A)((0,t.A)({},g),{},{filename:""}))}})]})]})]}),(0,x.jsxs)("p",{className:"ml-1 mt-2",children:["Password ",(0,x.jsx)("span",{className:"required__text",children:"*"})]}),(0,x.jsxs)("div",{className:"relative  ",children:[(0,x.jsx)("input",{type:s?"text":"password",onChange:e=>N((0,t.A)((0,t.A)({},g),{},{password:e.target.value})),value:g.password}),(0,x.jsx)("div",{className:"absolute top-2 right-3 cursor-pointer",onClick:()=>a(!s),children:s?(0,x.jsx)(o.kIi,{}):(0,x.jsx)(r.QJN,{})})]})]})]}),(0,x.jsxs)("div",{className:"flex justify-center pt-9 gap-5",children:[(0,x.jsx)("div",{className:"",children:(0,x.jsxs)("button",{className:"p-2 flex rounded-sm bg-green-500 text-white items-center gap-1",onClick:async s=>{if(""===g.name||""===g.email||""===g.password)return e("fill the required","error");try{P(!0);const s="https://ezy-bill-api.tisindia.net/api/v1/user/create",a=(0,t.A)((0,t.A)({},g),{},{update:!0,token:u.A.get("token")}),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),l=await i.json();return P(!1),500===i.status||l.err?e(l.err,"error"):e(l.msg,"success")}catch(a){return console.log(a),e("Something went wrong","error")}},children:[C?(0,x.jsx)(h.A,{}):(0,x.jsx)(r.yjt,{}),"Update"]})}),(0,x.jsx)("div",{children:(0,x.jsxs)("button",{className:"p-2 flex rounded-sm bg-blue-500 text-white items-center gap-1",onClick:()=>S(1),children:[(0,x.jsx)(c.A1o,{}),"Reset"]})})]})]}),2===_&&(0,x.jsxs)("div",{className:"content__body__main",children:[(0,x.jsx)("p",{className:"ml-1",children:" Current password"}),(0,x.jsxs)("div",{className:"relative  ",children:[(0,x.jsx)("input",{type:j?"text":"password",onChange:e=>y((0,t.A)((0,t.A)({},b),{},{currentPassword:e.target.value})),value:b.currentPassword}),(0,x.jsx)("div",{className:"absolute top-2 right-3",onClick:()=>f(!j),children:(0,x.jsx)("div",{className:"absolute right-1 cursor-pointer  ",onClick:()=>f(!j),children:j?(0,x.jsx)(o.kIi,{}):(0,x.jsx)(r.QJN,{})})}),(0,x.jsx)("p",{className:"ml-1 mt-2",children:"New password"}),(0,x.jsxs)("div",{className:"relative  ",children:[(0,x.jsx)("input",{type:v?"text":"password",onChange:e=>y((0,t.A)((0,t.A)({},b),{},{newPassword:e.target.value})),value:b.newPassword}),(0,x.jsx)("div",{className:"absolute top-2 right-3",onClick:()=>w(!v),children:(0,x.jsx)("div",{className:"absolute right-1  cursor-pointer ",onClick:()=>w(!v),children:v?(0,x.jsx)(o.kIi,{}):(0,x.jsx)(r.QJN,{})})}),(0,x.jsxs)("div",{className:"flex justify-center gap-5 pt-9",children:[(0,x.jsx)("div",{className:"",children:(0,x.jsxs)("button",{className:"p-2 flex rounded-sm bg-green-500 text-white items-center gap-1",onClick:async()=>{if(""===b.currentPassword||""===b.newPassword)return e("fill the blank","error");try{P(!0);const s="https://ezy-bill-api.tisindia.net/api/v1/user/change-pass",a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,t.A)((0,t.A)({},b),{},{token:u.A.get("token")}))}),i=await a.json();return P(!1),500===a.status||i.err?e(i.err,"error"):(y({currentPassword:"",newPassword:""}),e(i.msg,"success"))}catch(s){return console.log(s),e("Something went wrong","error")}},children:[C?(0,x.jsx)(h.A,{}):(0,x.jsx)(r.yjt,{}),"Update"]})}),(0,x.jsx)("div",{children:(0,x.jsxs)("button",{className:"p-2 flex rounded-sm bg-blue-500 text-white items-center gap-1",onClick:()=>S(2),children:[(0,x.jsx)(c.A1o,{}),"Reset"]})})]})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=453.ea39d8a6.chunk.js.map